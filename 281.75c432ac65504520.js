"use strict";(self.webpackChunkCarnivoraCommunity=self.webpackChunkCarnivoraCommunity||[]).push([[281],{9281:(Tt,O,l)=>{l.r(O),l.d(O,{ComponentModule:()=>At});var s=l(177),p=l(5574),j=l(8136);class P{constructor(){this.id=0,this.nombre="",this.fechaEvento=new Date,this.horaInicio="",this.duracionSubastaMinutos=10,this.descansoMinutos=0,this.estado=""}}var t=l(7705),g=l(1626),_=l(1413),v=l(9437),x=l(8810),h=l(5312);const w=h.c.base;let C=(()=>{class n{constructor(e){this.http=e,this.url=`${w}/eventos`,this.listaCambio=new _.B}list(){let e=sessionStorage.getItem("token");return this.http.get(this.url,{headers:(new g.Lr).set("Authorization",`Bearer ${e}`).set("Content-Type","application/json")})}insert(e){let o=sessionStorage.getItem("token");return this.http.post(this.url,e,{headers:(new g.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}listId(e){let o=sessionStorage.getItem("token");return this.http.get(`${this.url}/${e}`,{headers:(new g.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}updateEstado(e,o){let a=sessionStorage.getItem("token");return this.http.put(`${this.url}/${e}/estado/${o}`,{},{headers:(new g.Lr).set("Authorization",`Bearer ${a}`).set("Content-Type","application/json")})}delete(e){let o=sessionStorage.getItem("token");return this.http.delete(`${this.url}/${e}`,{headers:(new g.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")}).pipe((0,v.W)(this.handleError.bind(this)))}setList(e){this.listaCambio.next(e)}getList(){return this.listaCambio.asObservable()}autoCerrar(e){let o=sessionStorage.getItem("token");return this.http.put(`${this.url}/${e}/auto-cerrar`,{},{headers:(new g.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}handleError(e){let o="Ocurri\xf3 un error desconocido";return(409===e.status||500===e.status)&&(o="No se puede eliminar: est\xe1 vinculado a otros registros"),(0,x.$)(o)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var u=l(9417);let m=(()=>{class n{volver(){history.back()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-volver"]],decls:2,vars:0,consts:[["aria-label","Volver",1,"btn-volver",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"button",0),t.bIt("click",function(){return a.volver()}),t.EFF(1," \u276e\n"),t.k0s())},styles:[".btn-volver[_ngcontent-%COMP%]{position:fixed;top:16px;left:16px;z-index:1000;background:var(--color-bg);border:1px solid var(--color-border);border-radius:10px;min-width:42px;min-height:42px;display:flex;align-items:center;justify-content:center;color:var(--color-primary);font-size:1.6rem;font-weight:900;cursor:pointer;box-shadow:0 6px 14px #0000001f;transition:transform .15s,box-shadow .15s,background-color .2s}.btn-volver[_ngcontent-%COMP%]:hover{background:var(--color-bg-alt);box-shadow:0 8px 18px #00000029}.btn-volver[_ngcontent-%COMP%]:active{transform:scale(.94)}"]})}}return n})();function I(n,i){1&n&&(t.j41(0,"p",21),t.EFF(1," Ya existe un evento abierto "),t.k0s())}function z(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.cerrarManual(a.id))}),t.nrm(1,"i",40),t.k0s()}}function S(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"span",26),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"div",27)(10,"h3"),t.EFF(11),t.k0s(),t.j41(12,"p"),t.nrm(13,"i",28),t.EFF(14),t.k0s()()(),t.j41(15,"div",29)(16,"span",30),t.EFF(17),t.k0s(),t.j41(18,"div",31)(19,"button",32),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return c.seleccionar(r),t.Njj(c.toggleForm())}),t.nrm(20,"i",33),t.k0s(),t.DNE(21,z,2,0,"button",34),t.j41(22,"button",35),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.irAOrganizarSubastas(r.id))}),t.nrm(23,"i",36),t.k0s(),t.j41(24,"button",37),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.eliminar(r.id))}),t.nrm(25,"i",38),t.k0s()()()()}if(2&n){const e=i.$implicit;t.R7$(4),t.JRh(t.i5U(5,12,e.fechaEvento,"dd")),t.R7$(3),t.JRh(t.i5U(8,15,e.fechaEvento,"MMM")),t.R7$(4),t.JRh(e.nombre),t.R7$(3),t.E5c(" ",e.horaInicio," \u2022 ",e.duracionSubastaMinutos," min + ",e.descansoMinutos," min descanso "),t.R7$(2),t.AVh("abierto","ABIERTO"===e.estado)("cerrado","CERRADO"===e.estado),t.R7$(1),t.SpI(" ",e.estado," "),t.R7$(4),t.Y8G("ngIf","ABIERTO"===e.estado)}}function R(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",41),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleForm())}),t.k0s()}}function $(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.guardar())}),t.EFF(1,"Guardar evento"),t.k0s()}}function A(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.actualizar())}),t.EFF(1,"Actualizar evento"),t.k0s()}}let D=(()=>{class n{constructor(e,o){this.eventoService=e,this.router=o,this.evento=new P,this.eventos=[],this.editando=!1,this.showForm=!1,this.hayEventoAbierto=!1}ngOnInit(){this.listar(),setInterval(()=>{this.eventos.forEach(e=>{"ABIERTO"===e.estado&&this.eventoService.autoCerrar(e.id).subscribe(()=>{this.listar()})})},6e4)}listar(){this.eventoService.list().subscribe(e=>{this.eventos=e,this.hayEventoAbierto=this.eventos.some(o=>"ABIERTO"===o.estado)})}guardar(){this.hayEventoAbierto||this.eventoService.insert(this.evento).subscribe(()=>{this.limpiar(),this.listar(),this.showForm=!1})}seleccionar(e){this.evento={...e},this.editando=!0}actualizar(){this.eventoService.insert(this.evento).subscribe(()=>{this.limpiar(),this.listar(),this.showForm=!1})}eliminar(e){this.eventoService.delete(e).subscribe(()=>{this.listar()})}cerrarManual(e){this.eventoService.updateEstado(e,"CERRADO").subscribe(()=>{this.listar()})}irAOrganizarSubastas(e){this.router.navigate(["/components/organizar-subastas",e])}toggleForm(){this.hayEventoAbierto&&!this.editando||(this.showForm=!this.showForm,this.showForm||this.limpiar())}limpiar(){this.evento=new P,this.editando=!1}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(C),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-evento"]],decls:47,vars:14,consts:[[1,"evento-page"],[1,"top-bar"],[1,"btn-new",3,"disabled","click"],[1,"fa-solid","fa-plus"],["class","warning",4,"ngIf"],[1,"lista-eventos"],["class","evento-row",4,"ngFor","ngForOf"],["class","drawer-overlay",3,"click",4,"ngIf"],[1,"drawer"],[1,"drawer-header"],[1,"close-btn",3,"click"],[1,"drawer-body"],[1,"form-section"],[3,"ngModel","ngModelChange"],[1,"form-grid"],["type","date",3,"ngModel","ngModelChange"],["type","time",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[1,"drawer-footer"],["class","btn-save",3,"click",4,"ngIf"],[1,"btn-cancel",3,"click"],[1,"warning"],[1,"evento-row"],[1,"row-left"],[1,"fecha-badge"],[1,"dia"],[1,"mes"],[1,"evento-info"],[1,"fa-regular","fa-clock"],[1,"row-right"],[1,"estado-chip"],[1,"acciones"],[1,"icon-btn","edit",3,"click"],[1,"fa-solid","fa-pen"],["class","icon-btn lock",3,"click",4,"ngIf"],[1,"icon-btn","organize",3,"click"],[1,"fa-solid","fa-list"],[1,"icon-btn","delete",3,"click"],[1,"fa-solid","fa-trash"],[1,"icon-btn","lock",3,"click"],[1,"fa-solid","fa-lock"],[1,"drawer-overlay",3,"click"],[1,"btn-save",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0),t.nrm(1,"app-volver"),t.j41(2,"div",1),t.nrm(3,"br"),t.j41(4,"h2"),t.EFF(5," Eventos de Subasta"),t.k0s(),t.j41(6,"button",2),t.bIt("click",function(){return a.toggleForm()}),t.nrm(7,"i",3),t.EFF(8," Nuevo evento "),t.k0s()(),t.j41(9,"strong"),t.DNE(10,I,2,0,"p",4),t.k0s(),t.j41(11,"div",5),t.DNE(12,S,26,18,"div",6),t.k0s(),t.DNE(13,R,1,0,"div",7),t.j41(14,"div",8)(15,"div",9)(16,"h3"),t.EFF(17),t.k0s(),t.j41(18,"button",10),t.bIt("click",function(){return a.toggleForm()}),t.EFF(19,"\xd7"),t.k0s()(),t.j41(20,"div",11)(21,"div",12)(22,"label"),t.EFF(23,"Nombre del evento"),t.k0s(),t.j41(24,"input",13),t.bIt("ngModelChange",function(c){return a.evento.nombre=c}),t.k0s()(),t.j41(25,"div",14)(26,"div",12)(27,"label"),t.EFF(28,"Fecha del evento"),t.k0s(),t.j41(29,"input",15),t.bIt("ngModelChange",function(c){return a.evento.fechaEvento=c}),t.k0s()(),t.j41(30,"div",12)(31,"label"),t.EFF(32,"Hora de inicio"),t.k0s(),t.j41(33,"input",16),t.bIt("ngModelChange",function(c){return a.evento.horaInicio=c}),t.k0s()(),t.j41(34,"div",12)(35,"label"),t.EFF(36,"Duraci\xf3n por subasta"),t.k0s(),t.j41(37,"input",17),t.bIt("ngModelChange",function(c){return a.evento.duracionSubastaMinutos=c}),t.k0s()(),t.j41(38,"div",12)(39,"label"),t.EFF(40,"Descanso"),t.k0s(),t.j41(41,"input",17),t.bIt("ngModelChange",function(c){return a.evento.descansoMinutos=c}),t.k0s()()()(),t.j41(42,"div",18),t.DNE(43,$,2,0,"button",19),t.DNE(44,A,2,0,"button",19),t.j41(45,"button",20),t.bIt("click",function(){return a.toggleForm()}),t.EFF(46,"Cancelar"),t.k0s()()()()),2&o&&(t.R7$(6),t.Y8G("disabled",a.hayEventoAbierto),t.R7$(4),t.Y8G("ngIf",a.hayEventoAbierto),t.R7$(2),t.Y8G("ngForOf",a.eventos),t.R7$(1),t.Y8G("ngIf",a.showForm),t.R7$(1),t.AVh("open",a.showForm),t.R7$(3),t.JRh(a.editando?"Editar evento":"Crear nuevo evento"),t.R7$(7),t.Y8G("ngModel",a.evento.nombre),t.R7$(5),t.Y8G("ngModel",a.evento.fechaEvento),t.R7$(4),t.Y8G("ngModel",a.evento.horaInicio),t.R7$(4),t.Y8G("ngModel",a.evento.duracionSubastaMinutos),t.R7$(4),t.Y8G("ngModel",a.evento.descansoMinutos),t.R7$(2),t.Y8G("ngIf",!a.editando),t.R7$(1),t.Y8G("ngIf",a.editando))},dependencies:[s.Sq,s.bT,u.me,u.Q0,u.BC,u.vS,m,s.vh],styles:[".evento-page[_ngcontent-%COMP%]{padding:20px;font-family:Inter,Segoe UI,sans-serif;background:#f4f5f7;min-height:100vh}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;background:#ffffff;padding:10px 16px;border-radius:12px;box-shadow:0 4px 8px #0000000d}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:20px;color:#1f2937}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]{background:#6366f1;color:#fff;border:none;padding:8px 14px;border-radius:8px;font-weight:500;display:flex;align-items:center;gap:6px;cursor:pointer;box-shadow:0 2px 6px #0000001f;transition:all .2s ease}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]:hover{background:#4f46e5;transform:translateY(-1px);box-shadow:0 4px 10px #00000026}.evento-page[_ngcontent-%COMP%]   .lista-eventos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.evento-page[_ngcontent-%COMP%]   .evento-row[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-left:4px solid transparent;transition:all .2s ease}.evento-page[_ngcontent-%COMP%]   .evento-row[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 14px #0000000f;border-left-color:#6366f1}.evento-page[_ngcontent-%COMP%]   .row-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]{background:#eef2ff;color:#4f46e5;border-radius:10px;padding:6px 10px;text-align:center;min-width:50px;flex-shrink:0}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .dia[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .mes[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;letter-spacing:.5px}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:15px;color:#1f2937}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#6b7280;display:flex;align-items:center;gap:4px}.evento-page[_ngcontent-%COMP%]   .row-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.evento-page[_ngcontent-%COMP%]   .estado-chip[_ngcontent-%COMP%]{padding:4px 10px;border-radius:999px;font-size:11px;font-weight:600;display:flex;align-items:center;gap:4px}.evento-page[_ngcontent-%COMP%]   .estado-chip.abierto[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.evento-page[_ngcontent-%COMP%]   .estado-chip.abierto[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:50%;background:#1e40af}.evento-page[_ngcontent-%COMP%]   .estado-chip.cerrado[_ngcontent-%COMP%]{background:#fee2e2;color:#b91c1c}.evento-page[_ngcontent-%COMP%]   .estado-chip.cerrado[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:50%;background:#b91c1c}.evento-page[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{display:flex;gap:6px}.evento-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{border:none;padding:5px;border-radius:6px;cursor:pointer;transition:all .15s ease}.evento-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);filter:brightness(.9)}.evento-page[_ngcontent-%COMP%]   .icon-btn.edit[_ngcontent-%COMP%]{background:#fef9c3}.evento-page[_ngcontent-%COMP%]   .icon-btn.lock[_ngcontent-%COMP%]{background:#fde68a}.evento-page[_ngcontent-%COMP%]   .icon-btn.delete[_ngcontent-%COMP%]{background:#fecaca}.evento-page[_ngcontent-%COMP%]   .drawer-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(31,41,55,.5);z-index:900}.evento-page[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{position:fixed;top:0;right:-400px;width:400px;height:100vh;background:#ffffff;border-radius:16px 0 0 16px;box-shadow:-6px 0 18px #0003;transition:right .3s ease;z-index:1000;display:flex;flex-direction:column}.evento-page[_ngcontent-%COMP%]   .drawer.open[_ngcontent-%COMP%]{right:0}.evento-page[_ngcontent-%COMP%]   .drawer-header[_ngcontent-%COMP%]{padding:18px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e7eb}.evento-page[_ngcontent-%COMP%]   .drawer-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;font-weight:600;color:#1f2937}.evento-page[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{font-size:22px;background:none;border:none;cursor:pointer;color:#6b7280;transition:color .2s ease}.evento-page[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#1f2937}.evento-page[_ngcontent-%COMP%]   .drawer-body[_ngcontent-%COMP%]{padding:16px;flex:1;overflow-y:auto}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;margin-bottom:14px}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:13px;color:#6b7280}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 10px;border-radius:8px;border:1px solid #d1d5db;font-size:13px;transition:border-color .2s ease,box-shadow .2s ease}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 2px #6366f126}.evento-page[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.evento-page[_ngcontent-%COMP%]   .drawer-footer[_ngcontent-%COMP%]{padding:16px;display:flex;gap:10px;border-top:1px solid #e5e7eb}.evento-page[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#6366f1;color:#fff;border-radius:8px;padding:9px 14px;font-weight:600;border:none;cursor:pointer;transition:all .2s ease}.evento-page[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#4f46e5;transform:translateY(-1px)}.evento-page[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border-radius:8px;padding:9px 14px;border:none;cursor:pointer;transition:all .2s ease}.evento-page[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:translateY(-1px)}.warning[_ngcontent-%COMP%]{color:var(--color-estado-rechazado)}@media (max-width: 1024px){.evento-page[_ngcontent-%COMP%]   .lista-eventos[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:14px}.evento-page[_ngcontent-%COMP%]   .evento-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px;padding:14px}.evento-page[_ngcontent-%COMP%]   .row-left[_ngcontent-%COMP%]{width:100%;gap:10px}.evento-page[_ngcontent-%COMP%]   .row-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;gap:8px}.evento-page[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (max-width: 768px){.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]{width:100%;justify-content:center}.evento-page[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{width:95%}.evento-page[_ngcontent-%COMP%]   .drawer-body[_ngcontent-%COMP%]{padding:12px}.evento-page[_ngcontent-%COMP%]   .drawer-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.evento-page[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .dia[_ngcontent-%COMP%]{font-size:13px}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .mes[_ngcontent-%COMP%]{font-size:10px}.evento-page[_ngcontent-%COMP%]   .estado-chip[_ngcontent-%COMP%]{font-size:10px;padding:3px 7px}.evento-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{padding:4px;font-size:12px}}"]})}}return n})();class k{constructor(){this.id=0,this.planta="",this.maceta="",this.observaciones="",this.imagen="",this.estado="PENDIENTE",this.precioBase=0}}const T=h.c.base;let f=(()=>{class n{constructor(e){this.http=e,this.url=`${T}/subastas`,this.listaCambio=new _.B}getHeaders(){const e=sessionStorage.getItem("token");return(new g.Lr).set("Authorization",`Bearer ${e}`).set("Content-Type","application/json")}listMisSubastas(){return this.http.get(`${this.url}/mis-subastas`,{headers:this.getHeaders()})}listByEstado(e){return this.http.get(`${this.url}/estado/${e}`,{headers:this.getHeaders()})}insert(e){return this.http.post(this.url,e,{headers:this.getHeaders()}).pipe((0,v.W)(o=>(0,x.$)(o)))}getById(e){return this.http.get(`${this.url}/${e}`,{headers:this.getHeaders()})}update(e,o){return this.http.put(`${this.url}/${e}`,o,{headers:this.getHeaders()})}updateEstado(e,o){return this.http.put(`${this.url}/${e}/estado/${o}`,{},{headers:this.getHeaders()})}delete(e){return this.http.delete(`${this.url}/${e}`,{headers:this.getHeaders()})}setList(e){this.listaCambio.next(e)}getList(){return this.listaCambio.asObservable()}listByEvento(e){return this.http.get(`${this.url}/evento/${e}`,{headers:this.getHeaders()})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function N(n,i){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=i.$implicit;t.Y8G("value",e.id),t.R7$(1),t.E5c(" ",e.nombre," - ",t.i5U(2,4,e.fechaEvento,"shortDate")," - ",e.horaInicio," ")}}function G(n,i){if(1&n&&(t.j41(0,"div",18),t.nrm(1,"img",19),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("src",e.previewUrl,t.B4B)}}function B(n,i){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",3)(2,"label"),t.EFF(3,"Evento *"),t.k0s(),t.j41(4,"select",4),t.bIt("ngModelChange",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.subasta.eventoId=a)}),t.j41(5,"option",5),t.EFF(6,"Selecciona un evento"),t.k0s(),t.DNE(7,N,3,7,"option",6),t.k0s()(),t.j41(8,"div",3)(9,"label"),t.EFF(10,"Planta *"),t.k0s(),t.j41(11,"input",7),t.bIt("ngModelChange",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.subasta.planta=a)}),t.k0s()(),t.j41(12,"div",3)(13,"label"),t.EFF(14,"Maceta (opcional)"),t.k0s(),t.j41(15,"input",8),t.bIt("ngModelChange",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.subasta.maceta=a)}),t.k0s()(),t.j41(16,"div",3)(17,"label"),t.EFF(18,"Precio base (S/) *"),t.k0s(),t.j41(19,"input",9),t.bIt("ngModelChange",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.subasta.precioBase=a)}),t.k0s()(),t.j41(20,"div",3)(21,"label"),t.EFF(22,"Observaciones (opcional)"),t.k0s(),t.j41(23,"input",10),t.bIt("ngModelChange",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.subasta.observaciones=a)}),t.k0s()(),t.j41(24,"div",3)(25,"label"),t.EFF(26,"Imagen *"),t.k0s(),t.j41(27,"label",11)(28,"span"),t.EFF(29,"\u{1f4f7} Seleccionar imagen"),t.k0s(),t.j41(30,"input",12),t.bIt("change",function(a){t.eBV(e);const r=t.XpG();return t.Njj(r.onFileSelected(a))}),t.k0s()()(),t.DNE(31,G,2,1,"div",13),t.j41(32,"div",14)(33,"button",15),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.subastaEditando?a.guardarEdicion():a.crear())}),t.EFF(34),t.k0s(),t.j41(35,"button",16),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancelarEdicion())}),t.EFF(36,"Cancelar"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.subasta.eventoId),t.R7$(3),t.Y8G("ngForOf",e.eventosAbiertos),t.R7$(4),t.Y8G("ngModel",e.subasta.planta),t.R7$(4),t.Y8G("ngModel",e.subasta.maceta),t.R7$(4),t.Y8G("ngModel",e.subasta.precioBase),t.R7$(4),t.Y8G("ngModel",e.subasta.observaciones),t.R7$(8),t.Y8G("ngIf",e.previewUrl),t.R7$(3),t.SpI(" ",e.subastaEditando?"Guardar cambios":"Crear Subasta"," ")}}function X(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"p",21),t.EFF(2,"\u{1f6ab} Por el momento no hay eventos abiertos, vuelve m\xe1s tarde."),t.k0s(),t.j41(3,"div",14)(4,"button",16),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.cancelarEdicion())}),t.EFF(5,"Volver"),t.k0s()()()}}let F=(()=>{class n{constructor(e,o,a,r){this.subastaService=e,this.eventoService=o,this.router=a,this.route=r,this.subasta=new k,this.eventosAbiertos=[],this.previewUrl=null,this.subastaEditando=null}ngOnInit(){this.cargarEventosAbiertos();const e=this.route.snapshot.paramMap.get("id");e&&this.cargarSubasta(+e)}cargarEventosAbiertos(){this.eventoService.list().subscribe(e=>{this.eventosAbiertos=e.filter(o=>"ABIERTO"===o.estado)})}cargarSubasta(e){this.subastaService.getById(e).subscribe({next:o=>{this.subastaEditando=o,this.subasta={...o},this.previewUrl=o.imagen||null},error:o=>console.error("Error al cargar subasta",o)})}onFileSelected(e){const o=e.target.files[0];if(!o)return;const a=new FileReader;a.readAsDataURL(o),a.onload=()=>{this.previewUrl=a.result,this.subasta.imagen=a.result}}crear(){this.subasta.eventoId?this.subasta.planta?.trim()?!this.subasta.precioBase||this.subasta.precioBase<=0?alert("El precio base debe ser mayor a 0"):this.subasta.imagen?(this.subasta.observaciones?.trim()||(this.subasta.observaciones="-"),this.subastaService.insert(this.subasta).subscribe({next:()=>this.cancelarEdicion(),error:e=>console.error("Error al crear subasta",e)})):alert("Debes subir una imagen"):alert("La planta es obligatoria"):alert("Selecciona un evento v\xe1lido")}guardarEdicion(){if(this.subastaEditando){if(!this.subasta.planta?.trim())return void alert("La planta es obligatoria");if(!this.subasta.precioBase||this.subasta.precioBase<=0)return void alert("El precio base debe ser mayor a 0");if(!this.subasta.imagen)return void alert("Debes subir una imagen");this.subasta.observaciones?.trim()||(this.subasta.observaciones="-"),this.subastaService.update(this.subastaEditando.id,this.subasta).subscribe(()=>this.cancelarEdicion())}}cancelarEdicion(){this.subasta=new k,this.subastaEditando=null,this.previewUrl=null,history.back()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f),t.rXU(C),t.rXU(p.Ix),t.rXU(p.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-subasta"]],decls:6,vars:3,consts:[[1,"subasta-container"],[4,"ngIf","ngIfElse"],["noEventos",""],[1,"form-group"],["name","eventoId","required","",3,"ngModel","ngModelChange"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Nombre de la planta","required","",3,"ngModel","ngModelChange"],["type","text","placeholder","Tama\xf1o de maceta",3,"ngModel","ngModelChange"],["type","number","placeholder","Ej: 100","required","",3,"ngModel","ngModelChange"],["type","text","placeholder","Coloca alguna observaci\xf3n",3,"ngModel","ngModelChange"],[1,"upload-box"],["type","file","accept","image/*","hidden","",3,"change"],["class","preview",4,"ngIf"],[1,"acciones-form"],[1,"btn-crear",3,"click"],[1,"btn-cancelar",3,"click"],[3,"value"],[1,"preview"],[3,"src"],[1,"no-eventos-wrapper"],[1,"no-eventos"]],template:function(o,a){if(1&o&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.DNE(3,B,37,8,"div",1),t.DNE(4,X,6,0,"ng-template",null,2,t.C5r),t.k0s()),2&o){const r=t.sdS(5);t.R7$(2),t.JRh(a.subastaEditando?"Editar Subasta":"Crea tu Subasta"),t.R7$(1),t.Y8G("ngIf",a.eventosAbiertos.length>0)("ngIfElse",r)}},dependencies:[s.Sq,s.bT,u.xH,u.y7,u.me,u.Q0,u.wz,u.BC,u.YS,u.vS,s.vh],styles:[".subasta-container[_ngcontent-%COMP%]{max-width:760px;margin:40px auto;padding:30px;background:var(--color-bg);border-radius:24px;box-shadow:0 10px 28px #0000001f;font-family:Roboto,Helvetica Neue,sans-serif}.subasta-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:11px 12px;border-radius:12px;border:1px solid var(--color-border);background:var(--color-bg-alt);font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-bg)}.upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:14px;border:2px dashed var(--color-primary);border-radius:16px;background:var(--color-success);color:var(--color-secondary);font-weight:600;cursor:pointer;transition:all .15s ease}.upload-box[_ngcontent-%COMP%]:hover{background:var(--color-success-hover);transform:translateY(-1px)}.preview[_ngcontent-%COMP%]{margin-top:12px;text-align:center}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:260px;border-radius:16px;box-shadow:0 6px 14px #00000026}.acciones-form[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:18px}.btn-crear[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:20px;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:var(--color-bg);font-weight:600;cursor:pointer}.btn-cancelar[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:20px;background:var(--color-muted);color:var(--color-text-muted);font-weight:600;cursor:pointer}.no-eventos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;padding:30px 0;border:2px dashed var(--color-primary);border-radius:16px;background:var(--color-bg-alt)}.no-eventos[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--color-primary);font-weight:600;text-align:center}@media (max-width: 992px){.subasta-container[_ngcontent-%COMP%]{padding:24px}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:220px}}@media (max-width: 768px){.subasta-container[_ngcontent-%COMP%]{margin:24px 16px;padding:20px}.acciones-form[_ngcontent-%COMP%]{flex-direction:column}.btn-crear[_ngcontent-%COMP%], .btn-cancelar[_ngcontent-%COMP%]{width:100%}}@media (max-width: 520px){.subasta-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:13px;padding:10px}.upload-box[_ngcontent-%COMP%]{font-size:13px;padding:12px}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px}}"]})}}return n})();function Y(n,i){if(1&n&&t.nrm(0,"img",18),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.imagen,t.B4B)}}function V(n,i){1&n&&(t.j41(0,"div",19),t.EFF(1,"Sin imagen"),t.k0s())}function U(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.editar(a))}),t.EFF(1," Editar "),t.k0s()}}function H(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.eliminar(a.id))}),t.EFF(1," Eliminar "),t.k0s()}}function L(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"div",6),t.DNE(2,Y,1,1,"img",7),t.DNE(3,V,2,0,"ng-template",null,8,t.C5r),t.j41(5,"span",9),t.EFF(6),t.k0s()(),t.j41(7,"div",10)(8,"h3"),t.EFF(9),t.k0s(),t.j41(10,"div",11)(11,"div",12)(12,"strong"),t.EFF(13,"Evento:"),t.k0s(),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"div",12)(17,"strong"),t.EFF(18,"Fecha:"),t.k0s(),t.j41(19,"span"),t.EFF(20),t.nI1(21,"date"),t.k0s()(),t.j41(22,"div",12)(23,"strong"),t.EFF(24,"Hora inicio:"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()()(),t.j41(27,"div",11)(28,"div",12)(29,"strong"),t.EFF(30,"Planta:"),t.k0s(),t.j41(31,"span"),t.EFF(32),t.k0s()(),t.j41(33,"div",12)(34,"strong"),t.EFF(35,"Maceta:"),t.k0s(),t.j41(36,"span"),t.EFF(37),t.k0s()(),t.j41(38,"div",13)(39,"strong"),t.EFF(40,"Precio base:"),t.k0s(),t.j41(41,"span"),t.EFF(42),t.k0s()()()(),t.j41(43,"div",14)(44,"button",15),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.verDetalles(r))}),t.EFF(45,"Ver Detalles"),t.k0s(),t.DNE(46,U,2,0,"button",16),t.DNE(47,H,2,0,"button",17),t.k0s()()}if(2&n){const e=i.$implicit,o=t.sdS(4);t.R7$(2),t.Y8G("ngIf",e.imagen)("ngIfElse",o),t.R7$(3),t.Y8G("ngClass",(e.estado||"pendiente").toLowerCase()),t.R7$(1),t.SpI(" ",e.estado||"Pendiente"," "),t.R7$(3),t.SpI("Subasta #",e.numeroSubasta||"Por definir",""),t.R7$(6),t.JRh(e.eventoNombre||"Por definir"),t.R7$(5),t.JRh(e.fechaEvento?t.i5U(21,13,e.fechaEvento,"dd/MM/yyyy"):"Por definir"),t.R7$(6),t.JRh(e.horaInicio||"Por definir"),t.R7$(6),t.JRh(e.planta),t.R7$(5),t.JRh(e.maceta),t.R7$(5),t.SpI("S/ ",e.precioBase,""),t.R7$(4),t.Y8G("ngIf","ACEPTADA"!==e.estado&&"RECHAZADA"!==e.estado),t.R7$(1),t.Y8G("ngIf","ACEPTADA"!==e.estado)}}let J=(()=>{class n{constructor(e,o){this.subastaService=e,this.router=o,this.subastas=[],this.cargando=!1}ngOnInit(){this.cargarMisSubastas()}cargarMisSubastas(){this.cargando=!0,this.subastaService.listMisSubastas().subscribe({next:e=>{this.subastas=e,console.log("Mis subastas actualizadas:",this.subastas),this.cargando=!1},error:()=>{console.log("Error al cargar subastas"),this.cargando=!1}})}editar(e){this.router.navigate(["/components/subastas",e.id])}eliminar(e){this.subastaService.delete(e).subscribe(()=>{this.cargarMisSubastas()})}crearSubasta(){this.router.navigate(["/components/subastas"])}verDetalles(e){this.router.navigate(["/components/detalles"],{state:{subasta:e}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-listar"]],decls:9,vars:1,consts:[[1,"container"],[1,"subastas-header"],[1,"btn-crear",3,"click"],[1,"cards-grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-image-wrapper"],["alt","Imagen subasta","class","card-image",3,"src",4,"ngIf","ngIfElse"],["sinImagen",""],[1,"estado-etiqueta",3,"ngClass"],[1,"card-body"],[1,"card-info-row"],[1,"info-item"],[1,"info-item","precio"],[1,"card-footer"],[1,"btn-detalles",3,"click"],["class","btn-editar",3,"click",4,"ngIf"],["class","btn-eliminar",3,"click",4,"ngIf"],["alt","Imagen subasta",1,"card-image",3,"src"],[1,"sin-imagen"],[1,"btn-editar",3,"click"],[1,"btn-eliminar",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.nrm(3,"app-volver"),t.EFF(4," Tus Subastas"),t.k0s(),t.j41(5,"button",2),t.bIt("click",function(){return a.crearSubasta()}),t.EFF(6,"+ Crear Subasta"),t.k0s()(),t.j41(7,"div",3),t.DNE(8,L,48,16,"div",4),t.k0s()()),2&o&&(t.R7$(8),t.Y8G("ngForOf",a.subastas))},dependencies:[s.YU,s.Sq,s.bT,m,s.vh],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:24px auto;font-family:Roboto,Helvetica Neue,sans-serif;padding:0 16px}.subastas-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:12px}.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.btn-crear[_ngcontent-%COMP%]{padding:10px 18px;border-radius:12px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px #0000001f}.btn-crear[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.card[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:18px;border:1px solid var(--color-border);display:flex;flex-direction:column;overflow:hidden}.card-image-wrapper[_ngcontent-%COMP%]{position:relative;height:200px;border-bottom:1px solid var(--color-border)}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.sin-imagen[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;color:var(--color-text-muted);font-size:13px}.estado-etiqueta[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:600;background:var(--color-estado-pendiente);color:#92400e}.estado-etiqueta.aceptada[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado-etiqueta.rechazada[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.card-body[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:10px}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--color-title)}.card-info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;font-size:12px}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--color-title);font-weight:600}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--color-text-muted)}.info-item.precio[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:var(--color-secondary)}.card-footer[_ngcontent-%COMP%]{display:flex;gap:10px;padding:14px 16px;border-top:1px solid var(--color-border);flex-wrap:wrap}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;border:none}.btn-detalles[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);color:var(--color-primary)}.btn-editar[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.btn-editar[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.btn-eliminar[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.btn-eliminar[_ngcontent-%COMP%]:hover{background:#fecaca}@media (max-width: 1024px){.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 768px){.card-info-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.btn-crear[_ngcontent-%COMP%]{width:100%;text-align:center}}@media (max-width: 520px){.subastas-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}"]})}}return n})();function q(n,i){if(1&n&&t.nrm(0,"img",11),2&n){const e=t.XpG(2);t.Y8G("src",e.subasta.imagen,t.B4B)}}function Q(n,i){1&n&&(t.j41(0,"div",12),t.EFF(1,"Sin imagen"),t.k0s())}function Z(n,i){if(1&n&&(t.j41(0,"div",9)(1,"h3"),t.EFF(2,"Observaciones"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.subasta.observaciones)}}function K(n,i){if(1&n&&(t.j41(0,"div",1),t.nrm(1,"app-volver"),t.j41(2,"div",2)(3,"header",3)(4,"h2"),t.EFF(5,"Detalle de la Subasta"),t.k0s(),t.j41(6,"span",4),t.EFF(7),t.k0s()(),t.j41(8,"div",5)(9,"div",6),t.DNE(10,q,1,1,"img",7),t.DNE(11,Q,2,0,"ng-template",null,8,t.C5r),t.k0s(),t.j41(13,"div",9)(14,"h3"),t.EFF(15,"Informaci\xf3n general"),t.k0s(),t.j41(16,"p")(17,"strong"),t.EFF(18,"N\xb0 de subasta:"),t.k0s(),t.EFF(19),t.k0s(),t.j41(20,"p")(21,"strong"),t.EFF(22,"Evento:"),t.k0s(),t.EFF(23),t.k0s(),t.j41(24,"p")(25,"strong"),t.EFF(26,"Fecha del evento:"),t.k0s(),t.EFF(27),t.nI1(28,"date"),t.k0s(),t.j41(29,"p")(30,"strong"),t.EFF(31,"Hora inicio evento:"),t.k0s(),t.EFF(32),t.k0s()(),t.j41(33,"div",9)(34,"h3"),t.EFF(35,"Horario asignado"),t.k0s(),t.j41(36,"p")(37,"strong"),t.EFF(38,"Inicio:"),t.k0s(),t.EFF(39),t.nrm(40,"br"),t.j41(41,"strong"),t.EFF(42,"Fin:"),t.k0s(),t.EFF(43),t.k0s(),t.j41(44,"p")(45,"strong"),t.EFF(46,"Duraci\xf3n:"),t.k0s(),t.EFF(47),t.k0s(),t.j41(48,"p")(49,"strong"),t.EFF(50,"Descanso:"),t.k0s(),t.EFF(51),t.k0s()(),t.j41(52,"div",9)(53,"h3"),t.EFF(54,"Planta y maceta"),t.k0s(),t.j41(55,"p")(56,"strong"),t.EFF(57,"Planta:"),t.k0s(),t.EFF(58),t.k0s(),t.j41(59,"p")(60,"strong"),t.EFF(61,"Maceta:"),t.k0s(),t.EFF(62),t.k0s(),t.j41(63,"p")(64,"strong"),t.EFF(65,"Precio base:"),t.k0s(),t.EFF(66),t.k0s()(),t.j41(67,"div",9)(68,"h3"),t.EFF(69,"Subastador"),t.k0s(),t.j41(70,"p")(71,"strong"),t.EFF(72,"Nombre:"),t.k0s(),t.EFF(73),t.k0s(),t.j41(74,"p")(75,"strong"),t.EFF(76,"Contacto:"),t.k0s(),t.EFF(77),t.k0s(),t.j41(78,"p")(79,"strong"),t.EFF(80,"Procedencia:"),t.k0s(),t.EFF(81),t.k0s()(),t.DNE(82,Z,5,1,"div",10),t.k0s()()()),2&n){const e=t.sdS(12),o=t.XpG();t.R7$(6),t.Y8G("ngClass",o.subasta.estado.toLowerCase()),t.R7$(1),t.SpI(" ",o.subasta.estado," "),t.R7$(3),t.Y8G("ngIf",o.subasta.imagen)("ngIfElse",e),t.R7$(9),t.SpI(" ",o.subasta.numeroSubasta||"Lo define administraci\xf3n",""),t.R7$(4),t.SpI(" ",o.subasta.eventoNombre,""),t.R7$(4),t.SpI(" ",t.i5U(28,19,o.subasta.fechaEvento,"dd/MM/yyyy"),""),t.R7$(5),t.SpI(" ",o.subasta.horaInicio,""),t.R7$(7),t.SpI(" ",o.subasta.horaInicioAsignada||"Lo define administraci\xf3n",""),t.R7$(4),t.SpI(" ",o.subasta.horaFinAsignada||"Lo define administraci\xf3n"," "),t.R7$(4),t.SpI(" ",o.subasta.duracionSubastaMinutos," min"),t.R7$(4),t.SpI(" ",o.subasta.descansoMinutos," min"),t.R7$(7),t.SpI(" ",o.subasta.planta,""),t.R7$(4),t.SpI(" ",o.subasta.maceta,""),t.R7$(4),t.SpI(" S/ ",o.subasta.precioBase,""),t.R7$(7),t.SpI(" ",o.subasta.username,""),t.R7$(4),t.SpI(" ",o.subasta.phone,""),t.R7$(4),t.SpI(" ",o.subasta.city,""),t.R7$(1),t.Y8G("ngIf",o.subasta.observaciones)}}let W=(()=>{class n{constructor(e){this.router=e}ngOnInit(){const e=history.state;e.subasta&&(this.subasta=e.subasta)}volver(){history.back()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-informacion-subasta"]],decls:1,vars:1,consts:[["class","detalle-container",4,"ngIf"],[1,"detalle-container"],[1,"detalle-card"],[1,"detalle-header"],[1,"estado",3,"ngClass"],[1,"detalle-grid"],[1,"detalle-imagen"],[3,"src",4,"ngIf","ngIfElse"],["sinImagen",""],[1,"detalle-bloque"],["class","detalle-bloque",4,"ngIf"],[3,"src"],[1,"sin-imagen"]],template:function(o,a){1&o&&t.DNE(0,K,83,22,"div",0),2&o&&t.Y8G("ngIf",a.subasta)},dependencies:[s.YU,s.bT,m,s.vh],styles:[".detalle-container[_ngcontent-%COMP%]{max-width:1100px;margin:32px auto;font-family:Roboto,Helvetica Neue,sans-serif}.detalle-card[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:22px;border:1px solid var(--color-border);box-shadow:0 14px 40px #00000014;overflow:hidden}.detalle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--color-border);background:linear-gradient(180deg,var(--color-bg-alt),var(--color-bg))}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.estado[_ngcontent-%COMP%]{padding:6px 14px;border-radius:999px;font-size:13px;font-weight:700}.estado.pendiente[_ngcontent-%COMP%]{background:var(--color-estado-pendiente);color:#92400e}.estado.aceptada[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado.rechazada[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.detalle-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:420px 1fr;gap:24px;padding:24px}.detalle-imagen[_ngcontent-%COMP%]{border-radius:18px;overflow:hidden;border:1px solid var(--color-border);background:var(--color-bg-alt);display:flex;align-items:center;justify-content:center}.detalle-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.sin-imagen[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.detalle-bloque[_ngcontent-%COMP%]{background:var(--color-bg-alt);border-radius:16px;padding:16px 18px;border:1px solid var(--color-border)}.detalle-bloque[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:15px;color:var(--color-title)}.detalle-bloque[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:13px;color:var(--color-text-muted)}.detalle-bloque[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-title)}.detalle-footer[_ngcontent-%COMP%]{padding:18px 24px;border-top:1px solid var(--color-border);display:flex;justify-content:flex-end;background:var(--color-bg)}.detalle-footer[_ngcontent-%COMP%]   .btn-volver[_ngcontent-%COMP%]{padding:10px 20px;border-radius:999px;background:var(--color-bg-alt);border:1px solid var(--color-border);font-size:14px;font-weight:600;cursor:pointer;color:var(--color-title)}.detalle-footer[_ngcontent-%COMP%]   .btn-volver[_ngcontent-%COMP%]:hover{background:var(--color-border)}@media (max-width: 1200px){.detalle-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.detalle-imagen[_ngcontent-%COMP%]{height:260px}.detalle-bloque[_ngcontent-%COMP%]{padding:14px 16px}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.estado[_ngcontent-%COMP%]{font-size:12px;padding:5px 12px}}@media (max-width: 992px){.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 768px){.detalle-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.detalle-bloque[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.detalle-bloque[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 520px){.detalle-imagen[_ngcontent-%COMP%]{height:220px}.detalle-bloque[_ngcontent-%COMP%]{padding:12px 14px}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.estado[_ngcontent-%COMP%]{font-size:11px;padding:4px 10px}}"]})}}return n})();const tt=h.c.base;let E=(()=>{class n{constructor(e){this.http=e,this.url=`${tt}`}getHeaders(){const e=sessionStorage.getItem("token");return(new g.Lr).set("Authorization",`Bearer ${e}`).set("Content-Type","application/json")}listarSubastasEvento(e){return this.http.get(`${this.url}/subastas/evento/${e}`,{headers:this.getHeaders()})}organizarSubastas(e){return this.http.post(`${this.url}/organizar-subastas/${e}`,{},{headers:this.getHeaders()})}decidirSubasta(e,o){return this.http.put(`${this.url}/subastas/${e}/decision/${o}`,{},{headers:this.getHeaders()})}listarSubastasAceptadas(){return this.http.get(`${this.url}/subastas/aceptadas`,{headers:this.getHeaders()})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function et(n,i){if(1&n&&t.nrm(0,"img",30),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.imagen,t.B4B)}}function nt(n,i){1&n&&(t.j41(0,"div",31),t.EFF(1,"Sin imagen"),t.k0s())}function ot(n,i){if(1&n&&(t.j41(0,"p")(1,"b"),t.EFF(2,"Observaciones:"),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.SpI(" ",e.observaciones," ")}}function at(n,i){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"button",32),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.aceptar(a))}),t.EFF(2," Aceptar "),t.k0s(),t.j41(3,"button",33),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.rechazar(a))}),t.EFF(4," Rechazar "),t.k0s(),t.bVm()}}function rt(n,i){1&n&&(t.j41(0,"p",34),t.EFF(1," Esta subasta ha sido rechazada por un administrador. "),t.k0s())}const it=function(n,i,e){return{"estado-pendiente":n,"estado-aceptado":i,"estado-rechazado":e}};function st(n,i){if(1&n&&(t.j41(0,"div",8),t.nrm(1,"input",9),t.j41(2,"label",10),t.DNE(3,et,1,1,"img",11),t.DNE(4,nt,2,0,"ng-template",null,12,t.C5r),t.k0s(),t.j41(6,"div",13)(7,"h3"),t.EFF(8),t.k0s(),t.j41(9,"p",14)(10,"span",15),t.EFF(11),t.k0s(),t.j41(12,"span",16),t.EFF(13),t.k0s()(),t.j41(14,"p",17),t.EFF(15),t.k0s()(),t.j41(16,"div",18),t.nrm(17,"input",9),t.j41(18,"label",19),t.EFF(19," Ver Detalle "),t.k0s(),t.j41(20,"div",20)(21,"div",21)(22,"h3"),t.EFF(23),t.k0s(),t.j41(24,"label",22),t.EFF(25,"\xd7"),t.k0s()(),t.j41(26,"div",23)(27,"p")(28,"b"),t.EFF(29,"Subasta:"),t.k0s(),t.EFF(30),t.k0s(),t.j41(31,"p")(32,"b"),t.EFF(33,"Fecha:"),t.k0s(),t.EFF(34),t.nI1(35,"date"),t.k0s(),t.j41(36,"p")(37,"b"),t.EFF(38,"Hora Inicio:"),t.k0s(),t.EFF(39),t.k0s(),t.j41(40,"p")(41,"b"),t.EFF(42,"Hora Fin:"),t.k0s(),t.EFF(43),t.k0s(),t.j41(44,"p")(45,"b"),t.EFF(46,"Duraci\xf3n:"),t.k0s(),t.EFF(47),t.k0s(),t.j41(48,"p")(49,"b"),t.EFF(50,"Descanso:"),t.k0s(),t.EFF(51),t.k0s(),t.nrm(52,"hr"),t.j41(53,"p")(54,"b"),t.EFF(55,"Contacto:"),t.k0s(),t.EFF(56),t.k0s(),t.j41(57,"p")(58,"b"),t.EFF(59,"Ciudad:"),t.k0s(),t.EFF(60),t.k0s(),t.j41(61,"p")(62,"b"),t.EFF(63,"Tel\xe9fono:"),t.k0s(),t.EFF(64),t.k0s(),t.DNE(65,ot,4,1,"p",24),t.j41(66,"div",25),t.DNE(67,at,5,0,"ng-container",24),t.DNE(68,rt,2,0,"p",26),t.k0s()()()(),t.j41(69,"div",27),t.nrm(70,"div",28),t.j41(71,"label",29),t.EFF(72,"\xd7"),t.k0s(),t.nrm(73,"img",30),t.k0s()()),2&n){const e=i.$implicit,o=t.sdS(5);t.R7$(1),t.Mz_("id","img-",e.id,""),t.R7$(1),t.Mz_("for","img-",e.id,""),t.R7$(1),t.Y8G("ngIf",e.imagen)("ngIfElse",o),t.R7$(5),t.JRh(e.planta),t.R7$(2),t.Y8G("ngClass",t.sMw(30,it,"PENDIENTE"===e.estado,"ACEPTADA"===e.estado,"RECHAZADA"===e.estado)),t.R7$(1),t.SpI(" ",e.estado," "),t.R7$(2),t.SpI("S/ ",e.precioBase,""),t.R7$(2),t.SpI("Subastador: ",e.username,""),t.R7$(2),t.Mz_("id","det-",e.id,""),t.R7$(1),t.Mz_("for","det-",e.id,""),t.R7$(5),t.JRh(e.planta),t.R7$(1),t.Mz_("for","det-",e.id,""),t.R7$(6),t.SpI(" ",e.numeroSubasta||"-",""),t.R7$(4),t.SpI(" ",t.i5U(35,27,e.fechaEvento,"dd/MM/yyyy"),""),t.R7$(5),t.SpI(" ",e.horaInicioAsignada||"-",""),t.R7$(4),t.SpI(" ",e.horaFinAsignada||"-",""),t.R7$(4),t.SpI(" ",e.duracionSubastaMinutos," min"),t.R7$(4),t.SpI(" ",e.descansoMinutos," min"),t.R7$(5),t.SpI(" ",e.username,""),t.R7$(4),t.SpI(" ",e.city,""),t.R7$(4),t.SpI(" ",e.phone,""),t.R7$(1),t.Y8G("ngIf",e.observaciones),t.R7$(2),t.Y8G("ngIf","PENDIENTE"===e.estado),t.R7$(1),t.Y8G("ngIf","RECHAZADA"===e.estado),t.R7$(3),t.Mz_("for","img-",e.id,""),t.R7$(2),t.Y8G("src",e.imagen,t.B4B)}}function ct(n,i){1&n&&(t.j41(0,"p",35),t.EFF(1," No hay subastas registradas. "),t.k0s())}let dt=(()=>{class n{constructor(e,o,a,r){this.route=e,this.router=o,this.subastaService=a,this.adminService=r,this.subastas=[]}ngOnInit(){this.idEvento=Number(this.route.snapshot.paramMap.get("idEvento")),this.cargarSubastas()}cargarSubastas(){this.subastaService.listByEvento(this.idEvento).subscribe(e=>{this.subastas=e.filter(o=>"PENDIENTE"===o.estado||"RECHAZADA"===o.estado)})}volver(){this.router.navigate(["/components/eventos"])}aceptar(e){this.adminService.decidirSubasta(e.id,"ACEPTADA").subscribe(()=>this.cargarSubastas())}rechazar(e){this.adminService.decidirSubasta(e.id,"RECHAZADA").subscribe(()=>this.cargarSubastas())}verAceptadas(){this.router.navigate(["/components/subastas-aceptadas",this.idEvento])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(p.nX),t.rXU(p.Ix),t.rXU(f),t.rXU(E))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-organizar-subastas"]],decls:13,vars:3,consts:[[1,"organizar-container"],[1,"organizar-header"],[1,"header-left"],[1,"evento-id"],[1,"btn-secundario",3,"click"],[1,"lista-subastas"],["class","fila-subasta",4,"ngFor","ngForOf"],["class","sin-datos",4,"ngIf"],[1,"fila-subasta"],["type","checkbox","hidden","",3,"id"],[1,"img-box",3,"for"],[3,"src",4,"ngIf","ngIfElse"],["noImg",""],[1,"info"],[1,"meta"],[1,"estado",3,"ngClass"],[1,"precio"],[1,"sub"],[1,"acciones"],[1,"btn-detalle",3,"for"],[1,"drawer"],[1,"drawer-header"],[3,"for"],[1,"drawer-body"],[4,"ngIf"],[1,"drawer-acciones"],["class","mensaje-rechazada",4,"ngIf"],[1,"zoom"],[1,"zoom-bg"],[1,"zoom-close",3,"for"],[3,"src"],[1,"img-empty"],[1,"btn-aceptar",3,"click"],[1,"btn-rechazar",3,"click"],[1,"mensaje-rechazada"],[1,"sin-datos"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2),t.nrm(3,"app-volver"),t.j41(4,"h2"),t.EFF(5,"Subastas del Evento"),t.k0s(),t.j41(6,"span",3),t.EFF(7),t.k0s()(),t.j41(8,"button",4),t.bIt("click",function(){return a.verAceptadas()}),t.EFF(9," Ver subastas aceptadas "),t.k0s()(),t.j41(10,"div",5),t.DNE(11,st,74,34,"div",6),t.DNE(12,ct,2,0,"p",7),t.k0s()()),2&o&&(t.R7$(7),t.SpI("Evento #",a.idEvento,""),t.R7$(4),t.Y8G("ngForOf",a.subastas),t.R7$(1),t.Y8G("ngIf",!a.subastas.length))},dependencies:[s.YU,s.Sq,s.bT,m,s.vh],styles:[".organizar-container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;font-family:Roboto,Helvetica Neue,sans-serif}.organizar-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:50;display:grid;grid-template-columns:1fr auto;gap:16px;padding:18px 20px;margin-bottom:24px;background:var(--color-bg);border-bottom:1px solid var(--color-border)}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.organizar-header[_ngcontent-%COMP%]   .evento-id[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.btn-volver[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:6px 14px;border-radius:999px;background:var(--color-bg-alt);border:1px solid var(--color-border);color:var(--color-title);cursor:pointer;font-size:13px}.btn-secundario[_ngcontent-%COMP%]{align-self:center;padding:10px 18px;border-radius:12px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px #0000001f}.btn-secundario[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.lista-subastas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.fila-subasta[_ngcontent-%COMP%]{display:grid;grid-template-columns:200px 1fr auto;gap:18px;background:var(--color-bg);padding:18px;border-radius:18px;border:1px solid var(--color-border);align-items:center}.img-box[_ngcontent-%COMP%]{width:200px;height:140px;border-radius:14px;overflow:hidden;cursor:zoom-in;border:1px solid var(--color-border)}.img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.img-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:13px;color:var(--color-text-muted)}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:17px;color:var(--color-title)}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:13px;margin:6px 0}.precio[_ngcontent-%COMP%]{font-weight:600}.sub[_ngcontent-%COMP%]{font-size:12px;color:var(--color-text-muted)}.estado[_ngcontent-%COMP%]{font-weight:600;padding:4px 10px;border-radius:999px;font-size:12px}.estado-pendiente[_ngcontent-%COMP%]{background:var(--color-estado-pendiente);color:#92400e}.estado-aceptado[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado-rechazado[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.acciones[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-detalle[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);color:var(--color-primary);padding:8px 16px;border-radius:999px;font-size:13px;cursor:pointer}.drawer[_ngcontent-%COMP%]{position:fixed;top:0;right:-380px;width:360px;height:100vh;background:var(--color-bg);border-radius:16px 0 0 16px;box-shadow:-8px 0 24px #0000001f;transition:.3s;z-index:1000;overflow-y:auto;display:flex;flex-direction:column}input[id^=det-][_ngcontent-%COMP%]:checked ~ .drawer[_ngcontent-%COMP%]{right:0}.drawer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;border-bottom:1px solid var(--color-border);background:var(--color-bg-alt)}.drawer-body[_ngcontent-%COMP%]{padding:16px;font-size:14px}.drawer-acciones[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.btn-aceptar[_ngcontent-%COMP%], .btn-rechazar[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:10px;border:none;font-size:13px;font-weight:600;cursor:pointer}.btn-aceptar[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.btn-aceptar[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.btn-rechazar[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.btn-rechazar[_ngcontent-%COMP%]:hover{background:#fecaca}.mensaje-rechazada[_ngcontent-%COMP%]{font-size:13px;color:var(--color-estado-rechazado);background:#fee2e2;padding:10px 12px;border-radius:10px;text-align:center}.zoom[_ngcontent-%COMP%]{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000}input[id^=img-][_ngcontent-%COMP%]:checked ~ .zoom[_ngcontent-%COMP%]{display:flex}.zoom-bg[_ngcontent-%COMP%]{position:absolute;inset:0;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:rgba(0,0,0,.35);z-index:1}.zoom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:12px;position:relative;z-index:2;animation:_ngcontent-%COMP%_zoomIn .2s ease-out}.zoom-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:26px;color:#fff;cursor:pointer;z-index:3}@keyframes _ngcontent-%COMP%_zoomIn{0%{transform:scale(.96);opacity:0}to{transform:scale(1);opacity:1}}@media (max-width: 768px){.organizar-header[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-secundario[_ngcontent-%COMP%]{width:100%}.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:1fr}.img-box[_ngcontent-%COMP%]{width:100%;height:220px}}"]})}}return n})();function lt(n,i){if(1&n&&t.nrm(0,"img",30),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.imagen,t.B4B)}}function pt(n,i){1&n&&(t.j41(0,"div",31),t.EFF(1,"Sin imagen"),t.k0s())}function gt(n,i){if(1&n&&(t.j41(0,"p")(1,"b"),t.EFF(2,"Observaciones:"),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.SpI(" ",e.observaciones," ")}}function ut(n,i){if(1&n&&(t.j41(0,"div",8),t.nrm(1,"input",9),t.j41(2,"label",10)(3,"span",11),t.EFF(4),t.k0s(),t.DNE(5,lt,1,1,"img",12),t.DNE(6,pt,2,0,"ng-template",null,13,t.C5r),t.k0s(),t.j41(8,"div",14)(9,"h3",15),t.EFF(10),t.k0s(),t.j41(11,"div",16)(12,"span",17),t.EFF(13),t.k0s(),t.j41(14,"span",18),t.EFF(15,"ACEPTADA"),t.k0s()(),t.j41(16,"p",19),t.EFF(17," Subastador: "),t.j41(18,"b"),t.EFF(19),t.k0s()()(),t.j41(20,"div",20),t.nrm(21,"input",9),t.j41(22,"label",21),t.EFF(23," Ver detalle "),t.k0s(),t.j41(24,"div",22)(25,"div",23)(26,"h3"),t.EFF(27),t.k0s(),t.j41(28,"label",24),t.EFF(29,"\xd7"),t.k0s()(),t.j41(30,"div",25)(31,"p")(32,"b"),t.EFF(33,"N\xb0 Subasta:"),t.k0s(),t.EFF(34),t.k0s(),t.j41(35,"p")(36,"b"),t.EFF(37,"Fecha:"),t.k0s(),t.EFF(38),t.nI1(39,"date"),t.k0s(),t.j41(40,"p")(41,"b"),t.EFF(42,"Hora:"),t.k0s(),t.EFF(43),t.k0s(),t.j41(44,"p")(45,"b"),t.EFF(46,"Duraci\xf3n:"),t.k0s(),t.EFF(47),t.k0s(),t.j41(48,"p")(49,"b"),t.EFF(50,"Descanso:"),t.k0s(),t.EFF(51),t.k0s(),t.nrm(52,"hr"),t.j41(53,"p")(54,"b"),t.EFF(55,"Contacto:"),t.k0s(),t.EFF(56),t.k0s(),t.j41(57,"p")(58,"b"),t.EFF(59,"Ciudad:"),t.k0s(),t.EFF(60),t.k0s(),t.j41(61,"p")(62,"b"),t.EFF(63,"Tel\xe9fono:"),t.k0s(),t.EFF(64),t.k0s(),t.DNE(65,gt,4,1,"p",26),t.k0s()()(),t.j41(66,"div",27),t.nrm(67,"div",28),t.j41(68,"label",29),t.EFF(69,"\xd7"),t.k0s(),t.nrm(70,"img",30),t.k0s()()),2&n){const e=i.$implicit,o=t.sdS(7);t.R7$(1),t.Mz_("id","img-",e.id,""),t.R7$(1),t.Mz_("for","img-",e.id,""),t.R7$(2),t.SpI("#",e.numeroSubasta||"-",""),t.R7$(1),t.Y8G("ngIf",e.imagen)("ngIfElse",o),t.R7$(5),t.JRh(e.planta),t.R7$(3),t.SpI("S/ ",e.precioBase,""),t.R7$(6),t.JRh(e.username),t.R7$(2),t.Mz_("id","det-",e.id,""),t.R7$(1),t.Mz_("for","det-",e.id,""),t.R7$(5),t.JRh(e.planta),t.R7$(1),t.Mz_("for","det-",e.id,""),t.R7$(6),t.SpI(" ",e.numeroSubasta||"-",""),t.R7$(4),t.SpI(" ",t.i5U(39,24,e.fechaEvento,"dd/MM/yyyy"),""),t.R7$(5),t.Lme(" ",e.horaInicioAsignada||"-"," - ",e.horaFinAsignada||"-",""),t.R7$(4),t.SpI(" ",e.duracionSubastaMinutos," min"),t.R7$(4),t.SpI(" ",e.descansoMinutos," min"),t.R7$(5),t.SpI(" ",e.username,""),t.R7$(4),t.SpI(" ",e.city,""),t.R7$(4),t.SpI(" ",e.phone,""),t.R7$(1),t.Y8G("ngIf",e.observaciones),t.R7$(3),t.Mz_("for","img-",e.id,""),t.R7$(2),t.Y8G("src",e.imagen,t.B4B)}}function bt(n,i){1&n&&(t.j41(0,"p",32),t.EFF(1," No hay subastas aceptadas. "),t.k0s())}let mt=(()=>{class n{constructor(e,o,a){this.adminService=e,this.router=o,this.route=a,this.subastas=[],this.generando=!1}ngOnInit(){this.eventoId=Number(this.route.snapshot.paramMap.get("idEvento")),this.cargarSubastasAceptadas()}cargarSubastasAceptadas(){this.adminService.listarSubastasAceptadas().subscribe(e=>{this.subastas=e.filter(o=>o.eventoId===this.eventoId)})}Generar(){this.generando||(this.generando=!0,this.adminService.organizarSubastas(this.eventoId).subscribe({next:()=>{this.cargarSubastasAceptadas(),this.generando=!1},error:()=>{this.generando=!1}}))}volver(){this.router.navigate(["/components/eventos"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(E),t.rXU(p.Ix),t.rXU(p.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-subastas-aceptadas"]],decls:13,vars:2,consts:[[1,"organizar-container"],[1,"organizar-header"],[1,"header-left"],[1,"evento-id"],[1,"btn-secundario",3,"click"],[1,"lista-subastas"],["class","fila-subasta",4,"ngFor","ngForOf"],["class","sin-datos",4,"ngIf"],[1,"fila-subasta"],["type","checkbox","hidden","",3,"id"],[1,"img-box",3,"for"],[1,"badge-numero"],[3,"src",4,"ngIf","ngIfElse"],["noImg",""],[1,"info"],[1,"planta"],[1,"precio-row"],[1,"precio"],[1,"estado","estado-aceptado"],[1,"sub"],[1,"acciones"],[1,"btn-detalle","primary",3,"for"],[1,"drawer"],[1,"drawer-header"],[3,"for"],[1,"drawer-body"],[4,"ngIf"],[1,"zoom"],[1,"zoom-bg"],[1,"zoom-close",3,"for"],[3,"src"],[1,"img-empty"],[1,"sin-datos"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2),t.nrm(3,"app-volver"),t.j41(4,"h2"),t.EFF(5,"Subastas Aceptadas"),t.k0s(),t.j41(6,"span",3),t.EFF(7,"Listado general"),t.k0s()(),t.j41(8,"button",4),t.bIt("click",function(){return a.Generar()}),t.EFF(9," Generar subastas "),t.k0s()(),t.j41(10,"div",5),t.DNE(11,ut,71,27,"div",6),t.DNE(12,bt,2,0,"p",7),t.k0s()()),2&o&&(t.R7$(11),t.Y8G("ngForOf",a.subastas),t.R7$(1),t.Y8G("ngIf",!a.subastas.length))},dependencies:[s.Sq,s.bT,m,s.vh],styles:[".organizar-container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;font-family:Roboto,Helvetica Neue,sans-serif}.organizar-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:50;display:grid;grid-template-columns:1fr auto;gap:16px;padding:18px 20px;margin-bottom:24px;background:var(--color-bg);border-bottom:1px solid var(--color-border)}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.organizar-header[_ngcontent-%COMP%]   .evento-id[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.btn-volver[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:6px 14px;border-radius:999px;background:var(--color-bg-alt);border:1px solid var(--color-border);color:var(--color-title);cursor:pointer;font-size:13px}.btn-secundario[_ngcontent-%COMP%]{align-self:center;padding:10px 18px;border-radius:12px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px #0000001f}.btn-secundario[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.lista-subastas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.fila-subasta[_ngcontent-%COMP%]{display:grid;grid-template-columns:200px 1fr auto;gap:18px;background:var(--color-bg);padding:18px;border-radius:18px;border:1px solid var(--color-border);align-items:center}.img-box[_ngcontent-%COMP%]{width:200px;height:140px;border-radius:14px;overflow:hidden;cursor:zoom-in;border:1px solid var(--color-border)}.img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.img-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:13px;color:var(--color-text-muted)}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:17px;color:var(--color-title)}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:13px;margin:6px 0}.precio[_ngcontent-%COMP%]{font-weight:600}.sub[_ngcontent-%COMP%]{font-size:12px;color:var(--color-text-muted)}.estado[_ngcontent-%COMP%]{font-weight:600;padding:4px 10px;border-radius:999px;font-size:12px}.estado-pendiente[_ngcontent-%COMP%]{background:var(--color-estado-pendiente);color:#92400e}.estado-aceptado[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado-rechazado[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.acciones[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-detalle[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);color:var(--color-primary);padding:8px 16px;border-radius:999px;font-size:13px;cursor:pointer}.drawer[_ngcontent-%COMP%]{position:fixed;top:0;right:-380px;width:360px;height:100vh;background:var(--color-bg);border-radius:16px 0 0 16px;box-shadow:-8px 0 24px #0000001f;transition:.3s;z-index:1000;overflow-y:auto;display:flex;flex-direction:column}input[id^=det-][_ngcontent-%COMP%]:checked ~ .drawer[_ngcontent-%COMP%]{right:0}.drawer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;border-bottom:1px solid var(--color-border);background:var(--color-bg-alt)}.drawer-body[_ngcontent-%COMP%]{padding:16px;font-size:14px}.drawer-acciones[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.btn-aceptar[_ngcontent-%COMP%], .btn-rechazar[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:10px;border:none;font-size:13px;font-weight:600;cursor:pointer}.btn-aceptar[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.btn-aceptar[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.btn-rechazar[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.btn-rechazar[_ngcontent-%COMP%]:hover{background:#fecaca}.zoom[_ngcontent-%COMP%]{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000}input[id^=img-][_ngcontent-%COMP%]:checked ~ .zoom[_ngcontent-%COMP%]{display:flex}.zoom-bg[_ngcontent-%COMP%]{position:absolute;inset:0;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:rgba(0,0,0,.35);z-index:1}.zoom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:12px;position:relative;z-index:2;animation:_ngcontent-%COMP%_zoomIn .2s ease-out}.zoom-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:26px;color:#fff;cursor:pointer;z-index:3}@keyframes _ngcontent-%COMP%_zoomIn{0%{transform:scale(.96);opacity:0}to{transform:scale(1);opacity:1}}.badge-numero[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;background:var(--color-bg);border:1px solid var(--color-border);padding:4px 10px;border-radius:999px;font-size:12px;font-weight:600;z-index:2}.img-box[_ngcontent-%COMP%]{position:relative}.planta[_ngcontent-%COMP%]{font-size:18px;margin:0}.precio-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:6px 0 8px}.precio[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--color-primary)}.btn-detalle.primary[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:10px 18px}.btn-detalle.primary[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}@media (max-width: 768px){.organizar-header[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-secundario[_ngcontent-%COMP%]{width:100%}.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:1fr}.img-box[_ngcontent-%COMP%]{width:100%;height:220px}}"]})}}return n})();class ht{constructor(){this.id=0,this.username="",this.password="",this.roles=[],this.name="",this.lastName="",this.phone="",this.city="",this.email="",this.enabled=!0}}const ft=h.c.base;let y=(()=>{class n{constructor(e){this.http=e,this.url=`${ft}/mydata`,this.userChange=new _.B}getMyData(){let e=sessionStorage.getItem("token");return this.http.get(this.url,{headers:(new g.Lr).set("Authorization",`Bearer ${e}`).set("Content-Type","application/json")}).pipe((0,v.W)(this.handleError))}setUserChange(e){this.userChange.next(e)}getUserChange(){return this.userChange.asObservable()}handleError(e){let o="Ocurri\xf3 un error desconocido";return 401===e.status?o="No autorizado":404===e.status&&(o="Usuario no encontrado"),(0,x.$)(()=>o)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _t=l(3489);function vt(n,i){if(1&n&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.error)}}function xt(n,i){if(1&n&&(t.j41(0,"span",17),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.R7$(1),t.JRh(e)}}function Ct(n,i){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"div",13),t.EFF(3,"Tel\xe9fono"),t.k0s(),t.j41(4,"div",14),t.EFF(5),t.k0s()(),t.j41(6,"div",12)(7,"div",13),t.EFF(8,"Ciudad"),t.k0s(),t.j41(9,"div",14),t.EFF(10),t.k0s()(),t.j41(11,"div",15)(12,"div",13),t.EFF(13,"Roles"),t.k0s(),t.j41(14,"div",14),t.DNE(15,xt,2,1,"span",16),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(5),t.JRh(e.user.phone),t.R7$(5),t.JRh(e.user.city),t.R7$(5),t.Y8G("ngForOf",e.user.roles)}}function Mt(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.EFF(3),t.k0s(),t.j41(4,"div",5)(5,"h2"),t.EFF(6),t.k0s(),t.j41(7,"p",6),t.EFF(8),t.k0s()(),t.j41(9,"button",7),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.logout())}),t.EFF(10,"Cerrar sesi\xf3n"),t.k0s()(),t.DNE(11,vt,2,1,"div",8),t.DNE(12,Ct,16,3,"div",9),t.k0s()}if(2&n){const e=t.XpG();t.R7$(3),t.Lme("",e.user.name.charAt(0),"",e.user.lastName.charAt(0),""),t.R7$(3),t.Lme("",e.user.name," ",e.user.lastName,""),t.R7$(2),t.JRh(e.user.username),t.R7$(3),t.Y8G("ngIf",e.error),t.R7$(1),t.Y8G("ngIf",!e.error)}}function Ot(n,i){1&n&&(t.j41(0,"p",18),t.EFF(1,"Cargando informaci\xf3n..."),t.k0s())}let Pt=(()=>{class n{constructor(e,o,a){this.mydataService=e,this.router=o,this.loginService=a,this.user=new ht,this.loading=!0,this.error=""}ngOnInit(){this.loadUserData()}loadUserData(){this.loading=!0,this.mydataService.getMyData().subscribe({next:e=>{this.user=e,this.loading=!1},error:e=>{this.error=e,this.loading=!1}})}logout(){sessionStorage.removeItem("token"),this.router.navigate(["/login"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(y),t.rXU(p.Ix),t.rXU(_t.H))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-my-data"]],decls:4,vars:2,consts:[["class","dashboard-panel",4,"ngIf","ngIfElse"],["loadingTpl",""],[1,"dashboard-panel"],[1,"profile-top"],[1,"avatar"],[1,"profile-info"],[1,"username"],[1,"btn-logout",3,"click"],["class","error",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"error"],[1,"profile-content"],[1,"content-row"],[1,"content-label"],[1,"content-value"],[1,"content-row","roles-row"],["class","role-pill",4,"ngFor","ngForOf"],[1,"role-pill"],[1,"loading"]],template:function(o,a){if(1&o&&(t.nrm(0,"app-volver"),t.DNE(1,Mt,13,7,"div",0),t.DNE(2,Ot,2,0,"ng-template",null,1,t.C5r)),2&o){const r=t.sdS(3);t.R7$(1),t.Y8G("ngIf",!a.loading)("ngIfElse",r)}},dependencies:[s.Sq,s.bT,m],styles:[".dashboard-panel[_ngcontent-%COMP%]{max-width:700px;margin:50px auto;padding:35px 40px;background-color:var(--color-bg);border-left:6px solid var(--color-primary);border-radius:12px;box-shadow:0 12px 25px #00000014}.profile-top[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.avatar[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;background-color:var(--color-primary);color:var(--color-bg);font-weight:700;font-size:2rem;display:flex;align-items:center;justify-content:center;margin-right:25px}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--color-title)}.profile-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-subtitle);margin-top:5px}.profile-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;border-top:1px solid var(--color-border);padding-top:20px}.content-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--color-border)}.content-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary);flex:1}.content-value[_ngcontent-%COMP%]{flex:2;text-align:right;color:var(--color-text)}.roles-row[_ngcontent-%COMP%]   .role-pill[_ngcontent-%COMP%]{display:inline-block;background-color:var(--color-success);color:var(--color-primary);padding:6px 14px;margin-right:6px;margin-top:4px;border-radius:20px;font-size:.9rem}.loading[_ngcontent-%COMP%]{text-align:center;font-size:1.1rem;color:var(--color-primary)}.error[_ngcontent-%COMP%]{text-align:center;color:var(--color-btn-danger);font-weight:700;margin-bottom:15px}.btn-logout[_ngcontent-%COMP%]{margin-left:auto;padding:8px 14px;background-color:var(--color-btn-danger);color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:700;transition:.2s}.btn-logout[_ngcontent-%COMP%]:hover{background-color:#8b0000}@media (max-width: 900px){.dashboard-panel[_ngcontent-%COMP%]{padding:30px 20px}.profile-top[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;font-size:1.8rem;margin-right:0}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.content-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;text-align:left;padding:10px 0}.content-value[_ngcontent-%COMP%]{text-align:left;margin-top:4px}.roles-row[_ngcontent-%COMP%]   .role-pill[_ngcontent-%COMP%]{font-size:.85rem;padding:5px 12px;margin-right:4px;margin-top:4px}.btn-logout[_ngcontent-%COMP%]{width:100%;text-align:center;margin-left:0}}@media (max-width: 480px){.dashboard-panel[_ngcontent-%COMP%]{padding:20px 15px}.avatar[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.4rem}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.content-label[_ngcontent-%COMP%], .content-value[_ngcontent-%COMP%]{font-size:.9rem}.roles-row[_ngcontent-%COMP%]   .role-pill[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 10px}}"]})}}return n})();function kt(n,i){if(1&n&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ","ABIERTO"===e.eventoActivo.estado?"Evento disponible":"Evento cerrado"," ")}}function Ft(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.go("/components/subastas"))}),t.EFF(1," Crear subasta "),t.k0s()}}function Et(n,i){if(1&n){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.goOrganizarEvento())}),t.EFF(1," Administrar eventos "),t.k0s()}}function yt(n,i){if(1&n&&(t.j41(0,"div",21)(1,"span"),t.EFF(2,"Evento"),t.k0s(),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.j41(5,"small"),t.EFF(6),t.nI1(7,"date"),t.k0s()()),2&n){const e=t.XpG();t.R7$(4),t.JRh(e.eventoActivo.nombre),t.R7$(2),t.Lme("",t.i5U(7,3,e.eventoActivo.fechaEvento,"dd/MM/yyyy")," - ",e.eventoActivo.horaInicio,"")}}function jt(n,i){if(1&n&&(t.j41(0,"div",22)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.j41(5,"small"),t.EFF(6),t.k0s()()),2&n){const e=t.XpG();t.R7$(2),t.JRh(e.tituloTiempo),t.R7$(2),t.JRh(e.tiempoRestante),t.R7$(2),t.SpI(" Duraci\xf3n por subasta: ",e.eventoActivo.duracionSubastaMinutos," minutos ")}}function wt(n,i){1&n&&(t.j41(0,"div",23)(1,"strong"),t.EFF(2,"Subastas en revisi\xf3n"),t.k0s(),t.j41(3,"p"),t.EFF(4," A\xfan hay subastas pendientes de evaluaci\xf3n. "),t.k0s()())}function It(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"strong"),t.EFF(2,"Subastas revisadas"),t.k0s(),t.j41(3,"p"),t.EFF(4," Todas tus subastas ya fueron evaluadas. "),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.go("/components/ver-subastas"))}),t.EFF(6," Ver mis subastas "),t.k0s()()}}let zt=(()=>{class n{constructor(e,o,a,r){this.mydata=e,this.eventoService=o,this.subastaService=a,this.router=r,this.subastas=[],this.totalSubastas=0,this.subastasPendientes=0,this.subastasAceptadas=0,this.subastasRechazadas=0,this.eventoActivo=null,this.tiempoRestante="",this.tituloTiempo=""}ngOnInit(){this.mydata.getMyData().subscribe(e=>this.user=e),this.eventoService.list().subscribe(e=>{if(this.eventoActivo=e.find(a=>"ABIERTO"===a.estado)||null,!this.eventoActivo)return;const o=this.buildFechaHora(this.eventoActivo.fechaEvento,this.eventoActivo.horaInicio);this.iniciarContador(o),this.cargarSubastas(this.eventoActivo.id)})}ngOnDestroy(){this.timer&&clearInterval(this.timer)}go(e){this.router.navigate([e])}cargarSubastas(e){this.subastaService.listMisSubastas().subscribe(o=>{const a=o.filter(r=>r.eventoId===e);this.subastas=a,this.subastasPendientes=a.filter(r=>"PENDIENTE"===r.estado).length,this.subastasAceptadas=a.filter(r=>"ACEPTADA"===r.estado).length,this.subastasRechazadas=a.filter(r=>"RECHAZADA"===r.estado).length})}buildFechaHora(e,o){const[a,r,c]=e.toString().split("-").map(Number),[M,Dt]=o.split(":").map(Number);return new Date(a,r-1,c,M,Dt,0)}iniciarContador(e){const o=()=>{if("CERRADO"===this.eventoActivo?.estado)return this.tituloTiempo="Estado del evento",this.tiempoRestante="Evento cerrado",void clearInterval(this.timer);const a=e.getTime()-Date.now();if(a<=0)return this.tituloTiempo="Estado del evento",this.tiempoRestante="Evento en curso",void clearInterval(this.timer);this.tituloTiempo="Inicio del evento en";const r=Math.floor(a/36e5),c=Math.floor(a%36e5/6e4),M=Math.floor(a%6e4/1e3);this.tiempoRestante=`${r}h ${c}m ${M}s`};o(),this.timer=setInterval(o,1e3)}isAdmin(){return this.user?.roles?.includes("ADMIN")}goOrganizarEvento(){this.router.navigate(["/components/eventos"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(y),t.rXU(C),t.rXU(f),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-dashboard"]],decls:40,vars:13,consts:[[1,"dashboard"],[1,"topbar"],[1,"topbar-left"],["class","subtitle",4,"ngIf"],[1,"top-actions"],[1,"btn-secondary",3,"click"],["class","btn-primary",3,"click",4,"ngIf"],["class","btn-evento",3,"click",4,"ngIf"],[1,"profile-icon",3,"click"],[1,"grid"],[1,"block"],[1,"block","success"],[1,"block","warning"],[1,"block","danger"],["class","block wide info",4,"ngIf"],["class","block wide timer",4,"ngIf"],["class","block wide neutral",4,"ngIf"],["class","block wide action",4,"ngIf"],[1,"subtitle"],[1,"btn-primary",3,"click"],[1,"btn-evento",3,"click"],[1,"block","wide","info"],[1,"block","wide","timer"],[1,"block","wide","neutral"],[1,"block","wide","action"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4),t.k0s(),t.DNE(5,kt,2,1,"p",3),t.k0s(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return a.go("/components/ver-subastas")}),t.EFF(8," Mis subastas "),t.k0s(),t.DNE(9,Ft,2,0,"button",6),t.DNE(10,Et,2,0,"button",7),t.j41(11,"div",8),t.bIt("click",function(){return a.go("/components/perfil")}),t.EFF(12),t.k0s()()(),t.j41(13,"div",9)(14,"div",10)(15,"span"),t.EFF(16,"Total enviadas"),t.k0s(),t.j41(17,"strong"),t.EFF(18),t.k0s(),t.j41(19,"small"),t.EFF(20,"Esta semana"),t.k0s()(),t.j41(21,"div",11)(22,"span"),t.EFF(23,"Aceptadas"),t.k0s(),t.j41(24,"strong"),t.EFF(25),t.k0s()(),t.j41(26,"div",12)(27,"span"),t.EFF(28,"Pendientes"),t.k0s(),t.j41(29,"strong"),t.EFF(30),t.k0s()(),t.j41(31,"div",13)(32,"span"),t.EFF(33,"Rechazadas"),t.k0s(),t.j41(34,"strong"),t.EFF(35),t.k0s()(),t.DNE(36,yt,8,6,"div",14),t.DNE(37,jt,7,3,"div",15),t.DNE(38,wt,5,0,"div",16),t.DNE(39,It,7,0,"div",17),t.k0s()()),2&o&&(t.R7$(4),t.SpI("Hola, ",null==a.user?null:a.user.name,""),t.R7$(1),t.Y8G("ngIf",a.eventoActivo),t.R7$(4),t.Y8G("ngIf","ABIERTO"===(null==a.eventoActivo?null:a.eventoActivo.estado)),t.R7$(1),t.Y8G("ngIf",a.isAdmin()),t.R7$(2),t.SpI(" ",null==a.user||null==a.user.name?null:a.user.name.charAt(0)," "),t.R7$(6),t.JRh(a.subastas.length),t.R7$(7),t.JRh(a.subastasAceptadas),t.R7$(5),t.JRh(a.subastasPendientes),t.R7$(5),t.JRh(a.subastasRechazadas),t.R7$(1),t.Y8G("ngIf",a.eventoActivo),t.R7$(1),t.Y8G("ngIf",a.eventoActivo),t.R7$(1),t.Y8G("ngIf",a.subastasPendientes>0),t.R7$(1),t.Y8G("ngIf",0===a.subastasPendientes&&a.subastas.length>0))},dependencies:[s.bT,s.vh],styles:[".dashboard[_ngcontent-%COMP%]{max-width:1280px;margin:auto;padding:32px;box-sizing:border-box}.topbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;flex-wrap:wrap}.topbar-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;color:var(--color-title)}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--color-subtitle)}.top-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.profile-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:var(--color-btn-primary);color:#fff;font-size:18px;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:22px}.block[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:18px;padding:22px;display:flex;flex-direction:column;gap:6px}.block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--color-subtitle)}.block[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:32px;font-weight:600;color:var(--color-title)}.block[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px;color:var(--color-subtitle)}.block.wide[_ngcontent-%COMP%]{grid-column:span 2}.block.success[_ngcontent-%COMP%]{background:var(--color-estado-aceptado)}.block.warning[_ngcontent-%COMP%]{background:#fffbeb}.block.danger[_ngcontent-%COMP%]{background:#fef2f2}.block.neutral[_ngcontent-%COMP%]{background:var(--color-bg-alt)}.block.action[_ngcontent-%COMP%]{background:var(--color-success)}.block.timer[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-bg-alt),#eefdf7)}.block.timer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:26px}.block.action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .block.neutral[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:14px;color:var(--color-text-muted)}.btn-primary[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:12px 20px;border-radius:12px;font-size:14px;cursor:pointer}.btn-evento[_ngcontent-%COMP%]{background:var(--color-btn-secondary);color:var(--color-btn-primary);border:2px solid var(--color-btn-primary);padding:12px 20px;border-radius:12px;font-size:14px;cursor:pointer;transition:all .2s ease}.btn-evento[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary);color:var(--color-btn-secondary)}.btn-secondary[_ngcontent-%COMP%]{background:var(--color-btn-secondary);color:var(--color-text);border:1px solid var(--color-border);padding:12px 18px;border-radius:12px;font-size:14px;cursor:pointer}@media (max-width: 1024px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.block.wide[_ngcontent-%COMP%]{grid-column:span 3}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 900px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.block.wide[_ngcontent-%COMP%]{grid-column:span 2}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 520px){.topbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.block.wide[_ngcontent-%COMP%]{grid-column:span 1}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.subtitle[_ngcontent-%COMP%]{font-size:12px}.block[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:24px}.block.timer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px}}"]})}}return n})();var b=l(3873);const Rt=[{path:"",component:j.B},{path:"no-autorizado",component:(()=>{class n{constructor(e){this.router=e}volverHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-sin-acceso"]],decls:7,vars:0,consts:[[1,"sin-acceso-container"],[3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"\u{1f615} Parece que te perdiste"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No tienes permisos para acceder a esta p\xe1gina."),t.k0s(),t.j41(5,"button",1),t.bIt("click",function(){return a.volverHome()}),t.EFF(6,"Volver al inicio"),t.k0s()())},styles:[".sin-acceso-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;text-align:center;padding:20px;color:var(--color-title)}.sin-acceso-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:15px}.sin-acceso-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;color:var(--color-subtitle)}.sin-acceso-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:var(--color-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:.2s}.sin-acceso-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00008b}"]})}}return n})()},{path:"eventos",component:D,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"subastas",component:F,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"subastas/:id",component:F,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"ver-subastas",component:J,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"detalles",component:W,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"organizar-subastas/:idEvento",component:dt,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"subastas-aceptadas/:idEvento",component:mt,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"perfil",component:Pt,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"dashboard",component:zt,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}}];let $t=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(Rt),p.iI]})}}return n})(),At=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[s.MD,$t,u.YN]})}}return n})()}}]);