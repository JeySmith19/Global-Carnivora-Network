<div class="container">
  <div class="subastas-header">
    <h2>Tus Subastas</h2>
    <button class="btn-crear" (click)="crearSubasta()">Crear Subasta</button>
  </div>

  <div class="cards-grid">
    <div *ngFor="let s of subastas" class="card">

      <div class="card-image-wrapper">
        <img
          *ngIf="s.imagen && s.imagen !== '' ; else sinImagen"
          [src]="s.imagen"
          class="card-image"
          alt="Imagen subasta"
        />

        <ng-template #sinImagen>
          <div class="sin-imagen">Sin imagen</div>
        </ng-template>

        <div
          class="estado-etiqueta"
          [ngClass]="(s.estado || 'pendiente').toLowerCase()">
          {{ s.estado }}
        </div>
      </div>

      <div class="card-body">
        <h3>Subasta #{{ s.id }}</h3>

        <div class="card-info">
          <p *ngIf="s.fechaEvento">
            Fecha: {{ s.fechaEvento | date:'dd/MM/yyyy' }}
          </p>
          <p *ngIf="s.duracionSubastaMinutos">
            Duraci√≥n: {{ s.duracionSubastaMinutos }} min
          </p>
        </div>

        <div class="card-details">
          <p *ngIf="s.username"><strong>Subastador:</strong> {{ s.username }}</p>
          <p *ngIf="s.phone"><strong>Contacto:</strong> {{ s.phone }}</p>
          <p *ngIf="s.city"><strong>Procedencia:</strong> {{ s.city }}</p>

          <p><strong>Planta:</strong> {{ s.planta }}</p>
          <p><strong>Maceta:</strong> {{ s.maceta }}</p>
          <p><strong>Precio base:</strong> S/ {{ s.precioBase }}</p>

          <p *ngIf="s.observaciones">
            <strong>Observaciones:</strong> {{ s.observaciones }}
          </p>
        </div>
      </div>

      <div class="card-footer">
        <button class="btn-editar" (click)="editar(s)">Editar</button>
        <button class="btn-eliminar" (click)="eliminar(s.id)">Eliminar</button>
      </div>

    </div>
  </div>
</div>
