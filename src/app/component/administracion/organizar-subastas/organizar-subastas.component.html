<div class="organizar-container">

  <header class="organizar-header">
    <h2>Subastas del Evento</h2>
    <span class="evento-id">Evento #{{ idEvento }}</span>
  </header>

  <div class="grid-subastas">

    <p class="sin-datos" *ngIf="!subastas?.length">
      No hay subastas registradas para este evento.
    </p>

    <div class="subasta-card" *ngFor="let s of subastas">

      <div class="card-main">
        <div class="card-image">
          <img *ngIf="s.imagen; else sinImagen" [src]="s.imagen" />
          <ng-template #sinImagen>
            <div class="sin-imagen">Sin imagen</div>
          </ng-template>
        </div>

        <div class="card-info">
          <h3>{{ s.planta }}</h3>
          <span class="estado-chip">{{ s.estado }}</span>
          <p class="precio">S/ {{ s.precioBase }}</p>
        </div>
      </div>

      <input type="checkbox" id="panel-{{s.id}}" hidden />

      <label class="btn-ver" for="panel-{{s.id}}">
        Ver detalles
      </label>

      <div class="side-panel">

        <div class="panel-header">
          <h3>Detalle de la subasta</h3>
          <label for="panel-{{s.id}}" class="cerrar">×</label>
        </div>

        <div class="panel-body">

          <p><strong>N° de subasta:</strong> {{ s.numeroSubasta || 'Lo define administración' }}</p>
          <p><strong>Evento:</strong> {{ s.eventoNombre }}</p>
          <p><strong>Fecha:</strong> {{ s.fechaEvento | date:'dd/MM/yyyy' }}</p>
          <p><strong>Hora inicio:</strong> {{ s.horaInicio }}</p>

          <hr />

          <p><strong>Inicio asignado:</strong> {{ s.horaInicioAsignada || '-' }}</p>
          <p><strong>Fin asignado:</strong> {{ s.horaFinAsignada || '-' }}</p>
          <p><strong>Duración:</strong> {{ s.duracionSubastaMinutos }} min</p>
          <p><strong>Descanso:</strong> {{ s.descansoMinutos }} min</p>

          <hr />

          <p><strong>Maceta:</strong> {{ s.maceta }}</p>
          <p><strong>Precio base:</strong> S/ {{ s.precioBase }}</p>

          <hr />

          <p><strong>Subastador:</strong> {{ s.username }}</p>
          <p><strong>Contacto:</strong> {{ s.phone }}</p>
          <p><strong>Ciudad:</strong> {{ s.city }}</p>

          <p *ngIf="s.observaciones"><strong>Observaciones:</strong> {{ s.observaciones }}</p>

        </div>
      </div>

    </div>

  </div>

  <div class="organizar-footer">
    <button class="btn-volver" (click)="volver()">Volver</button>
  </div>

</div>
