"use strict";(self.webpackChunkCarnivoraCommunity=self.webpackChunkCarnivoraCommunity||[]).push([[178],{6178:(hn,E,u)=>{u.r(E),u.d(E,{ComponentModule:()=>bn});var c=u(177),g=u(5908),z=u(8136);class k{constructor(){this.id=0,this.nombre="",this.fechaEvento=new Date,this.horaInicio="",this.duracionSubastaMinutos=10,this.descansoMinutos=0,this.estado=""}}var t=u(7705),l=u(1626),P=u(1413),v=u(9437),C=u(8810),x=u(5312);const R=x.c.base;let M=(()=>{class e{constructor(n){this.http=n,this.url=`${R}/eventos`,this.listaCambio=new P.B}list(){let n=sessionStorage.getItem("token");return this.http.get(this.url,{headers:(new l.Lr).set("Authorization",`Bearer ${n}`).set("Content-Type","application/json")})}insert(n){let o=sessionStorage.getItem("token");return this.http.post(this.url,n,{headers:(new l.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}listId(n){let o=sessionStorage.getItem("token");return this.http.get(`${this.url}/${n}`,{headers:(new l.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}updateEstado(n,o){let a=sessionStorage.getItem("token");return this.http.put(`${this.url}/${n}/estado/${o}`,{},{headers:(new l.Lr).set("Authorization",`Bearer ${a}`).set("Content-Type","application/json")})}update(n){let o=sessionStorage.getItem("token");return this.http.put(this.url,n,{headers:(new l.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}delete(n){let o=sessionStorage.getItem("token");return this.http.delete(`${this.url}/${n}`,{headers:(new l.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")}).pipe((0,v.W)(this.handleError.bind(this)))}setList(n){this.listaCambio.next(n)}getList(){return this.listaCambio.asObservable()}autoCerrar(n){let o=sessionStorage.getItem("token");return this.http.put(`${this.url}/${n}/auto-cerrar`,{},{headers:(new l.Lr).set("Authorization",`Bearer ${o}`).set("Content-Type","application/json")})}handleError(n){let o="Ocurri\xf3 un error desconocido";return(409===n.status||500===n.status)&&(o="No se puede eliminar: est\xe1 vinculado a otros registros"),(0,C.$)(o)}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const $=x.c.base;let F=(()=>{class e{constructor(n){this.http=n,this.url=`${$}`}getHeaders(){const n=sessionStorage.getItem("token");return(new l.Lr).set("Authorization",`Bearer ${n}`).set("Content-Type","application/json")}listarSubastasEvento(n){return this.http.get(`${this.url}/subastas/evento/${n}`,{headers:this.getHeaders()})}organizarSubastas(n){return this.http.post(`${this.url}/organizar-subastas/${n}`,{},{headers:this.getHeaders()})}decidirSubasta(n,o){return this.http.put(`${this.url}/subastas/${n}/decision/${o}`,{},{headers:this.getHeaders()})}listarSubastasAceptadas(){return this.http.get(`${this.url}/subastas/aceptadas`,{headers:this.getHeaders()})}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p=u(9417);let m=(()=>{class e{volver(){history.back()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-volver"]],decls:2,vars:0,consts:[["aria-label","Volver",1,"btn-volver",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"button",0),t.bIt("click",function(){return a.volver()}),t.EFF(1," \u276e\n"),t.k0s())},styles:[".btn-volver[_ngcontent-%COMP%]{position:fixed;top:16px;left:16px;z-index:1000;background:var(--color-bg);border:1px solid var(--color-border);border-radius:10px;min-width:42px;min-height:42px;display:flex;align-items:center;justify-content:center;color:var(--color-primary);font-size:1.6rem;font-weight:900;cursor:pointer;box-shadow:0 6px 14px #0000001f;transition:transform .15s,box-shadow .15s,background-color .2s}.btn-volver[_ngcontent-%COMP%]:hover{background:var(--color-bg-alt);box-shadow:0 8px 18px #00000029}.btn-volver[_ngcontent-%COMP%]:active{transform:scale(.94)}"]})}}return e})();function T(e,i){1&e&&(t.j41(0,"p",22),t.EFF(1," Ya existe un evento abierto. Debes cerrarlo para crear uno nuevo. "),t.k0s())}function A(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.cerrarManual(a.id))}),t.nrm(1,"i",42),t.k0s()}}function D(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"div",25)(3,"span",26),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"span",27),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"div",28)(10,"h3"),t.EFF(11),t.k0s(),t.j41(12,"p"),t.nrm(13,"i",29),t.EFF(14),t.k0s(),t.j41(15,"p")(16,"b"),t.EFF(17,"Subastas aceptadas:"),t.k0s(),t.EFF(18),t.k0s()()(),t.j41(19,"div",30)(20,"span",31),t.EFF(21),t.k0s(),t.j41(22,"div",32)(23,"button",33),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG();return s.seleccionar(r),t.Njj(s.toggleForm())}),t.nrm(24,"i",34),t.k0s(),t.DNE(25,A,2,0,"button",35),t.j41(26,"button",36),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.irAOrganizarSubastas(r.id))}),t.nrm(27,"i",37),t.k0s(),t.j41(28,"button",36),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG();return s.eventoPrediccion=r,t.Njj(s.showPrediccion=!0)}),t.nrm(29,"i",38),t.k0s(),t.j41(30,"button",39),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.eliminar(r.id))}),t.nrm(31,"i",40),t.k0s()()()()}if(2&e){const n=i.$implicit,o=t.XpG();t.R7$(4),t.JRh(t.i5U(5,14,n.fechaEvento,"dd")),t.R7$(3),t.JRh(t.i5U(8,17,n.fechaEvento,"MMM")),t.R7$(4),t.JRh(n.nombre),t.R7$(3),t.E5c(" ",o.formatearHora(n.horaInicio)," \u2022 ",n.duracionSubastaMinutos," min + ",n.descansoMinutos," min descanso "),t.R7$(4),t.SpI(" ",o.getTotalSubastas(n.id)," "),t.R7$(2),t.AVh("abierto","ABIERTO"===n.estado)("cerrado","CERRADO"===n.estado),t.R7$(1),t.SpI(" ",n.estado," "),t.R7$(4),t.Y8G("ngIf","ABIERTO"===n.estado),t.R7$(5),t.Y8G("disabled","ABIERTO"===n.estado)}}function N(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",43),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.toggleForm())}),t.k0s()}}function G(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.guardar())}),t.EFF(1,"Guardar evento"),t.k0s()}}function B(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.actualizar())}),t.EFF(1,"Actualizar evento"),t.k0s()}}function X(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",45)(1,"div",46),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.showPrediccion=!1)}),t.k0s(),t.j41(2,"div",47)(3,"h3"),t.EFF(4,"Predicci\xf3n del evento"),t.k0s(),t.j41(5,"p")(6,"b"),t.EFF(7,"Subastas aceptadas:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"b"),t.EFF(11,"Inicio:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"p")(14,"b"),t.EFF(15,"Fin estimado:"),t.k0s(),t.EFF(16),t.k0s(),t.j41(17,"button",44),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.showPrediccion=!1)}),t.EFF(18," Cerrar "),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(8),t.SpI(" ",n.getTotalSubastas(n.eventoPrediccion.id)," "),t.R7$(4),t.SpI(" ",n.formatearHora(n.eventoPrediccion.horaInicio)," "),t.R7$(4),t.SpI(" ",n.calcularHoraFin(n.eventoPrediccion)," ")}}let V=(()=>{class e{constructor(n,o,a){this.eventoService=n,this.adminService=o,this.router=a,this.evento=new k,this.eventos=[],this.editando=!1,this.showForm=!1,this.hayEventoAbierto=!1,this.showPrediccion=!1,this.subastasAceptadasPorEvento={}}ngOnInit(){this.listar()}listar(){this.eventoService.list().subscribe(n=>{this.eventos=n.sort((o,a)=>"ABIERTO"===o.estado&&"ABIERTO"!==a.estado?-1:"ABIERTO"!==o.estado&&"ABIERTO"===a.estado?1:0),this.hayEventoAbierto=this.eventos.some(o=>"ABIERTO"===o.estado),this.cargarSubastasAceptadas()})}cargarSubastasAceptadas(){this.adminService.listarSubastasAceptadas().subscribe(n=>{this.subastasAceptadasPorEvento={},n.forEach(o=>{if(null==o.eventoId)return;const a=o.eventoId;this.subastasAceptadasPorEvento[a]=(this.subastasAceptadasPorEvento[a]||0)+1})})}getTotalSubastas(n){return this.subastasAceptadasPorEvento[n]||0}guardar(){this.hayEventoAbierto||this.eventoService.insert(this.evento).subscribe(()=>{this.limpiar(),this.listar(),this.showForm=!1})}seleccionar(n){this.evento={...n},this.editando=!0}actualizar(){this.eventoService.update(this.evento).subscribe(()=>{this.limpiar(),this.listar(),this.showForm=!1})}eliminar(n){this.getTotalSubastas(n)>0?alert("No se puede borrar este evento porque existen subastas asociadas."):confirm("\xbfEst\xe1s seguro de eliminar este evento?")&&this.eventoService.delete(n).subscribe(()=>{this.listar()})}cerrarManual(n){confirm("\xbfEst\xe1s seguro de que quieres cerrar este evento?")&&this.eventoService.updateEstado(n,"CERRADO").subscribe(()=>{this.listar()})}irAOrganizarSubastas(n){this.router.navigate(["/components/organizar-subastas",n])}toggleForm(){this.hayEventoAbierto&&!this.editando||(this.showForm=!this.showForm,this.showForm||this.limpiar())}limpiar(){this.evento=new k,this.editando=!1}formatearHora(n){if(!n)return"-";const[o,a]=n.split(":").map(Number),r=new Date;return r.setHours(o,a,0,0),r.toLocaleTimeString("es-PE",{hour:"numeric",minute:"2-digit",hour12:!0})}calcularHoraFin(n){const o=this.getTotalSubastas(n.id);if(!o||!n.horaInicio)return"-";const[a,r]=n.horaInicio.split(":").map(Number),s=new Date;s.setHours(a,r,0,0);const h=o*n.duracionSubastaMinutos+(o-1)*n.descansoMinutos;return s.setMinutes(s.getMinutes()+h),s.toLocaleTimeString("es-PE",{hour:"numeric",minute:"2-digit",hour12:!0})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(M),t.rXU(F),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-evento"]],decls:48,vars:15,consts:[[1,"evento-page"],[1,"top-bar"],[1,"btn-new",3,"disabled","click"],[1,"fa-solid","fa-plus"],["class","warning",4,"ngIf"],[1,"lista-eventos"],["class","evento-row",4,"ngFor","ngForOf"],["class","drawer-overlay",3,"click",4,"ngIf"],[1,"drawer"],[1,"drawer-header"],[1,"close-btn",3,"click"],[1,"drawer-body"],[1,"form-section"],[3,"ngModel","ngModelChange"],[1,"form-grid"],["type","date",3,"ngModel","ngModelChange"],["type","time",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[1,"drawer-footer"],["class","btn-save",3,"click",4,"ngIf"],[1,"btn-cancel",3,"click"],["class","modal",4,"ngIf"],[1,"warning"],[1,"evento-row"],[1,"row-left"],[1,"fecha-badge"],[1,"dia"],[1,"mes"],[1,"evento-info"],[1,"fa-regular","fa-clock"],[1,"row-right"],[1,"estado-chip"],[1,"acciones"],[1,"icon-btn","edit",3,"click"],[1,"fa-solid","fa-pen"],["class","icon-btn lock",3,"click",4,"ngIf"],[1,"icon-btn","organize",3,"click"],[1,"fa-solid","fa-list"],[1,"fa-solid","fa-chart-line"],[1,"icon-btn","delete",3,"disabled","click"],[1,"fa-solid","fa-trash"],[1,"icon-btn","lock",3,"click"],[1,"fa-solid","fa-lock"],[1,"drawer-overlay",3,"click"],[1,"btn-save",3,"click"],[1,"modal"],[1,"modal-bg",3,"click"],[1,"modal-content"]],template:function(o,a){1&o&&(t.nrm(0,"app-volver"),t.j41(1,"div",0)(2,"div",1),t.nrm(3,"br"),t.j41(4,"h2"),t.EFF(5,"Eventos de Subasta"),t.k0s(),t.j41(6,"button",2),t.bIt("click",function(){return a.toggleForm()}),t.nrm(7,"i",3),t.EFF(8," Nuevo evento "),t.k0s()(),t.j41(9,"strong"),t.DNE(10,T,2,0,"p",4),t.k0s(),t.j41(11,"div",5),t.DNE(12,D,32,20,"div",6),t.k0s(),t.DNE(13,N,1,0,"div",7),t.j41(14,"div",8)(15,"div",9)(16,"h3"),t.EFF(17),t.k0s(),t.j41(18,"button",10),t.bIt("click",function(){return a.toggleForm()}),t.EFF(19,"\xd7"),t.k0s()(),t.j41(20,"div",11)(21,"div",12)(22,"label"),t.EFF(23,"Nombre del evento"),t.k0s(),t.j41(24,"input",13),t.bIt("ngModelChange",function(s){return a.evento.nombre=s}),t.k0s()(),t.j41(25,"div",14)(26,"div",12)(27,"label"),t.EFF(28,"Fecha del evento"),t.k0s(),t.j41(29,"input",15),t.bIt("ngModelChange",function(s){return a.evento.fechaEvento=s}),t.k0s()(),t.j41(30,"div",12)(31,"label"),t.EFF(32,"Hora de inicio"),t.k0s(),t.j41(33,"input",16),t.bIt("ngModelChange",function(s){return a.evento.horaInicio=s}),t.k0s()(),t.j41(34,"div",12)(35,"label"),t.EFF(36,"Duraci\xf3n por subasta"),t.k0s(),t.j41(37,"input",17),t.bIt("ngModelChange",function(s){return a.evento.duracionSubastaMinutos=s}),t.k0s()(),t.j41(38,"div",12)(39,"label"),t.EFF(40,"Descanso"),t.k0s(),t.j41(41,"input",17),t.bIt("ngModelChange",function(s){return a.evento.descansoMinutos=s}),t.k0s()()()(),t.j41(42,"div",18),t.DNE(43,G,2,0,"button",19),t.DNE(44,B,2,0,"button",19),t.j41(45,"button",20),t.bIt("click",function(){return a.toggleForm()}),t.EFF(46,"Cancelar"),t.k0s()()(),t.DNE(47,X,19,3,"div",21),t.k0s()),2&o&&(t.R7$(6),t.Y8G("disabled",a.hayEventoAbierto),t.R7$(4),t.Y8G("ngIf",a.hayEventoAbierto),t.R7$(2),t.Y8G("ngForOf",a.eventos),t.R7$(1),t.Y8G("ngIf",a.showForm),t.R7$(1),t.AVh("open",a.showForm),t.R7$(3),t.JRh(a.editando?"Editar evento":"Crear nuevo evento"),t.R7$(7),t.Y8G("ngModel",a.evento.nombre),t.R7$(5),t.Y8G("ngModel",a.evento.fechaEvento),t.R7$(4),t.Y8G("ngModel",a.evento.horaInicio),t.R7$(4),t.Y8G("ngModel",a.evento.duracionSubastaMinutos),t.R7$(4),t.Y8G("ngModel",a.evento.descansoMinutos),t.R7$(2),t.Y8G("ngIf",!a.editando),t.R7$(1),t.Y8G("ngIf",a.editando),t.R7$(3),t.Y8G("ngIf",a.showPrediccion))},dependencies:[c.Sq,c.bT,p.me,p.Q0,p.BC,p.vS,m,c.vh],styles:[".evento-page[_ngcontent-%COMP%]{padding:20px;font-family:Inter,Segoe UI,sans-serif;background:var(--color-bg-alt);min-height:100vh;color:var(--color-text)}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;background:var(--color-bg);padding:12px 16px;border-radius:14px;box-shadow:0 4px 8px #0000000f}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:20px}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:12px 18px;border-radius:12px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.evento-page[_ngcontent-%COMP%]   .lista-eventos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.evento-page[_ngcontent-%COMP%]   .evento-row[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:16px;padding:16px;display:flex;justify-content:space-between;gap:14px;box-shadow:0 4px 10px #0000000d}.evento-page[_ngcontent-%COMP%]   .row-left[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:center}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]{background:var(--color-success);color:var(--color-primary);border-radius:12px;padding:8px 12px;min-width:56px;text-align:center}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .dia[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.evento-page[_ngcontent-%COMP%]   .fecha-badge[_ngcontent-%COMP%]   .mes[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.evento-page[_ngcontent-%COMP%]   .evento-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:var(--color-text-muted)}.evento-page[_ngcontent-%COMP%]   .row-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.evento-page[_ngcontent-%COMP%]   .estado-chip[_ngcontent-%COMP%]{padding:6px 12px;border-radius:999px;font-size:12px;font-weight:600}.evento-page[_ngcontent-%COMP%]   .estado-chip.abierto[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.evento-page[_ngcontent-%COMP%]   .estado-chip.cerrado[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.evento-page[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{display:flex;gap:10px}.evento-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px;border:none;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:16px;cursor:pointer}.evento-page[_ngcontent-%COMP%]   .icon-btn.edit[_ngcontent-%COMP%]{background:#fef9c3}.evento-page[_ngcontent-%COMP%]   .icon-btn.lock[_ngcontent-%COMP%]{background:#fde68a}.evento-page[_ngcontent-%COMP%]   .icon-btn.organize[_ngcontent-%COMP%]{background:#e0e7ff}.evento-page[_ngcontent-%COMP%]   .icon-btn.delete[_ngcontent-%COMP%]{background:#fecaca}.evento-page[_ngcontent-%COMP%]   .drawer-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:900}.evento-page[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:92%;max-width:460px;background:var(--color-bg);border-radius:22px;box-shadow:0 24px 48px #00000040;display:none;flex-direction:column;z-index:1000}.evento-page[_ngcontent-%COMP%]   .drawer.open[_ngcontent-%COMP%]{display:flex}.evento-page[_ngcontent-%COMP%]   .drawer-header[_ngcontent-%COMP%]{padding:18px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color-border)}.evento-page[_ngcontent-%COMP%]   .drawer-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.evento-page[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{border:none;background:none;font-size:26px;cursor:pointer}.evento-page[_ngcontent-%COMP%]   .drawer-body[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:var(--color-text-muted)}.evento-page[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:46px;padding:0 14px;border-radius:14px;border:1px solid var(--color-border);font-size:15px;width:100%;box-sizing:border-box}.evento-page[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.evento-page[_ngcontent-%COMP%]   .drawer-footer[_ngcontent-%COMP%]{display:flex;gap:14px;padding:18px 20px;border-top:1px solid var(--color-border)}.evento-page[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{flex:1;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;border-radius:16px;padding:14px;font-weight:600;cursor:pointer}.evento-page[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{flex:1;background:var(--color-btn-secondary);border:none;border-radius:16px;padding:14px;font-weight:600;cursor:pointer}.evento-page[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1200;display:flex;align-items:center;justify-content:center;padding:24px}.evento-page[_ngcontent-%COMP%]   .modal-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.55)}.evento-page[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;background:var(--color-bg);border-radius:22px;padding:22px;width:100%;max-width:420px;box-shadow:0 30px 60px #00000059;display:flex;flex-direction:column;gap:8px}.evento-page[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:20px;font-weight:600}.evento-page[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:var(--color-text-muted)}@media (max-width:768px){.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]{position:relative;flex-direction:column;align-items:center;gap:12px}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;width:100%}.evento-page[_ngcontent-%COMP%]{padding:14px}.evento-page[_ngcontent-%COMP%]   .top-bar[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.evento-page[_ngcontent-%COMP%]   .btn-new[_ngcontent-%COMP%]{width:100%;justify-content:center}.evento-page[_ngcontent-%COMP%]   .evento-row[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.evento-page[_ngcontent-%COMP%]   .row-left[_ngcontent-%COMP%]{align-items:flex-start}.evento-page[_ngcontent-%COMP%]   .row-right[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:flex-start;gap:10px}.evento-page[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap;gap:8px}.evento-page[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{flex:1}.evento-page[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.evento-page[_ngcontent-%COMP%]   .drawer[_ngcontent-%COMP%]{width:95%;max-height:90vh}.evento-page[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{padding:28px}.evento-page[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:none}}"]})}}return e})();class j{constructor(){this.id=0,this.planta="",this.maceta="",this.observaciones="",this.imagen="",this.estado="PENDIENTE",this.precioBase=0}}const Y=x.c.base;let O=(()=>{class e{constructor(n){this.http=n,this.url=`${Y}/subastas`,this.listaCambio=new P.B}getHeaders(n=!0){const o=sessionStorage.getItem("token");let a=(new l.Lr).set("Authorization",`Bearer ${o}`);return n&&(a=a.set("Content-Type","application/json")),a}listMisSubastas(){return this.http.get(`${this.url}/mis-subastas`,{headers:this.getHeaders()})}listByEstado(n){return this.http.get(`${this.url}/estado/${n}`,{headers:this.getHeaders()})}listByEvento(n){return this.http.get(`${this.url}/evento/${n}`,{headers:this.getHeaders()})}getById(n){return this.http.get(`${this.url}/${n}`,{headers:this.getHeaders()})}insertFormData(n){return this.http.post(this.url,n,{headers:this.getHeaders(!1)}).pipe((0,v.W)(o=>(0,C.$)(o)))}updateFormData(n,o){return this.http.put(`${this.url}/${n}`,o,{headers:this.getHeaders(!1)}).pipe((0,v.W)(a=>(0,C.$)(a)))}updateEstado(n,o){return this.http.put(`${this.url}/${n}/estado/${o}`,{},{headers:this.getHeaders()})}delete(n){return this.http.delete(`${this.url}/${n}`,{headers:this.getHeaders()})}setList(n){this.listaCambio.next(n)}getList(){return this.listaCambio.asObservable()}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),y=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-terminos-condiciones-subastadores"]],decls:43,vars:0,consts:[[1,"terminos-container"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Condiciones para la Publicaci\xf3n de Subastas de Plantas"),t.k0s(),t.j41(3,"p"),t.EFF(4," Antes de registrar una subasta en CarniNet, el subastador declara y acepta lo siguiente: "),t.k0s(),t.j41(5,"h3"),t.EFF(6,"1. Estado y Propiedad de la Planta"),t.k0s(),t.j41(7,"p"),t.EFF(8," El subastador confirma que la planta ofrecida es de su propiedad o que cuenta con la autorizaci\xf3n correspondiente para subastarla. La planta debe encontrarse en un estado acorde a su descripci\xf3n, evitando informaci\xf3n enga\xf1osa o incompleta. "),t.k0s(),t.j41(9,"h3"),t.EFF(10,"2. Informaci\xf3n Veraz"),t.k0s(),t.j41(11,"p"),t.EFF(12," Toda la informaci\xf3n ingresada (nombre de la planta, precio base, maceta, observaciones e im\xe1genes) debe ser real, actualizada y representativa de la planta ofrecida. Las im\xe1genes deben corresponder a la planta real que ser\xe1 subastada. "),t.k0s(),t.j41(13,"h3"),t.EFF(14,"3. Revisi\xf3n por Administraci\xf3n"),t.k0s(),t.j41(15,"p"),t.EFF(16," Cada subasta registrada ser\xe1 revisada por el equipo de administraci\xf3n antes de ser habilitada en el evento. La administraci\xf3n se reserva el derecho de aprobar, rechazar o solicitar correcciones si la subasta no cumple con los criterios establecidos por la plataforma. "),t.k0s(),t.j41(17,"h3"),t.EFF(18,"4. Cumplimiento de Normas del Evento"),t.k0s(),t.j41(19,"p"),t.EFF(20," El subastador acepta respetar las reglas y condiciones del evento activo, incluyendo fechas, horarios y lineamientos definidos por la organizaci\xf3n. "),t.k0s(),t.j41(21,"h3"),t.EFF(22,"5. Uso de Subastas para Historial y M\xe9tricas"),t.k0s(),t.j41(23,"p"),t.EFF(24," Las subastas registradas podr\xe1n ser utilizadas por la plataforma para la construcci\xf3n de un historial interno del subastador, el cual servir\xe1 como base para futuras funcionalidades. Este historial podr\xe1 ser considerado para m\xe9tricas de participaci\xf3n, actividad y referencia dentro del rubro de plantas carn\xedvoras, con el objetivo de fortalecer la confianza y la reputaci\xf3n del subastador dentro de la comunidad. "),t.k0s(),t.j41(25,"p"),t.EFF(26," Dicha informaci\xf3n ser\xe1 utilizada \xfanicamente para el desarrollo y mejora de CarniNet y no ser\xe1 compartida ni utilizada con fines externos. "),t.k0s(),t.j41(27,"h3"),t.EFF(28,"6. Responsabilidad del Subastador"),t.k0s(),t.j41(29,"p"),t.EFF(30," El subastador es responsable por la informaci\xf3n publicada y por cualquier consecuencia derivada de datos incorrectos, incompletos o no representativos. "),t.k0s(),t.j41(31,"h3"),t.EFF(32,"7. Uso Adecuado de la Plataforma"),t.k0s(),t.j41(33,"p"),t.EFF(34," Queda prohibido el uso indebido de la plataforma, incluyendo la publicaci\xf3n de subastas falsas, productos no permitidos, duplicaci\xf3n de registros o cualquier intento de manipulaci\xf3n del sistema. "),t.k0s(),t.j41(35,"h3"),t.EFF(36,"8. Sanciones"),t.k0s(),t.j41(37,"p"),t.EFF(38," El incumplimiento de estas condiciones podr\xe1 resultar en el rechazo de la subasta, la suspensi\xf3n temporal del acceso o el bloqueo de la cuenta, seg\xfan la gravedad del caso. "),t.k0s(),t.j41(39,"h3"),t.EFF(40,"9. Aceptaci\xf3n"),t.k0s(),t.j41(41,"p"),t.EFF(42," Al registrar una subasta, el subastador declara haber le\xeddo y aceptado estas condiciones, comprometi\xe9ndose a cumplirlas durante todo el proceso del evento. "),t.k0s()())},styles:[".terminos-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:40px 35px;background-color:var(--color-bg-alt);border-radius:20px;box-shadow:0 10px 25px #00000014;color:var(--color-text);font-size:1rem;line-height:1.7;overflow-y:auto}.terminos-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:var(--color-title);margin-bottom:25px;text-align:center;border-bottom:3px solid var(--color-primary);padding-bottom:12px}.terminos-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--color-primary);margin-top:25px;margin-bottom:15px}.terminos-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-muted);margin-bottom:18px}.terminos-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:25px;margin-bottom:18px}.terminos-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.terminos-container[_ngcontent-%COMP%]   span.resaltar[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary)}.terminos-container[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:var(--color-secondary)}@media (max-width: 768px){.terminos-container[_ngcontent-%COMP%]{padding:25px 20px;margin:20px}.terminos-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;padding-bottom:8px}.terminos-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.terminos-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .terminos-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.95rem}}"]})}}return e})();function U(e,i){if(1&e&&(t.j41(0,"option",22),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=i.$implicit;t.Y8G("value",n.id),t.R7$(1),t.E5c(" ",n.nombre," - ",t.i5U(2,4,n.fechaEvento,"shortDate")," - ",n.horaInicio," ")}}function L(e,i){if(1&e&&(t.j41(0,"div",23),t.nrm(1,"img",24),t.k0s()),2&e){const n=t.XpG(2);t.R7$(1),t.Y8G("src",n.previewUrl,t.B4B)}}function H(e,i){if(1&e&&(t.j41(0,"div",25)(1,"p"),t.EFF(2),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(1),t.AVh("exito",n.registroExitoso),t.R7$(1),t.SpI(" ",n.mensajeEstado," ")}}function q(e,i){if(1&e){const n=t.RV6();t.j41(0,"div")(1,"div",4)(2,"label"),t.EFF(3,"Evento *"),t.k0s(),t.j41(4,"select",5),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.subasta.eventoId=a)}),t.j41(5,"option",6),t.EFF(6,"Selecciona un evento"),t.k0s(),t.DNE(7,U,3,7,"option",7),t.k0s()(),t.j41(8,"div",4)(9,"label"),t.EFF(10,"Planta *"),t.k0s(),t.j41(11,"input",8),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.subasta.planta=a)}),t.k0s()(),t.j41(12,"div",4)(13,"label"),t.EFF(14,"Maceta (opcional)"),t.k0s(),t.j41(15,"input",9),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.subasta.maceta=a)}),t.k0s()(),t.j41(16,"div",4)(17,"label"),t.EFF(18,"Precio base (S/) *"),t.k0s(),t.j41(19,"input",10),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.subasta.precioBase=a)}),t.k0s()(),t.j41(20,"div",4)(21,"label"),t.EFF(22,"Observaciones (opcional)"),t.k0s(),t.j41(23,"input",11),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.subasta.observaciones=a)}),t.k0s()(),t.j41(24,"div",4)(25,"label"),t.EFF(26,"Imagen *"),t.k0s(),t.j41(27,"label",12)(28,"span"),t.EFF(29,"\u{1f4f7} Seleccionar imagen"),t.k0s(),t.j41(30,"input",13),t.bIt("change",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.onFileSelected(a))}),t.k0s()()(),t.DNE(31,L,2,1,"div",14),t.j41(32,"div",15)(33,"label")(34,"input",16),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG();return t.Njj(r.aceptaTerminos=a)}),t.k0s(),t.EFF(35," Acepto los t\xe9rminos y condiciones "),t.k0s(),t.j41(36,"span",17),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.mostrarTerminos=!0)}),t.EFF(37," Leer t\xe9rminos "),t.k0s()(),t.DNE(38,H,3,3,"div",18),t.j41(39,"div",19)(40,"button",20),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.subastaEditando?a.guardarEdicion():a.crear())}),t.EFF(41),t.k0s(),t.j41(42,"button",21),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.cancelarEdicion())}),t.EFF(43," Cancelar "),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(4),t.Y8G("ngModel",n.subasta.eventoId),t.R7$(3),t.Y8G("ngForOf",n.eventosAbiertos),t.R7$(4),t.Y8G("ngModel",n.subasta.planta),t.R7$(4),t.Y8G("ngModel",n.subasta.maceta),t.R7$(4),t.Y8G("ngModel",n.subasta.precioBase),t.R7$(4),t.Y8G("ngModel",n.subasta.observaciones),t.R7$(8),t.Y8G("ngIf",n.previewUrl),t.R7$(3),t.Y8G("ngModel",n.aceptaTerminos),t.R7$(4),t.Y8G("ngIf",n.isLoading||n.mensajeEstado),t.R7$(2),t.Y8G("disabled",n.isLoading||!n.aceptaTerminos),t.R7$(1),t.SpI(" ",n.isLoading?"Procesando...":n.subastaEditando?"Guardar cambios":"Crear Subasta"," "),t.R7$(1),t.Y8G("disabled",n.isLoading)}}function J(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",26)(1,"p",27),t.EFF(2," \u{1f6ab} Por el momento no hay eventos abiertos, vuelve m\xe1s tarde. "),t.k0s(),t.j41(3,"div",19)(4,"button",28),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.cancelarEdicion())}),t.EFF(5," Volver "),t.k0s()()()}}function Z(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"h3"),t.EFF(4,"T\xe9rminos y Condiciones para Subastadores"),t.k0s(),t.j41(5,"button",32),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.mostrarTerminos=!1)}),t.EFF(6,"\u2716"),t.k0s()(),t.j41(7,"div",33),t.nrm(8,"app-terminos-condiciones-subastadores"),t.k0s(),t.j41(9,"div",34)(10,"button",35),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.mostrarTerminos=!1)}),t.EFF(11," Cerrar "),t.k0s()()()()}}let I=(()=>{class e{constructor(n,o,a,r){this.subastaService=n,this.eventoService=o,this.router=a,this.route=r,this.subasta=new j,this.eventosAbiertos=[],this.previewUrl=null,this.subastaEditando=null,this.aceptaTerminos=!1,this.isLoading=!1,this.mensajeEstado="",this.registroExitoso=!1,this.mostrarTerminos=!1}ngOnInit(){this.cargarEventosAbiertos();const n=this.route.snapshot.paramMap.get("id");n&&this.cargarSubasta(+n)}cargarEventosAbiertos(){this.eventoService.list().subscribe(n=>{this.eventosAbiertos=n.filter(o=>"ABIERTO"===o.estado)})}cargarSubasta(n){this.subastaService.getById(n).subscribe({next:o=>{this.subastaEditando=o,this.subasta={...o},this.previewUrl="string"==typeof o.imagen?o.imagen:null},error:()=>{}})}onFileSelected(n){const o=n.target.files[0];if(!o)return;this.subasta.imagen=o;const a=new FileReader;a.readAsDataURL(o),a.onload=()=>{this.previewUrl=a.result}}buildFormData(n){const o=new FormData;n.imagen instanceof File&&o.append("archivo",n.imagen);const a={...n};return a.imagen instanceof File&&delete a.imagen,o.append("dto",new Blob([JSON.stringify(a)],{type:"application/json"})),o}crear(){if(!this.validarSubasta())return;this.isLoading=!0,this.registroExitoso=!1,this.mensajeEstado="Registrando subasta...";const n=this.buildFormData(this.subasta);this.subastaService.insertFormData(n).subscribe({next:()=>{this.isLoading=!1,this.registroExitoso=!0,this.mensajeEstado="Subasta registrada \u2714",setTimeout(()=>this.cancelarEdicion(),1500)},error:()=>{this.isLoading=!1,this.mensajeEstado="Error al registrar la subasta"}})}guardarEdicion(){if(!this.subastaEditando||!this.validarSubasta())return;this.isLoading=!0,this.registroExitoso=!1,this.mensajeEstado="Guardando cambios...";const n=this.buildFormData(this.subasta);this.subastaService.updateFormData(this.subastaEditando.id,n).subscribe({next:()=>{this.isLoading=!1,this.registroExitoso=!0,this.mensajeEstado="Cambios guardados \u2714",setTimeout(()=>this.cancelarEdicion(),1500)},error:()=>{this.isLoading=!1,this.mensajeEstado="Error al guardar los cambios"}})}validarSubasta(){return!(!(this.aceptaTerminos&&this.subasta.eventoId&&this.subasta.planta?.trim()&&this.subasta.precioBase)||this.subasta.precioBase<=0||!this.subasta.imagen||(this.subasta.observaciones?.trim()||(this.subasta.observaciones="-"),0))}cancelarEdicion(){this.subasta=new j,this.subastaEditando=null,this.previewUrl=null,this.mensajeEstado="",this.registroExitoso=!1,history.back()}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(O),t.rXU(M),t.rXU(g.Ix),t.rXU(g.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-subasta"]],decls:7,vars:4,consts:[[1,"subasta-container"],[4,"ngIf","ngIfElse"],["noEventos",""],["class","modal-backdrop",4,"ngIf"],[1,"form-group"],["name","eventoId","required","",3,"ngModel","ngModelChange"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Nombre de la planta",3,"ngModel","ngModelChange"],["type","text","placeholder","Tama\xf1o de maceta",3,"ngModel","ngModelChange"],["type","number","placeholder","Ej: 100",3,"ngModel","ngModelChange"],["type","text","placeholder","Coloca alguna observaci\xf3n",3,"ngModel","ngModelChange"],[1,"upload-box"],["type","file","accept","image/*","hidden","",3,"change"],["class","preview",4,"ngIf"],[1,"terminos-check"],["type","checkbox","name","aceptaTerminos",3,"ngModel","ngModelChange"],[1,"link-terminos",3,"click"],["class","estado-proceso",4,"ngIf"],[1,"acciones-form"],[1,"btn-crear",3,"disabled","click"],[1,"btn-cancelar",3,"disabled","click"],[3,"value"],[1,"preview"],[3,"src"],[1,"estado-proceso"],[1,"no-eventos-wrapper"],[1,"no-eventos"],[1,"btn-cancelar",3,"click"],[1,"modal-backdrop"],[1,"modal","modal-grande"],[1,"modal-header"],[1,"cerrar",2,"background","none","border","none",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn-crear",3,"click"]],template:function(o,a){if(1&o&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.DNE(3,q,44,12,"div",1),t.DNE(4,J,6,0,"ng-template",null,2,t.C5r),t.k0s(),t.DNE(6,Z,12,0,"div",3)),2&o){const r=t.sdS(5);t.R7$(2),t.JRh(a.subastaEditando?"Editar Subasta":"Crea tu Subasta"),t.R7$(1),t.Y8G("ngIf",a.eventosAbiertos.length>0)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",a.mostrarTerminos)}},dependencies:[c.Sq,c.bT,p.xH,p.y7,p.me,p.Q0,p.Zm,p.wz,p.BC,p.YS,p.vS,y,c.vh],styles:[".subasta-container[_ngcontent-%COMP%]{max-width:760px;margin:40px auto;padding:30px;background:var(--color-bg);border-radius:24px;box-shadow:0 10px 28px #0000001f;font-family:Roboto,Helvetica Neue,sans-serif}.subasta-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:11px 12px;border-radius:12px;border:1px solid var(--color-border);background:var(--color-bg-alt);font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-bg)}.upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:14px;border:2px dashed var(--color-primary);border-radius:16px;background:var(--color-success);color:var(--color-secondary);font-weight:600;cursor:pointer;transition:all .15s ease}.upload-box[_ngcontent-%COMP%]:hover{background:var(--color-success-hover);transform:translateY(-1px)}.preview[_ngcontent-%COMP%]{margin-top:12px;text-align:center}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:260px;border-radius:16px;box-shadow:0 6px 14px #00000026}.acciones-form[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:18px}.btn-crear[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:20px;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:var(--color-bg);font-weight:600;cursor:pointer}.btn-cancelar[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:20px;background:var(--color-muted);color:var(--color-text-muted);font-weight:600;cursor:pointer}.no-eventos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;padding:30px 0;border:2px dashed var(--color-primary);border-radius:16px;background:var(--color-bg-alt)}.no-eventos[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--color-primary);font-weight:600;text-align:center}.estado-proceso[_ngcontent-%COMP%]{margin:16px 0;padding:14px 18px;border-radius:14px;background:rgba(0,0,0,.03);border:1px solid var(--color-border);text-align:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.estado-proceso[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:var(--color-text-muted)}.estado-proceso[_ngcontent-%COMP%]   p.exito[_ngcontent-%COMP%]{color:var(--color-primary)}.btn-crear[disabled][_ngcontent-%COMP%], .btn-cancelar[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.terminos-check[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;color:var(--color-text-muted);display:flex;align-items:center;gap:8px}.terminos-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.link-terminos[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600;cursor:pointer;text-decoration:underline}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal[_ngcontent-%COMP%]{width:90%;max-width:860px;max-height:90vh;background:var(--color-bg);border-radius:24px;box-shadow:0 20px 40px #00000040;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{padding:18px 22px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.modal-body[_ngcontent-%COMP%]{padding:20px 22px;overflow-y:auto;background:var(--color-bg-alt)}.modal-footer[_ngcontent-%COMP%]{padding:16px 22px;border-top:1px solid var(--color-border);display:flex;justify-content:flex-end}.btn-cerrar-modal[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:16px;background:var(--color-muted);color:var(--color-text-muted);font-weight:600;cursor:pointer}.btn-cerrar-modal[_ngcontent-%COMP%]:hover{background:var(--color-border)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@media (max-width:992px){.subasta-container[_ngcontent-%COMP%]{padding:24px}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:220px}}@media (max-width:768px){.subasta-container[_ngcontent-%COMP%]{margin:24px 16px;padding:20px}.acciones-form[_ngcontent-%COMP%]{flex-direction:column}.btn-crear[_ngcontent-%COMP%], .btn-cancelar[_ngcontent-%COMP%]{width:100%}.modal[_ngcontent-%COMP%]{width:95%;max-height:95vh;border-radius:20px}}@media (max-width:520px){.subasta-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:13px;padding:10px}.upload-box[_ngcontent-%COMP%]{font-size:13px;padding:12px}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}"]})}}return e})();function Q(e,i){1&e&&(t.j41(0,"div",5)(1,"p"),t.EFF(2,"Cargando tus subastas\u2026 \u23f3"),t.k0s()())}function K(e,i){1&e&&(t.j41(0,"div",5)(1,"p"),t.EFF(2,"No tienes subastas registradas a\xfan \u{1f331}"),t.k0s()())}function W(e,i){if(1&e&&t.nrm(0,"img",21),2&e){const n=t.XpG().$implicit;t.Y8G("src",n.imagen,t.B4B)}}function tt(e,i){1&e&&(t.j41(0,"div",22),t.EFF(1,"Sin imagen"),t.k0s())}function nt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.editar(a))}),t.EFF(1," Editar "),t.k0s()}}function et(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.eliminar(a.id))}),t.EFF(1," Eliminar "),t.k0s()}}function ot(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",8)(1,"div",9),t.DNE(2,W,1,1,"img",10),t.DNE(3,tt,2,0,"ng-template",null,11,t.C5r),t.j41(5,"span",12),t.EFF(6),t.k0s()(),t.j41(7,"div",13)(8,"h3"),t.EFF(9),t.k0s(),t.j41(10,"div",14)(11,"div",15)(12,"strong"),t.EFF(13,"Evento:"),t.k0s(),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"div",15)(17,"strong"),t.EFF(18,"Fecha:"),t.k0s(),t.j41(19,"span"),t.EFF(20),t.nI1(21,"date"),t.k0s()(),t.j41(22,"div",15)(23,"strong"),t.EFF(24,"Hora inicio:"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()()(),t.j41(27,"div",14)(28,"div",15)(29,"strong"),t.EFF(30,"Planta:"),t.k0s(),t.j41(31,"span"),t.EFF(32),t.k0s()(),t.j41(33,"div",15)(34,"strong"),t.EFF(35,"Maceta:"),t.k0s(),t.j41(36,"span"),t.EFF(37),t.k0s()(),t.j41(38,"div",15)(39,"strong"),t.EFF(40,"Observaciones:"),t.k0s(),t.j41(41,"span"),t.EFF(42),t.k0s()(),t.j41(43,"div",16)(44,"strong"),t.EFF(45,"Precio base:"),t.k0s(),t.j41(46,"span"),t.EFF(47),t.k0s()()()(),t.j41(48,"div",17)(49,"button",18),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.verDetalles(r))}),t.EFF(50,"Ver Detalles"),t.k0s(),t.DNE(51,nt,2,0,"button",19),t.DNE(52,et,2,0,"button",20),t.k0s()()}if(2&e){const n=i.$implicit,o=t.sdS(4);t.R7$(2),t.Y8G("ngIf",n.imagen)("ngIfElse",o),t.R7$(3),t.Y8G("ngClass",(n.estado||"pendiente").toLowerCase()),t.R7$(1),t.SpI(" ",n.estado||"Pendiente"," "),t.R7$(3),t.SpI("Subasta #",n.numeroSubasta||"Por definir",""),t.R7$(6),t.JRh(n.eventoNombre||"Por definir"),t.R7$(5),t.JRh(n.fechaEvento?t.i5U(21,14,n.fechaEvento,"dd/MM/yyyy"):"Por definir"),t.R7$(6),t.JRh(n.horaInicio||"Por definir"),t.R7$(6),t.JRh(n.planta),t.R7$(5),t.JRh(n.maceta),t.R7$(5),t.JRh(n.observaciones),t.R7$(5),t.SpI("S/ ",n.precioBase,""),t.R7$(4),t.Y8G("ngIf","ACEPTADA"!==n.estado&&"RECHAZADA"!==n.estado),t.R7$(1),t.Y8G("ngIf","ACEPTADA"!==n.estado)}}function at(e,i){if(1&e&&(t.j41(0,"div",6),t.DNE(1,ot,53,17,"div",7),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("ngForOf",n.subastas)}}let rt=(()=>{class e{constructor(n,o){this.subastaService=n,this.router=o,this.subastas=[],this.cargando=!1}ngOnInit(){this.cargarMisSubastas()}cargarMisSubastas(){this.cargando=!0,this.subastaService.listMisSubastas().subscribe({next:n=>{this.subastas=n,console.log("Mis subastas actualizadas:",this.subastas),this.cargando=!1},error:()=>{console.log("Error al cargar subastas"),this.cargando=!1}})}editar(n){this.router.navigate(["/components/subastas",n.id])}eliminar(n){this.subastaService.delete(n).subscribe(()=>{this.cargarMisSubastas()})}crearSubasta(){this.router.navigate(["/components/subastas"])}verDetalles(n){this.router.navigate(["/components/detalles"],{state:{subasta:n}})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(O),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-listar"]],decls:10,vars:3,consts:[[1,"container"],[1,"subastas-header"],[1,"btn-crear",3,"click"],["class","estado-lista",4,"ngIf"],["class","cards-grid",4,"ngIf"],[1,"estado-lista"],[1,"cards-grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-image-wrapper"],["alt","Imagen subasta","class","card-image",3,"src",4,"ngIf","ngIfElse"],["sinImagen",""],[1,"estado-etiqueta",3,"ngClass"],[1,"card-body"],[1,"card-info-row"],[1,"info-item"],[1,"info-item","precio"],[1,"card-footer"],[1,"btn-detalles",3,"click"],["class","btn-editar",3,"click",4,"ngIf"],["class","btn-eliminar",3,"click",4,"ngIf"],["alt","Imagen subasta",1,"card-image",3,"src"],[1,"sin-imagen"],[1,"btn-editar",3,"click"],[1,"btn-eliminar",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.nrm(3,"app-volver"),t.EFF(4," Tus Subastas"),t.k0s(),t.j41(5,"button",2),t.bIt("click",function(){return a.crearSubasta()}),t.EFF(6,"+ Crear Subasta"),t.k0s()(),t.DNE(7,Q,3,0,"div",3),t.DNE(8,K,3,0,"div",3),t.DNE(9,at,2,1,"div",4),t.k0s()),2&o&&(t.R7$(7),t.Y8G("ngIf",a.cargando),t.R7$(1),t.Y8G("ngIf",!a.cargando&&0===a.subastas.length),t.R7$(1),t.Y8G("ngIf",!a.cargando&&a.subastas.length>0))},dependencies:[c.YU,c.Sq,c.bT,m,c.vh],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:24px auto;font-family:Roboto,Helvetica Neue,sans-serif;padding:0 16px}.subastas-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:12px}.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.btn-crear[_ngcontent-%COMP%]{padding:10px 18px;border-radius:12px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px #0000001f}.btn-crear[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.card[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:18px;border:1px solid var(--color-border);display:flex;flex-direction:column;overflow:hidden}.card-image-wrapper[_ngcontent-%COMP%]{position:relative;height:200px;border-bottom:1px solid var(--color-border)}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.sin-imagen[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;color:var(--color-text-muted);font-size:13px}.estado-etiqueta[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:600;background:var(--color-estado-pendiente);color:#92400e}.estado-etiqueta.aceptada[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado-etiqueta.rechazada[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.card-body[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:10px}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--color-title)}.card-info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;font-size:12px}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--color-title);font-weight:600}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--color-text-muted)}.info-item.precio[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:var(--color-secondary)}.card-footer[_ngcontent-%COMP%]{display:flex;gap:10px;padding:14px 16px;border-top:1px solid var(--color-border);flex-wrap:wrap}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;border:none}.btn-detalles[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);color:var(--color-primary)}.btn-editar[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.btn-editar[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.btn-eliminar[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.btn-eliminar[_ngcontent-%COMP%]:hover{background:#fecaca}.estado-lista[_ngcontent-%COMP%]{margin:40px 0;padding:28px 20px;border-radius:18px;border:2px dashed var(--color-primary);background:var(--color-bg-alt);text-align:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.estado-lista[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:var(--color-text-muted)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1024px){.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 768px){.card-info-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.btn-crear[_ngcontent-%COMP%]{width:100%;text-align:center}}@media (max-width: 520px){.subastas-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.subastas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}"]})}}return e})();function it(e,i){if(1&e&&t.nrm(0,"img",11),2&e){const n=t.XpG(2);t.Y8G("src",n.subasta.imagen,t.B4B)}}function st(e,i){1&e&&(t.j41(0,"div",12),t.EFF(1,"Sin imagen"),t.k0s())}function ct(e,i){if(1&e&&(t.j41(0,"div",9)(1,"h3"),t.EFF(2,"Observaciones"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.subasta.observaciones)}}function dt(e,i){if(1&e&&(t.j41(0,"div",1),t.nrm(1,"app-volver"),t.j41(2,"div",2)(3,"header",3)(4,"h2"),t.EFF(5,"Detalle de la Subasta"),t.k0s(),t.j41(6,"span",4),t.EFF(7),t.k0s()(),t.j41(8,"div",5)(9,"div",6),t.DNE(10,it,1,1,"img",7),t.DNE(11,st,2,0,"ng-template",null,8,t.C5r),t.k0s(),t.j41(13,"div",9)(14,"h3"),t.EFF(15,"Informaci\xf3n general"),t.k0s(),t.j41(16,"p")(17,"strong"),t.EFF(18,"N\xb0 de subasta:"),t.k0s(),t.EFF(19),t.k0s(),t.j41(20,"p")(21,"strong"),t.EFF(22,"Evento:"),t.k0s(),t.EFF(23),t.k0s(),t.j41(24,"p")(25,"strong"),t.EFF(26,"Fecha del evento:"),t.k0s(),t.EFF(27),t.nI1(28,"date"),t.k0s(),t.j41(29,"p")(30,"strong"),t.EFF(31,"Hora inicio evento:"),t.k0s(),t.EFF(32),t.k0s()(),t.j41(33,"div",9)(34,"h3"),t.EFF(35,"Horario asignado"),t.k0s(),t.j41(36,"p")(37,"strong"),t.EFF(38,"Inicio:"),t.k0s(),t.EFF(39),t.nrm(40,"br"),t.j41(41,"strong"),t.EFF(42,"Fin:"),t.k0s(),t.EFF(43),t.k0s(),t.j41(44,"p")(45,"strong"),t.EFF(46,"Duraci\xf3n:"),t.k0s(),t.EFF(47),t.k0s(),t.j41(48,"p")(49,"strong"),t.EFF(50,"Descanso:"),t.k0s(),t.EFF(51),t.k0s()(),t.j41(52,"div",9)(53,"h3"),t.EFF(54,"Planta y maceta"),t.k0s(),t.j41(55,"p")(56,"strong"),t.EFF(57,"Planta:"),t.k0s(),t.EFF(58),t.k0s(),t.j41(59,"p")(60,"strong"),t.EFF(61,"Maceta:"),t.k0s(),t.EFF(62),t.k0s(),t.j41(63,"p")(64,"strong"),t.EFF(65,"Precio base:"),t.k0s(),t.EFF(66),t.k0s()(),t.j41(67,"div",9)(68,"h3"),t.EFF(69,"Subastador"),t.k0s(),t.j41(70,"p")(71,"strong"),t.EFF(72,"Nombre:"),t.k0s(),t.EFF(73),t.k0s(),t.j41(74,"p")(75,"strong"),t.EFF(76,"Contacto:"),t.k0s(),t.EFF(77),t.k0s(),t.j41(78,"p")(79,"strong"),t.EFF(80,"Procedencia:"),t.k0s(),t.EFF(81),t.k0s()(),t.DNE(82,ct,5,1,"div",10),t.k0s()()()),2&e){const n=t.sdS(12),o=t.XpG();t.R7$(6),t.Y8G("ngClass",o.subasta.estado.toLowerCase()),t.R7$(1),t.SpI(" ",o.subasta.estado," "),t.R7$(3),t.Y8G("ngIf",o.subasta.imagen)("ngIfElse",n),t.R7$(9),t.SpI(" ",o.subasta.numeroSubasta||"Lo define administraci\xf3n",""),t.R7$(4),t.SpI(" ",o.subasta.eventoNombre,""),t.R7$(4),t.SpI(" ",t.i5U(28,19,o.subasta.fechaEvento,"dd/MM/yyyy"),""),t.R7$(5),t.SpI(" ",o.subasta.horaInicio,""),t.R7$(7),t.SpI(" ",o.subasta.horaInicioAsignada||"Lo define administraci\xf3n",""),t.R7$(4),t.SpI(" ",o.subasta.horaFinAsignada||"Lo define administraci\xf3n"," "),t.R7$(4),t.SpI(" ",o.subasta.duracionSubastaMinutos," min"),t.R7$(4),t.SpI(" ",o.subasta.descansoMinutos," min"),t.R7$(7),t.SpI(" ",o.subasta.planta,""),t.R7$(4),t.SpI(" ",o.subasta.maceta,""),t.R7$(4),t.SpI(" S/ ",o.subasta.precioBase,""),t.R7$(7),t.SpI(" ",o.subasta.username,""),t.R7$(4),t.SpI(" ",o.subasta.phone,""),t.R7$(4),t.SpI(" ",o.subasta.city,""),t.R7$(1),t.Y8G("ngIf",o.subasta.observaciones)}}let lt=(()=>{class e{constructor(n){this.router=n}ngOnInit(){const n=history.state;n.subasta&&(this.subasta=n.subasta)}volver(){history.back()}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-informacion-subasta"]],decls:1,vars:1,consts:[["class","detalle-container",4,"ngIf"],[1,"detalle-container"],[1,"detalle-card"],[1,"detalle-header"],[1,"estado",3,"ngClass"],[1,"detalle-grid"],[1,"detalle-imagen"],[3,"src",4,"ngIf","ngIfElse"],["sinImagen",""],[1,"detalle-bloque"],["class","detalle-bloque",4,"ngIf"],[3,"src"],[1,"sin-imagen"]],template:function(o,a){1&o&&t.DNE(0,dt,83,22,"div",0),2&o&&t.Y8G("ngIf",a.subasta)},dependencies:[c.YU,c.bT,m,c.vh],styles:[".detalle-container[_ngcontent-%COMP%]{max-width:1100px;margin:32px auto;font-family:Roboto,Helvetica Neue,sans-serif}.detalle-card[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:22px;border:1px solid var(--color-border);box-shadow:0 14px 40px #00000014;overflow:hidden}.detalle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--color-border);background:linear-gradient(180deg,var(--color-bg-alt),var(--color-bg))}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.estado[_ngcontent-%COMP%]{padding:6px 14px;border-radius:999px;font-size:13px;font-weight:700}.estado.pendiente[_ngcontent-%COMP%]{background:var(--color-estado-pendiente);color:#92400e}.estado.aceptada[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado.rechazada[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.detalle-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:420px 1fr;gap:24px;padding:24px}.detalle-imagen[_ngcontent-%COMP%]{border-radius:18px;overflow:hidden;border:1px solid var(--color-border);background:var(--color-bg-alt);display:flex;align-items:center;justify-content:center}.detalle-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.sin-imagen[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.detalle-bloque[_ngcontent-%COMP%]{background:var(--color-bg-alt);border-radius:16px;padding:16px 18px;border:1px solid var(--color-border)}.detalle-bloque[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:15px;color:var(--color-title)}.detalle-bloque[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:13px;color:var(--color-text-muted)}.detalle-bloque[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-title)}.detalle-footer[_ngcontent-%COMP%]{padding:18px 24px;border-top:1px solid var(--color-border);display:flex;justify-content:flex-end;background:var(--color-bg)}.detalle-footer[_ngcontent-%COMP%]   .btn-volver[_ngcontent-%COMP%]{padding:10px 20px;border-radius:999px;background:var(--color-bg-alt);border:1px solid var(--color-border);font-size:14px;font-weight:600;cursor:pointer;color:var(--color-title)}.detalle-footer[_ngcontent-%COMP%]   .btn-volver[_ngcontent-%COMP%]:hover{background:var(--color-border)}@media (max-width: 1200px){.detalle-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.detalle-imagen[_ngcontent-%COMP%]{height:260px}.detalle-bloque[_ngcontent-%COMP%]{padding:14px 16px}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.estado[_ngcontent-%COMP%]{font-size:12px;padding:5px 12px}}@media (max-width: 992px){.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 768px){.detalle-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.detalle-bloque[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.detalle-bloque[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 520px){.detalle-imagen[_ngcontent-%COMP%]{height:220px}.detalle-bloque[_ngcontent-%COMP%]{padding:12px 14px}.detalle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.estado[_ngcontent-%COMP%]{font-size:11px;padding:4px 10px}}"]})}}return e})();function pt(e,i){1&e&&(t.j41(0,"p",8),t.EFF(1," Cargando subastas... "),t.k0s())}function gt(e,i){if(1&e&&t.nrm(0,"img",32),2&e){const n=t.XpG().$implicit;t.Y8G("src",n.imagen,t.B4B)}}function ut(e,i){1&e&&(t.j41(0,"div",33),t.EFF(1,"Sin imagen"),t.k0s())}function bt(e,i){if(1&e&&t.nrm(0,"img",32),2&e){const n=t.XpG().$implicit;t.Y8G("src",n.imagen,t.B4B)}}function mt(e,i){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"button",34),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.aceptar(a))}),t.EFF(2),t.k0s(),t.j41(3,"button",35),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.rechazar(a))}),t.EFF(4," Rechazar "),t.k0s(),t.bVm()}if(2&e){const n=t.XpG().$implicit,o=t.XpG();t.R7$(1),t.Y8G("disabled",o.accionandoId===n.id),t.R7$(1),t.SpI(" ",o.accionandoId===n.id?"Procesando...":"Aceptar"," "),t.R7$(1),t.Y8G("disabled",o.accionandoId===n.id)}}function _t(e,i){1&e&&(t.j41(0,"p",36),t.EFF(1," Esta subasta ha sido rechazada por un administrador. "),t.k0s())}const ht=function(e,i,n){return{"estado-pendiente":e,"estado-aceptado":i,"estado-rechazado":n}};function ft(e,i){if(1&e&&(t.j41(0,"div",9),t.nrm(1,"input",10),t.j41(2,"label",11),t.DNE(3,gt,1,1,"img",12),t.DNE(4,ut,2,0,"ng-template",null,13,t.C5r),t.k0s(),t.j41(6,"div",14),t.nrm(7,"label",15),t.DNE(8,bt,1,1,"img",16),t.j41(9,"label",17),t.EFF(10,"\xd7"),t.k0s()(),t.j41(11,"div",18)(12,"h3"),t.EFF(13),t.k0s(),t.j41(14,"p",19)(15,"span",20),t.EFF(16),t.k0s(),t.j41(17,"span",21),t.EFF(18),t.k0s()(),t.j41(19,"p",22),t.EFF(20),t.k0s()(),t.j41(21,"div",23),t.nrm(22,"input",10),t.j41(23,"label",24),t.EFF(24," Ver Detalle "),t.k0s(),t.j41(25,"div",25)(26,"div",26)(27,"h3"),t.EFF(28,"Informaci\xf3n"),t.k0s(),t.j41(29,"label",27),t.EFF(30,"\xd7"),t.k0s()(),t.j41(31,"div",28)(32,"h3"),t.EFF(33,"Datos del subastador"),t.k0s(),t.j41(34,"p")(35,"b"),t.EFF(36,"Subastador:"),t.k0s(),t.EFF(37),t.k0s(),t.j41(38,"p")(39,"b"),t.EFF(40,"Ciudad:"),t.k0s(),t.EFF(41),t.k0s(),t.j41(42,"p")(43,"b"),t.EFF(44,"Tel\xe9fono:"),t.k0s(),t.EFF(45),t.k0s(),t.nrm(46,"hr"),t.j41(47,"h3"),t.EFF(48,"Datos de la subasta"),t.k0s(),t.j41(49,"p")(50,"b"),t.EFF(51,"Planta:"),t.k0s(),t.EFF(52),t.k0s(),t.j41(53,"p")(54,"b"),t.EFF(55,"Maceta:"),t.k0s(),t.EFF(56),t.k0s(),t.j41(57,"p")(58,"b"),t.EFF(59,"Observaciones:"),t.k0s(),t.EFF(60),t.k0s(),t.j41(61,"p")(62,"b"),t.EFF(63,"Precio Base:"),t.k0s(),t.EFF(64),t.k0s(),t.j41(65,"div",29),t.DNE(66,mt,5,3,"ng-container",30),t.DNE(67,_t,2,0,"p",31),t.k0s()()()()()),2&e){const n=i.$implicit,o=t.sdS(5);t.R7$(1),t.Mz_("id","img-",n.id,""),t.R7$(1),t.Mz_("for","img-",n.id,""),t.R7$(1),t.Y8G("ngIf",n.imagen)("ngIfElse",o),t.R7$(4),t.Mz_("for","img-",n.id,""),t.R7$(1),t.Y8G("ngIf",n.imagen),t.R7$(1),t.Mz_("for","img-",n.id,""),t.R7$(4),t.JRh(n.planta),t.R7$(2),t.Y8G("ngClass",t.sMw(24,ht,"PENDIENTE"===n.estado,"ACEPTADA"===n.estado,"RECHAZADA"===n.estado)),t.R7$(1),t.SpI(" ",n.estado," "),t.R7$(2),t.SpI("S/ ",n.precioBase||"-",""),t.R7$(2),t.SpI("Subastador: ",n.username||"-",""),t.R7$(2),t.Mz_("id","det-",n.id,""),t.R7$(1),t.Mz_("for","det-",n.id,""),t.R7$(6),t.Mz_("for","det-",n.id,""),t.R7$(8),t.SpI(" ",n.username||"-",""),t.R7$(4),t.SpI(" ",n.city||"-",""),t.R7$(4),t.SpI(" ",n.phone||"-",""),t.R7$(7),t.SpI(" ",n.planta||"-",""),t.R7$(4),t.SpI(" ",n.maceta||"-",""),t.R7$(4),t.SpI(" ",n.observaciones||"-",""),t.R7$(4),t.SpI(" ",n.precioBase||"-",""),t.R7$(2),t.Y8G("ngIf","PENDIENTE"===n.estado),t.R7$(1),t.Y8G("ngIf","RECHAZADA"===n.estado)}}function xt(e,i){1&e&&(t.j41(0,"p",8),t.EFF(1," No hay subastas registradas. "),t.k0s())}let vt=(()=>{class e{constructor(n,o,a,r,s){this.route=n,this.router=o,this.subastaService=a,this.adminService=r,this.eventoService=s,this.subastas=[],this.evento=new k,this.loadingSubastas=!0,this.accionandoId=null}ngOnInit(){this.idEvento=Number(this.route.snapshot.paramMap.get("idEvento")),this.cargarEvento(),this.cargarSubastas()}cargarEvento(){this.eventoService.listId(this.idEvento).subscribe(n=>{this.evento=n})}cargarSubastas(){this.loadingSubastas=!0,this.subastaService.listByEvento(this.idEvento).subscribe(n=>{this.subastas=n.filter(o=>"PENDIENTE"===o.estado||"RECHAZADA"===o.estado),this.loadingSubastas=!1},()=>{this.loadingSubastas=!1})}aceptar(n){this.accionandoId=n.id,this.adminService.decidirSubasta(n.id,"ACEPTADA").subscribe(()=>{this.accionandoId=null,this.cargarSubastas()})}rechazar(n){this.accionandoId=n.id,this.adminService.decidirSubasta(n.id,"RECHAZADA").subscribe(()=>{this.accionandoId=null,this.cargarSubastas()})}verAceptadas(){this.router.navigate(["/components/subastas-aceptadas",this.idEvento])}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(g.nX),t.rXU(g.Ix),t.rXU(O),t.rXU(F),t.rXU(M))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-organizar-subastas"]],decls:14,vars:4,consts:[[1,"organizar-container"],[1,"organizar-header"],[1,"header-left"],[1,"evento-id"],[1,"btn-secundario",3,"click"],[1,"lista-subastas"],["class","sin-datos",4,"ngIf"],["class","fila-subasta",4,"ngFor","ngForOf"],[1,"sin-datos"],[1,"fila-subasta"],["type","checkbox","hidden","",3,"id"],[1,"img-box",3,"for"],[3,"src",4,"ngIf","ngIfElse"],["noImg",""],[1,"zoom"],[1,"zoom-bg",3,"for"],[3,"src",4,"ngIf"],[1,"zoom-close",3,"for"],[1,"info"],[1,"meta"],[1,"estado",3,"ngClass"],[1,"precio"],[1,"sub"],[1,"acciones"],[1,"btn-detalle","primary",3,"for"],[1,"drawer"],[1,"drawer-header"],[3,"for"],[1,"drawer-body"],[1,"drawer-acciones"],[4,"ngIf"],["class","mensaje-rechazada",4,"ngIf"],[3,"src"],[1,"img-empty"],[1,"btn-aceptar",3,"disabled","click"],[1,"btn-rechazar",3,"disabled","click"],[1,"mensaje-rechazada"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2),t.nrm(3,"app-volver"),t.j41(4,"h2"),t.EFF(5,"Subastas del Evento"),t.k0s(),t.j41(6,"span",3),t.EFF(7),t.k0s()(),t.j41(8,"button",4),t.bIt("click",function(){return a.verAceptadas()}),t.EFF(9," Ver subastas aceptadas "),t.k0s()(),t.j41(10,"div",5),t.DNE(11,pt,2,0,"p",6),t.DNE(12,ft,68,28,"div",7),t.DNE(13,xt,2,0,"p",6),t.k0s()()),2&o&&(t.R7$(7),t.JRh(a.evento.nombre||"Evento sin nombre"),t.R7$(4),t.Y8G("ngIf",a.loadingSubastas),t.R7$(1),t.Y8G("ngForOf",a.subastas),t.R7$(1),t.Y8G("ngIf",!a.loadingSubastas&&!a.subastas.length))},dependencies:[c.YU,c.Sq,c.bT,m],styles:["h3[_ngcontent-%COMP%]{color:var(--color-primary)}.organizar-container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;font-family:Roboto,Helvetica Neue,sans-serif}.organizar-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:50;display:grid;grid-template-columns:1fr auto;gap:16px;padding:18px 20px;margin-bottom:24px;background:var(--color-bg);border-bottom:1px solid var(--color-border)}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--color-title)}.organizar-header[_ngcontent-%COMP%]   .evento-id[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.btn-volver[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:6px 14px;border-radius:999px;background:var(--color-bg-alt);border:1px solid var(--color-border);color:var(--color-title);cursor:pointer;font-size:13px}.btn-secundario[_ngcontent-%COMP%]{align-self:center;padding:10px 18px;border-radius:12px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px #0000001f}.btn-secundario[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.lista-subastas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.fila-subasta[_ngcontent-%COMP%]{display:grid;grid-template-columns:200px 1fr auto;gap:18px;background:var(--color-bg);padding:18px;border-radius:18px;border:1px solid var(--color-border);align-items:center}.img-box[_ngcontent-%COMP%]{width:200px;height:140px;border-radius:14px;overflow:hidden;cursor:zoom-in;border:1px solid var(--color-border)}.img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.img-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:13px;color:var(--color-text-muted)}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:17px;color:var(--color-title)}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:13px;margin:6px 0}.precio[_ngcontent-%COMP%]{font-weight:600}.sub[_ngcontent-%COMP%]{font-size:12px;color:var(--color-text-muted)}.estado[_ngcontent-%COMP%]{font-weight:600;padding:4px 10px;border-radius:999px;font-size:12px}.estado-pendiente[_ngcontent-%COMP%]{background:var(--color-estado-pendiente);color:#92400e}.estado-aceptado[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.estado-rechazado[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.acciones[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-detalle[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);color:var(--color-primary);padding:8px 16px;border-radius:999px;font-size:13px;cursor:pointer}.btn-detalle.primary[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:10px 18px;display:flex;justify-content:center;align-items:center;text-align:center}.btn-detalle.primary[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.drawer[_ngcontent-%COMP%]{position:fixed;top:0;right:-380px;width:360px;height:100vh;background:var(--color-bg);border-radius:16px 0 0 16px;box-shadow:-8px 0 24px #0000001f;transition:.3s;z-index:1000;overflow-y:auto;display:flex;flex-direction:column}input[id^=det-][_ngcontent-%COMP%]:checked ~ .drawer[_ngcontent-%COMP%]{right:0}.drawer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px;border-bottom:1px solid var(--color-border);background:var(--color-bg-alt)}.drawer-body[_ngcontent-%COMP%]{padding:16px;font-size:14px}.drawer-acciones[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.btn-aceptar[_ngcontent-%COMP%], .btn-rechazar[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:10px;border:none;font-size:13px;font-weight:600;cursor:pointer}.btn-aceptar[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.btn-aceptar[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.btn-rechazar[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.btn-rechazar[_ngcontent-%COMP%]:hover{background:#fecaca}.mensaje-rechazada[_ngcontent-%COMP%]{font-size:13px;color:var(--color-estado-rechazado);background:#fee2e2;padding:10px 12px;border-radius:10px;text-align:center}.zoom[_ngcontent-%COMP%]{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000}input[id^=img-][_ngcontent-%COMP%]:checked ~ .zoom[_ngcontent-%COMP%]{display:flex}.zoom-bg[_ngcontent-%COMP%]{position:absolute;inset:0;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:rgba(0,0,0,.35);z-index:1}.zoom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:12px;position:relative;z-index:2;animation:_ngcontent-%COMP%_zoomIn .2s ease-out}.zoom-close[_ngcontent-%COMP%]{position:absolute;top:18px;right:18px;width:42px;height:42px;border-radius:50%;background:rgba(0,0,0,.6);color:#fff;font-size:26px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:3;transition:transform .2s ease,background .2s ease}.zoom-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.8);transform:scale(1.1)}@keyframes _ngcontent-%COMP%_zoomIn{0%{transform:scale(.96);opacity:0}to{transform:scale(1);opacity:1}}.sin-datos[_ngcontent-%COMP%]{margin:40px 0;padding:28px 20px;border-radius:18px;border:2px dashed var(--color-primary);background:var(--color-bg-alt);text-align:center;font-size:15px;font-weight:600;color:var(--color-text-muted)}@media (max-width: 1200px){.organizar-container[_ngcontent-%COMP%]{margin:20px auto;padding:0 10px}.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:180px 1fr 180px;gap:18px;padding:20px;justify-items:center}.img-box[_ngcontent-%COMP%]{height:150px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.precio[_ngcontent-%COMP%]{font-size:17px}}@media (max-width: 992px){.organizar-container[_ngcontent-%COMP%]{padding:0 15px}.organizar-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:12px}.header-left[_ngcontent-%COMP%]{align-items:center}.btn-secundario[_ngcontent-%COMP%]{width:80%;max-width:300px;margin:0 auto}.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding:18px;justify-items:center}.acciones[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:center}.btn-detalle.primary[_ngcontent-%COMP%]{width:80%;max-width:250px}.img-box[_ngcontent-%COMP%]{width:100%;max-width:280px;height:180px}.drawer[_ngcontent-%COMP%]{width:300px}}@media (max-width: 768px){.fila-subasta[_ngcontent-%COMP%]{gap:14px}.info[_ngcontent-%COMP%]{text-align:center}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px}.precio[_ngcontent-%COMP%]{font-size:16px}.estado[_ngcontent-%COMP%]{font-size:12px;padding:4px 10px}.img-box[_ngcontent-%COMP%]{max-width:240px;height:160px}.acciones[_ngcontent-%COMP%]{width:100%;align-items:center}}@media (max-width: 520px){.organizar-container[_ngcontent-%COMP%]{padding:0 12px}.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.precio[_ngcontent-%COMP%]{font-size:14px}.estado[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}.img-box[_ngcontent-%COMP%]{max-width:200px;height:140px}.acciones[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:center}.btn-detalle.primary[_ngcontent-%COMP%]{width:90%}.drawer[_ngcontent-%COMP%]{width:260px}}"]})}}return e})();function Ct(e,i){1&e&&(t.j41(0,"p",12),t.EFF(1," Cargando subastas aceptadas... "),t.k0s())}function Mt(e,i){if(1&e&&t.nrm(0,"img",28),2&e){const n=t.XpG().$implicit,o=t.XpG();t.Y8G("src",o.getImagenSrc(n),t.B4B)}}function Ot(e,i){1&e&&(t.j41(0,"div",29),t.EFF(1,"Sin imagen"),t.k0s())}function kt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.copiarSubasta(a))}),t.EFF(1," Copiar "),t.k0s()}}function Pt(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",31)(1,"div",32),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit;return t.Njj(a.showModal=!1)}),t.k0s(),t.j41(2,"div",33)(3,"div",34)(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"button",35),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit;return t.Njj(a.showModal=!1)}),t.EFF(7,"\xd7"),t.k0s()(),t.j41(8,"div",36)(9,"p")(10,"b"),t.EFF(11,"N\xb0 Subasta:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"p")(14,"b"),t.EFF(15,"Fecha:"),t.k0s(),t.EFF(16),t.nI1(17,"date"),t.k0s(),t.j41(18,"p")(19,"b"),t.EFF(20,"Hora:"),t.k0s(),t.EFF(21),t.k0s(),t.j41(22,"p")(23,"b"),t.EFF(24,"Duraci\xf3n:"),t.k0s(),t.EFF(25),t.k0s(),t.j41(26,"p")(27,"b"),t.EFF(28,"Contacto:"),t.k0s(),t.EFF(29),t.k0s(),t.j41(30,"p")(31,"b"),t.EFF(32,"Ciudad:"),t.k0s(),t.EFF(33),t.k0s(),t.j41(34,"p")(35,"b"),t.EFF(36,"Tel\xe9fono:"),t.k0s(),t.EFF(37),t.k0s(),t.j41(38,"p")(39,"b"),t.EFF(40,"Observaciones:"),t.k0s(),t.EFF(41),t.k0s()()()()}if(2&e){const n=t.XpG().$implicit;t.R7$(5),t.JRh(n.planta),t.R7$(7),t.SpI(" ",n.numeroSubasta||"-",""),t.R7$(4),t.SpI(" ",t.i5U(17,10,n.fechaEvento,"dd/MM/yyyy"),""),t.R7$(5),t.Lme(" ",n.horaInicioAsignada||"-"," - ",n.horaFinAsignada||"-",""),t.R7$(4),t.SpI(" ",n.duracionSubastaMinutos," min"),t.R7$(4),t.SpI(" ",n.username,""),t.R7$(4),t.SpI(" ",n.city,""),t.R7$(4),t.SpI(" ",n.phone,""),t.R7$(4),t.SpI(" ",n.observaciones,"")}}function Ft(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",13)(1,"label",14),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.zoom(r))}),t.j41(2,"span",15),t.EFF(3),t.k0s(),t.DNE(4,Mt,1,1,"img",16),t.DNE(5,Ot,2,0,"ng-template",null,17,t.C5r),t.k0s(),t.j41(7,"div",18)(8,"h3",19),t.EFF(9),t.k0s(),t.j41(10,"div",20)(11,"span",21),t.EFF(12),t.k0s(),t.j41(13,"span",22),t.EFF(14,"ACEPTADA"),t.k0s()(),t.j41(15,"p",23),t.EFF(16,"Subastador: "),t.j41(17,"b"),t.EFF(18),t.k0s()()(),t.j41(19,"div",24)(20,"button",25),t.bIt("click",function(){const r=t.eBV(n).$implicit;return t.Njj(r.showModal=!0)}),t.EFF(21," Ver detalle "),t.k0s(),t.DNE(22,kt,2,0,"button",26),t.k0s(),t.DNE(23,Pt,42,13,"div",27),t.k0s()}if(2&e){const n=i.$implicit,o=t.sdS(6),a=t.XpG();t.R7$(3),t.SpI("#",n.numeroSubasta||"-",""),t.R7$(1),t.Y8G("ngIf",a.getImagenSrc(n))("ngIfElse",o),t.R7$(5),t.JRh(n.planta),t.R7$(3),t.SpI("S/ ",n.precioBase,""),t.R7$(6),t.JRh(n.username),t.R7$(4),t.Y8G("ngIf",n.numeroSubasta),t.R7$(1),t.Y8G("ngIf",n.showModal)}}function Et(e,i){1&e&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No hay subastas aceptadas"),t.k0s()())}function jt(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.showZoom=!1)}),t.nrm(1,"div",38),t.j41(2,"img",39),t.bIt("click",function(a){return a.stopPropagation()}),t.k0s(),t.j41(3,"button",40),t.EFF(4,"\xd7"),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(2),t.Y8G("src",n.zoomSrc,t.B4B)}}let yt=(()=>{class e{constructor(n,o,a){this.adminService=n,this.router=o,this.route=a,this.subastas=[],this.generando=!1,this.cargando=!1,this.showZoom=!1,this.zoomSrc=""}ngOnInit(){this.eventoId=Number(this.route.snapshot.paramMap.get("idEvento")),this.cargarSubastasAceptadas()}cargarSubastasAceptadas(){this.cargando=!0,this.adminService.listarSubastasAceptadas().subscribe(n=>{this.subastas=n.filter(o=>o.eventoId===this.eventoId).sort((o,a)=>(o.numeroSubasta??0)-(a.numeroSubasta??0)),this.cargando=!1},()=>this.cargando=!1)}Generar(){this.generando||(this.generando=!0,this.adminService.organizarSubastas(this.eventoId).subscribe({next:()=>{this.cargarSubastasAceptadas(),this.generando=!1},error:()=>{alert("Debes cerrar el evento antes de generar las subastas."),this.generando=!1}}))}volver(){this.router.navigate(["/components/eventos"])}zoom(n){n.imagen&&(this.zoomSrc=n.imagen,this.showZoom=!0)}copiarSubasta(n){const o=n.fechaEvento??"-",a=_=>{if(!_)return"-";const[f,mn]=_.split(":").map(Number),_n=f>=12?"pm":"am";return`${f%12||12}:${mn.toString().padStart(2,"0")} ${_n}`},r=a(n.horaInicioAsignada),s=a(n.horaFinAsignada);navigator.clipboard.writeText(`*\u{1f331}\u146d\u144c\u148d\u15e9 \u1455\u15e9\u1587\u144e\xed\u142f\u15dd\u1587\u15e9 N\xb0 ${n.numeroSubasta||"-"}*\n\n\u{1f4c5} Fecha: ${o}\n\n\u23f0 Hora: ${r} \u2013 ${s}\n\n\u23f3 Tiempo: ${n.duracionSubastaMinutos??"-"} minutos\n\n\u{1f464} Subastador: \n${n.username||"-"}\n\n\u{1f4de} Contacto: \n${n.phone||"-"}\n\n\u{1f4cd} Procedencia: \n${n.city||"-"}\n\n\u{1f33f} Planta en subasta: \n${n.planta||"-"}\n\n\u{1fab4} Tama\xf1o de maceta: \n${n.maceta||"-"}\n\n\u{1f4b0} Precio base: \nS/ ${n.precioBase??"-"}\n\n\u{1f4dd} Observaciones: \n${n.observaciones||"-"}\n\n\u{1f30d} Global Carnivora Network \u2013 \u{1d4db}\u{1d4ea} \u{1d4df}\u{1d4fe}\u{1d4f3}\u{1d4ea} \u{1d4d2}\u{1d4ea}\u{1d4fb}\u{1d4f7}\xed\u{1d4ff}\u{1d4f8}\u{1d4fb}\u{1d4ea} \u{1f331}`),n.imagen&&fetch(n.imagen).then(_=>_.blob()).then(_=>{const f=document.createElement("a");f.href=URL.createObjectURL(_),f.download=`subasta_${n.numeroSubasta||"imagen"}.jpg`,f.click(),URL.revokeObjectURL(f.href)}).catch(()=>console.error("No se pudo descargar la imagen"))}getImagenSrc(n){return n.imagen||null}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(F),t.rXU(g.Ix),t.rXU(g.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-subastas-aceptadas"]],decls:20,vars:7,consts:[[1,"organizar-container"],[1,"organizar-header"],[1,"header-left"],[1,"evento-id"],[1,"btn-secundario",3,"disabled","click"],[1,"contador-subastas"],[1,"label"],[1,"valor"],[1,"lista-subastas"],["class","estado-lista",4,"ngIf"],["class","fila-subasta",4,"ngFor","ngForOf"],["class","zoom-image",3,"click",4,"ngIf"],[1,"estado-lista"],[1,"fila-subasta"],[1,"img-box",3,"click"],[1,"badge-numero"],[3,"src",4,"ngIf","ngIfElse"],["noImg",""],[1,"info"],[1,"planta"],[1,"precio-row"],[1,"precio"],[1,"estado","estado-aceptado"],[1,"sub"],[1,"acciones"],[1,"btn-detalle","primary",3,"click"],["class","btn-whatsapp",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[3,"src"],[1,"img-empty"],[1,"btn-whatsapp",3,"click"],[1,"modal"],[1,"modal-bg",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"zoom-image",3,"click"],[1,"zoom-image-bg"],[3,"src","click"],[1,"zoom-close"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2),t.nrm(3,"app-volver"),t.j41(4,"h2"),t.EFF(5,"Subastas Aceptadas"),t.k0s(),t.j41(6,"span",3),t.EFF(7,"Listado general"),t.k0s()(),t.j41(8,"button",4),t.bIt("click",function(){return a.Generar()}),t.EFF(9),t.k0s()(),t.j41(10,"div",5)(11,"span",6),t.EFF(12,"N\xfamero de subastas"),t.k0s(),t.j41(13,"span",7),t.EFF(14),t.k0s()(),t.j41(15,"div",8),t.DNE(16,Ct,2,0,"p",9),t.DNE(17,Ft,24,8,"div",10),t.DNE(18,Et,3,0,"div",9),t.k0s(),t.DNE(19,jt,5,1,"div",11),t.k0s()),2&o&&(t.R7$(8),t.Y8G("disabled",a.generando),t.R7$(1),t.SpI(" ",a.generando?"Generando...":"Generar subastas"," "),t.R7$(5),t.JRh(a.subastas.length),t.R7$(2),t.Y8G("ngIf",a.cargando),t.R7$(1),t.Y8G("ngForOf",a.subastas),t.R7$(1),t.Y8G("ngIf",!a.cargando&&!a.subastas.length),t.R7$(1),t.Y8G("ngIf",a.showZoom))},dependencies:[c.Sq,c.bT,m,c.vh],styles:[".organizar-container[_ngcontent-%COMP%]{max-width:1300px;margin:30px auto;font-family:Roboto,Helvetica Neue,sans-serif;padding:0 20px}.organizar-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:50;display:flex;justify-content:space-between;align-items:center;padding:20px 0;margin-bottom:30px;background:var(--color-bg);border-bottom:2px solid var(--color-border)}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:26px;font-weight:700;color:var(--color-title)}.organizar-header[_ngcontent-%COMP%]   .evento-id[_ngcontent-%COMP%]{font-size:15px;color:var(--color-text-muted)}.btn-secundario[_ngcontent-%COMP%]{padding:12px 24px;border-radius:14px;background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;font-size:15px;font-weight:600;cursor:pointer;box-shadow:0 8px 20px #00000026;transition:.25s}.btn-secundario[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light);transform:translateY(-2px)}.contador-subastas[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:14px;background:var(--color-bg-alt);border:1px solid var(--color-border);font-weight:600;margin:-20px 0 24px auto;box-shadow:0 4px 12px #00000014}.contador-subastas[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:var(--color-text-muted)}.contador-subastas[_ngcontent-%COMP%]   .valor[_ngcontent-%COMP%]{font-size:18px;color:var(--color-primary)}.lista-subastas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.fila-subasta[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr 200px;gap:20px;background:var(--color-bg);padding:22px;border-radius:20px;border:1px solid var(--color-border);align-items:center;transition:.3s}.fila-subasta[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #00000014}.img-box[_ngcontent-%COMP%]{width:100%;height:160px;border-radius:16px;overflow:hidden;cursor:pointer;border:1px solid var(--color-border);position:relative;display:flex;align-items:center;justify-content:center;background:var(--color-bg-alt)}.img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.img-empty[_ngcontent-%COMP%]{font-size:13px;color:var(--color-text-muted)}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:6px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:19px;font-weight:600;color:var(--color-title)}.precio-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.precio[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--color-primary)}.sub[_ngcontent-%COMP%]{font-size:13px;color:var(--color-text-muted)}.estado[_ngcontent-%COMP%]{font-weight:600;padding:5px 12px;border-radius:999px;font-size:12px;text-transform:uppercase}.estado-aceptado[_ngcontent-%COMP%]{background:var(--color-estado-aceptado);color:var(--color-secondary)}.acciones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start}.btn-detalle.primary[_ngcontent-%COMP%], .btn-whatsapp[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;box-sizing:border-box}.btn-detalle.primary[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:10px 20px;border-radius:999px;font-size:14px;font-weight:600;cursor:pointer;transition:.25s}.btn-detalle.primary[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light);transform:translateY(-2px)}.btn-whatsapp[_ngcontent-%COMP%]{background:var(--color-bg);color:var(--color-btn-primary);border:3px solid var(--color-btn-primary);padding:10px 18px;border-radius:999px;font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:.25s}.btn-whatsapp[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light);color:var(--color-bg);border:3px solid var(--color-btn-primary-light)}.badge-numero[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background:var(--color-bg);border:1px solid var(--color-border);padding:5px 12px;border-radius:999px;font-size:12px;font-weight:600;z-index:2}.estado-lista[_ngcontent-%COMP%]{margin:40px 0;padding:28px 20px;border-radius:18px;border:2px dashed var(--color-primary);background:var(--color-bg-alt);text-align:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.estado-lista[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:var(--color-text-muted)}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_fadeIn .25s ease}.modal-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.55);z-index:1;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:16px;max-width:540px;width:95%;max-height:90vh;overflow-y:auto;z-index:2;position:relative;padding:24px;box-shadow:0 8px 24px #0000002e}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:24px;font-weight:600;cursor:pointer}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:15px;line-height:1.5;color:var(--color-text)}.zoom-image[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:3000;cursor:zoom-out}.zoom-image-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.7);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1}.zoom-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:12px;z-index:2;animation:_ngcontent-%COMP%_zoomIn .2s ease-out;cursor:default}.zoom-close[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:3;font-size:28px;color:#fff;background:rgba(0,0,0,.35);border:none;border-radius:50%;width:40px;height:40px;line-height:36px;text-align:center;cursor:pointer}.zoom-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.8);transform:scale(1.1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_zoomIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}@media (max-width: 1200px){.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:180px 1fr 180px;gap:18px;padding:20px}.img-box[_ngcontent-%COMP%]{height:150px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.precio[_ngcontent-%COMP%]{font-size:17px}}@media (max-width: 992px){.organizar-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.btn-secundario[_ngcontent-%COMP%]{width:100%}.contador-subastas[_ngcontent-%COMP%]{margin:0 0 20px}.fila-subasta[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding:18px}.acciones[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.btn-detalle.primary[_ngcontent-%COMP%], .btn-whatsapp[_ngcontent-%COMP%]{width:100%;flex:unset}.modal-content[_ngcontent-%COMP%]{width:95%;margin:0 12px}.img-box[_ngcontent-%COMP%]{height:180px}}@media (max-width: 768px){.organizar-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.header-left[_ngcontent-%COMP%]{align-items:center}.fila-subasta[_ngcontent-%COMP%]{gap:14px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px}.precio[_ngcontent-%COMP%]{font-size:16px}.estado[_ngcontent-%COMP%]{font-size:12px;padding:4px 10px}.img-box[_ngcontent-%COMP%]{height:160px}}@media (max-width: 520px){.organizar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.precio[_ngcontent-%COMP%]{font-size:14px}.estado[_ngcontent-%COMP%], .badge-numero[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}.img-box[_ngcontent-%COMP%]{height:140px}.acciones[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.btn-detalle.primary[_ngcontent-%COMP%], .btn-whatsapp[_ngcontent-%COMP%]{width:100%;flex:unset}}"]})}}return e})();class It{constructor(){this.id=0,this.username="",this.password="",this.roles=[],this.name="",this.lastName="",this.phone="",this.city="",this.email="",this.enabled=!0}}const wt=x.c.base;let w=(()=>{class e{constructor(n){this.http=n,this.url=`${wt}/mydata`,this.userChange=new P.B}getMyData(){let n=sessionStorage.getItem("token");return this.http.get(this.url,{headers:(new l.Lr).set("Authorization",`Bearer ${n}`).set("Content-Type","application/json")}).pipe((0,v.W)(this.handleError))}setUserChange(n){this.userChange.next(n)}getUserChange(){return this.userChange.asObservable()}handleError(n){let o="Ocurri\xf3 un error desconocido";return 401===n.status?o="No autorizado":404===n.status&&(o="Usuario no encontrado"),(0,C.$)(()=>o)}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function St(e,i){if(1&e&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(1),t.JRh(n.error)}}function zt(e,i){if(1&e&&(t.j41(0,"span",17),t.EFF(1),t.k0s()),2&e){const n=i.$implicit;t.R7$(1),t.SpI(" ",n," ")}}function Rt(e,i){if(1&e&&(t.j41(0,"div",11)(1,"div",12)(2,"div",13),t.EFF(3,"Tel\xe9fono"),t.k0s(),t.j41(4,"div",14),t.EFF(5),t.k0s()(),t.j41(6,"div",12)(7,"div",13),t.EFF(8,"Ciudad"),t.k0s(),t.j41(9,"div",14),t.EFF(10),t.k0s()(),t.j41(11,"div",15)(12,"div",13),t.EFF(13,"Roles"),t.k0s(),t.j41(14,"div",14),t.DNE(15,zt,2,1,"span",16),t.k0s()()()),2&e){const n=t.XpG(2);t.R7$(5),t.JRh(n.user.phone),t.R7$(5),t.JRh(n.user.city),t.R7$(5),t.Y8G("ngForOf",n.user.roles)}}function $t(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.EFF(3),t.k0s(),t.j41(4,"div",5)(5,"h2"),t.EFF(6),t.k0s(),t.j41(7,"p",6),t.EFF(8),t.k0s()(),t.j41(9,"button",7),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.logout())}),t.EFF(10),t.k0s()(),t.DNE(11,St,2,1,"div",8),t.DNE(12,Rt,16,3,"div",9),t.k0s()}if(2&e){const n=t.XpG();t.R7$(3),t.Lme(" ",n.user.name.charAt(0),"",n.user.lastName.charAt(0)," "),t.R7$(3),t.Lme("",n.user.name," ",n.user.lastName,""),t.R7$(2),t.JRh(n.user.username),t.R7$(1),t.Y8G("disabled",n.closing),t.R7$(1),t.SpI(" ",n.closing?"Cerrando sesi\xf3n\u2026":"Cerrar sesi\xf3n"," "),t.R7$(1),t.Y8G("ngIf",n.error),t.R7$(1),t.Y8G("ngIf",!n.error)}}function Tt(e,i){1&e&&(t.j41(0,"p",18),t.EFF(1,"Cargando informaci\xf3n..."),t.k0s())}let At=(()=>{class e{constructor(n,o){this.mydataService=n,this.router=o,this.user=new It,this.loading=!0,this.error="",this.closing=!1}ngOnInit(){this.loadUserData()}loadUserData(){this.loading=!0,this.mydataService.getMyData().subscribe({next:n=>{this.user=n,this.loading=!1},error:n=>{this.error=n,this.loading=!1}})}logout(){confirm("\xbfSeguro que deseas cerrar sesi\xf3n?")&&(this.closing=!0,sessionStorage.clear(),localStorage.clear(),setTimeout(()=>{this.router.navigate(["/login"])},600))}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(w),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-my-data"]],decls:4,vars:2,consts:[["class","dashboard-panel",4,"ngIf","ngIfElse"],["loadingTpl",""],[1,"dashboard-panel"],[1,"profile-top"],[1,"avatar"],[1,"profile-info"],[1,"username"],[1,"btn-logout",3,"disabled","click"],["class","error",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"error"],[1,"profile-content"],[1,"content-row"],[1,"content-label"],[1,"content-value"],[1,"content-row","roles-row"],["class","role-pill",4,"ngFor","ngForOf"],[1,"role-pill"],[1,"loading"]],template:function(o,a){if(1&o&&(t.nrm(0,"app-volver"),t.DNE(1,$t,13,9,"div",0),t.DNE(2,Tt,2,0,"ng-template",null,1,t.C5r)),2&o){const r=t.sdS(3);t.R7$(1),t.Y8G("ngIf",!a.loading)("ngIfElse",r)}},dependencies:[c.Sq,c.bT,m],styles:['.dashboard-panel[_ngcontent-%COMP%]{max-width:980px;margin:24px auto;padding:24px;font-family:Inter,Segoe UI,sans-serif;color:var(--color-text)}.profile-top[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:auto 1fr auto;gap:22px;align-items:center;padding:28px;border-radius:26px;background:linear-gradient(135deg,var(--color-bg),var(--color-bg-alt));box-shadow:0 14px 32px #0000001f;margin-bottom:28px;overflow:hidden}.profile-top[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:auto -40% -60% auto;width:240px;height:240px;background:radial-gradient(circle,var(--color-btn-primary),transparent 70%);opacity:.18}.avatar[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:50%;background:linear-gradient(135deg,var(--color-btn-primary),var(--color-btn-primary-light));color:#fff;font-size:32px;font-weight:800;display:flex;align-items:center;justify-content:center;letter-spacing:1px;box-shadow:0 10px 20px #00000040}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:var(--color-title)}.profile-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:var(--color-text-muted)}.btn-logout[_ngcontent-%COMP%]{align-self:flex-start;background:#fee2e2;color:var(--color-estado-rechazado);border:none;padding:12px 18px;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:0 6px 14px #00000026}.btn-logout[_ngcontent-%COMP%]:hover{background:#fecaca}.profile-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:18px}.content-row[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:20px;padding:18px 20px;display:flex;flex-direction:column;gap:6px;box-shadow:0 8px 18px #0000000f;position:relative}.content-row[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:6px;height:100%;border-radius:20px 0 0 20px;background:var(--color-btn-primary);opacity:.35}.content-label[_ngcontent-%COMP%]{font-size:12px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;color:var(--color-text-muted)}.content-value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--color-text)}.roles-row[_ngcontent-%COMP%]{grid-column:1 / -1}.roles-row[_ngcontent-%COMP%]   .content-value[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px}.role-pill[_ngcontent-%COMP%]{padding:8px 14px;border-radius:999px;background:linear-gradient(135deg,var(--color-btn-secondary),var(--color-bg-alt));font-size:12px;font-weight:700;color:var(--color-primary);box-shadow:0 4px 10px #0000001f}.error[_ngcontent-%COMP%]{margin:20px 0;padding:18px;border-radius:18px;background:#fee2e2;color:var(--color-estado-rechazado);font-weight:700;text-align:center;box-shadow:0 6px 14px #00000026}.loading[_ngcontent-%COMP%]{margin:48px 0;text-align:center;font-size:16px;font-weight:700;color:var(--color-text-muted)}@media (max-width:820px){.profile-top[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}.avatar[_ngcontent-%COMP%]{margin:0 auto}.btn-logout[_ngcontent-%COMP%]{width:100%}.profile-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return e})();function Dt(e,i){if(1&e&&(t.j41(0,"p",21),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.SpI(" ","ABIERTO"===n.eventoActivo.estado?"Evento disponible":"Evento cerrado"," ")}}function Nt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.go("/components/subastas"))}),t.EFF(1,"Crear subasta"),t.k0s()}}function Gt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.goOrganizarEvento())}),t.EFF(1,"Administrar eventos"),t.k0s()}}function Bt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.go("/components/revision-solicitudes"))}),t.EFF(1,"Aprobar subastadores"),t.k0s()}}function Xt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.go("/components/subastas"))}),t.EFF(1,"Crear subasta"),t.k0s()}}function Vt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.goOrganizarEvento())}),t.EFF(1,"Administrar eventos"),t.k0s()}}function Yt(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.go("/components/revision-solicitudes"))}),t.EFF(1,"Aprobar subastadores"),t.k0s()}}function Ut(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",24)(1,"button",25),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.go("/components/ver-subastas"))}),t.EFF(2,"Mis subastas"),t.k0s(),t.DNE(3,Xt,2,0,"button",26),t.DNE(4,Vt,2,0,"button",27),t.DNE(5,Yt,2,0,"button",28),t.k0s()}if(2&e){const n=t.XpG();t.R7$(3),t.Y8G("ngIf","ABIERTO"===(null==n.eventoActivo?null:n.eventoActivo.estado)),t.R7$(1),t.Y8G("ngIf",n.isAdmin()),t.R7$(1),t.Y8G("ngIf",n.isAdmin())}}function Lt(e,i){if(1&e&&(t.j41(0,"div",31)(1,"span"),t.EFF(2,"Evento"),t.k0s(),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.j41(5,"small"),t.EFF(6),t.nI1(7,"date"),t.k0s()()),2&e){const n=t.XpG();t.R7$(4),t.JRh(n.eventoActivo.nombre),t.R7$(2),t.Lme("",t.i5U(7,3,n.eventoActivo.fechaEvento,"dd/MM/yyyy")," - ",n.eventoActivo.horaInicio,"")}}function Ht(e,i){if(1&e&&(t.j41(0,"div",32)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.j41(5,"small"),t.EFF(6),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.JRh(n.tituloTiempo),t.R7$(2),t.JRh(n.tiempoRestante),t.R7$(2),t.SpI("Duraci\xf3n por subasta: ",n.eventoActivo.duracionSubastaMinutos," minutos")}}function qt(e,i){1&e&&(t.j41(0,"div",33)(1,"strong"),t.EFF(2,"Subastas en revisi\xf3n"),t.k0s(),t.j41(3,"p"),t.EFF(4,"A\xfan hay subastas pendientes de evaluaci\xf3n."),t.k0s()())}function Jt(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",34)(1,"strong"),t.EFF(2,"Subastas revisadas"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Todas tus subastas ya fueron evaluadas."),t.k0s(),t.j41(5,"button",29),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.go("/components/ver-subastas"))}),t.EFF(6,"Ver mis subastas"),t.k0s()()}}let Zt=(()=>{class e{constructor(n,o,a,r){this.mydata=n,this.eventoService=o,this.subastaService=a,this.router=r,this.showMenu=!1,this.subastas=[],this.totalSubastas=0,this.subastasPendientes=0,this.subastasAceptadas=0,this.subastasRechazadas=0,this.eventoActivo=null,this.tiempoRestante="",this.tituloTiempo=""}ngOnInit(){this.mydata.getMyData().subscribe(n=>this.user=n),this.eventoService.list().subscribe(n=>{if(this.eventoActivo=n.find(a=>"ABIERTO"===a.estado)||null,!this.eventoActivo)return;const o=this.buildFechaHora(this.eventoActivo.fechaEvento,this.eventoActivo.horaInicio);this.iniciarContador(o),this.cargarSubastas(this.eventoActivo.id)})}ngOnDestroy(){this.timer&&clearInterval(this.timer)}go(n){this.router.navigate([n])}cargarSubastas(n){this.subastaService.listMisSubastas().subscribe(o=>{const a=o.filter(r=>r.eventoId===n);this.subastas=a,this.subastasPendientes=a.filter(r=>"PENDIENTE"===r.estado).length,this.subastasAceptadas=a.filter(r=>"ACEPTADA"===r.estado).length,this.subastasRechazadas=a.filter(r=>"RECHAZADA"===r.estado).length})}buildFechaHora(n,o){const[a,r,s]=n.toString().split("-").map(Number),[h,_]=o.split(":").map(Number);return new Date(a,r-1,s,h,_,0)}iniciarContador(n){const o=()=>{if("CERRADO"===this.eventoActivo?.estado)return this.tituloTiempo="Estado del evento",this.tiempoRestante="Evento cerrado",void clearInterval(this.timer);const a=n.getTime()-Date.now();if(a<=0)return this.tituloTiempo="Estado del evento",this.tiempoRestante="Evento en curso",void clearInterval(this.timer);this.tituloTiempo="Inicio del evento en";const r=Math.floor(a/36e5),s=Math.floor(a%36e5/6e4),h=Math.floor(a%6e4/1e3);this.tiempoRestante=`${r}h ${s}m ${h}s`};o(),this.timer=setInterval(o,1e3)}isAdmin(){return this.user?.roles?.includes("ADMIN")}goOrganizarEvento(){this.router.navigate(["/components/eventos"])}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(w),t.rXU(M),t.rXU(O),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-dashboard"]],decls:44,vars:15,consts:[[1,"dashboard"],[1,"topbar"],[1,"topbar-left"],["class","subtitle",4,"ngIf"],[1,"top-actions"],[1,"btn-primary","desktop-only",3,"click"],["class","btn-secondary desktop-only",3,"click",4,"ngIf"],["class","btn-evento desktop-only",3,"click",4,"ngIf"],["class","btn-primary desktop-only",3,"click",4,"ngIf"],[1,"hamburger","mobile-only",3,"click"],[1,"profile-icon",3,"click"],["class","mobile-menu",4,"ngIf"],[1,"grid"],["class","block wide info",4,"ngIf"],["class","block wide timer",4,"ngIf"],[1,"block"],[1,"block","success"],[1,"block","warning"],[1,"block","danger"],["class","block wide neutral",4,"ngIf"],["class","block wide action",4,"ngIf"],[1,"subtitle"],[1,"btn-secondary","desktop-only",3,"click"],[1,"btn-evento","desktop-only",3,"click"],[1,"mobile-menu"],[1,"btn-primary",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-evento",3,"click",4,"ngIf"],["class","btn-primary",3,"click",4,"ngIf"],[1,"btn-secondary",3,"click"],[1,"btn-evento",3,"click"],[1,"block","wide","info"],[1,"block","wide","timer"],[1,"block","wide","neutral"],[1,"block","wide","action"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4),t.k0s(),t.DNE(5,Dt,2,1,"p",3),t.k0s(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return a.go("/components/ver-subastas")}),t.EFF(8,"Mis subastas"),t.k0s(),t.DNE(9,Nt,2,0,"button",6),t.DNE(10,Gt,2,0,"button",7),t.DNE(11,Bt,2,0,"button",8),t.j41(12,"div",9),t.bIt("click",function(){return a.showMenu=!a.showMenu}),t.EFF(13,"\u2261"),t.k0s(),t.j41(14,"div",10),t.bIt("click",function(){return a.go("/components/perfil")}),t.EFF(15),t.k0s()(),t.DNE(16,Ut,6,3,"div",11),t.k0s(),t.j41(17,"div",12),t.DNE(18,Lt,8,6,"div",13),t.DNE(19,Ht,7,3,"div",14),t.j41(20,"div",15)(21,"span"),t.EFF(22,"Total enviadas"),t.k0s(),t.j41(23,"strong"),t.EFF(24),t.k0s(),t.j41(25,"small"),t.EFF(26,"Esta semana"),t.k0s()(),t.j41(27,"div",16)(28,"span"),t.EFF(29,"Aceptadas"),t.k0s(),t.j41(30,"strong"),t.EFF(31),t.k0s()(),t.j41(32,"div",17)(33,"span"),t.EFF(34,"Pendientes"),t.k0s(),t.j41(35,"strong"),t.EFF(36),t.k0s()(),t.j41(37,"div",18)(38,"span"),t.EFF(39,"Rechazadas"),t.k0s(),t.j41(40,"strong"),t.EFF(41),t.k0s()(),t.DNE(42,qt,5,0,"div",19),t.DNE(43,Jt,7,0,"div",20),t.k0s()()),2&o&&(t.R7$(4),t.SpI("Hola, ",null==a.user?null:a.user.name,""),t.R7$(1),t.Y8G("ngIf",a.eventoActivo),t.R7$(4),t.Y8G("ngIf","ABIERTO"===(null==a.eventoActivo?null:a.eventoActivo.estado)),t.R7$(1),t.Y8G("ngIf",a.isAdmin()),t.R7$(1),t.Y8G("ngIf",a.isAdmin()),t.R7$(4),t.JRh(null==a.user||null==a.user.name?null:a.user.name.charAt(0)),t.R7$(1),t.Y8G("ngIf",a.showMenu),t.R7$(2),t.Y8G("ngIf",a.eventoActivo),t.R7$(1),t.Y8G("ngIf",a.eventoActivo),t.R7$(5),t.JRh(a.subastas.length),t.R7$(7),t.JRh(a.subastasAceptadas),t.R7$(5),t.JRh(a.subastasPendientes),t.R7$(5),t.JRh(a.subastasRechazadas),t.R7$(1),t.Y8G("ngIf",a.subastasPendientes>0),t.R7$(1),t.Y8G("ngIf",0===a.subastasPendientes&&a.subastas.length>0))},dependencies:[c.bT,c.vh],styles:[".dashboard[_ngcontent-%COMP%]{max-width:1280px;margin:auto;padding:32px;box-sizing:border-box}.topbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;flex-wrap:wrap;position:relative}.topbar-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;color:var(--color-title)}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--color-subtitle)}.top-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap;position:relative}.btn-group[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.profile-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:var(--color-btn-primary);color:#fff;font-size:18px;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:20}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:22px}.block[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:18px;padding:22px;display:flex;flex-direction:column;gap:6px}.block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--color-subtitle)}.block[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:32px;font-weight:600;color:var(--color-title)}.block[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px;color:var(--color-subtitle)}.block.wide[_ngcontent-%COMP%]{grid-column:span 2}.block.success[_ngcontent-%COMP%]{background:var(--color-estado-aceptado)}.block.warning[_ngcontent-%COMP%]{background:#fffbeb}.block.danger[_ngcontent-%COMP%]{background:#fef2f2}.block.neutral[_ngcontent-%COMP%]{background:var(--color-bg-alt)}.block.action[_ngcontent-%COMP%]{background:var(--color-success)}.block.timer[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-bg-alt),#eefdf7)}.block.timer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:26px}.block.action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .block.neutral[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:14px;color:var(--color-text-muted)}.btn-primary[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light);border:none;padding:12px 20px;border-radius:12px;font-size:14px;cursor:pointer}.btn-evento[_ngcontent-%COMP%]{background:var(--color-btn-secondary);color:var(--color-btn-primary);border:2px solid var(--color-btn-primary);padding:12px 20px;border-radius:12px;font-size:14px;cursor:pointer;transition:all .2s ease}.btn-evento[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary);color:var(--color-btn-secondary)}.btn-secondary[_ngcontent-%COMP%]{background:var(--color-btn-secondary);color:var(--color-text);border:1px solid var(--color-border);padding:12px 18px;border-radius:12px;font-size:14px;cursor:pointer}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 900px){.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.block.wide[_ngcontent-%COMP%]{grid-column:span 2}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 520px){.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.topbar[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}.topbar-left[_ngcontent-%COMP%]{flex:1}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.subtitle[_ngcontent-%COMP%]{font-size:12px}.top-actions[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:12px;position:relative}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline-flex;font-size:28px;cursor:pointer;background:none;border:none;padding:4px 8px;z-index:20}.mobile-menu[_ngcontent-%COMP%]{position:absolute;top:60px;right:0;background:var(--color-bg);border:1px solid var(--color-border);border-radius:12px;display:flex;flex-direction:column;gap:8px;padding:12px;width:180px;box-shadow:0 4px 12px #0000001a;z-index:10}.mobile-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.block.wide[_ngcontent-%COMP%]{grid-column:span 2}.block[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:24px}.block.timer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px}}"]})}}return e})();var b=u(3873);let Qt=(()=>{class e{constructor(n){this.router=n}volverHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-sin-acceso"]],decls:7,vars:0,consts:[[1,"sin-acceso-container"],[3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"\u{1f615} Parece que te perdiste"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No tienes permisos para acceder a esta p\xe1gina."),t.k0s(),t.j41(5,"button",1),t.bIt("click",function(){return a.volverHome()}),t.EFF(6,"Volver al inicio"),t.k0s()())},styles:[".sin-acceso-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;text-align:center;padding:20px;color:var(--color-title)}.sin-acceso-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:15px}.sin-acceso-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;color:var(--color-subtitle)}.sin-acceso-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:var(--color-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:.2s}.sin-acceso-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00008b}"]})}}return e})();const Kt=x.c.base;let S=(()=>{class e{constructor(n){this.http=n,this.url=Kt}getHeaders(){const n=sessionStorage.getItem("token");return(new l.Lr).set("Authorization",`Bearer ${n}`).set("Content-Type","application/json")}solicitarSubastador(){return this.http.post(`${this.url}/users/request-subastador`,{},{headers:this.getHeaders()})}listarPendientes(){return this.http.get(`${this.url}/users/admin/subastadores-pendientes`,{headers:this.getHeaders()})}aprobar(n){return this.http.post(`${this.url}/users/admin/approve/${n}`,{},{headers:this.getHeaders()})}rechazar(n){return this.http.post(`${this.url}/users/admin/reject/${n}`,{},{headers:this.getHeaders()})}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Wt(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",4)(1,"div",5),t.EFF(2,"\u{1f389}"),t.k0s(),t.j41(3,"h2"),t.EFF(4,"\xa1Felicidades!"),t.k0s(),t.j41(5,"p"),t.EFF(6," Fuiste aceptado como uno de los subastadores de la comunidad. "),t.k0s(),t.j41(7,"p",6),t.EFF(8," Para desbloquear tus herramientas, vuelve a iniciar sesi\xf3n. "),t.k0s(),t.j41(9,"button",7),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.logout())}),t.EFF(10),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(9),t.Y8G("disabled",n.closing),t.R7$(1),t.SpI(" ",n.closing?"Cerrando sesi\xf3n\u2026":"Cerrar sesi\xf3n"," ")}}function tn(e,i){1&e&&(t.j41(0,"div",14),t.EFF(1," Estamos revisando tu solicitud, gracias por tu paciencia. "),t.k0s())}function nn(e,i){if(1&e){const n=t.RV6();t.j41(0,"label",15)(1,"input",16),t.bIt("ngModelChange",function(a){t.eBV(n);const r=t.XpG(2);return t.Njj(r.accepted=a)}),t.k0s(),t.j41(2,"span"),t.EFF(3,"Acepto los t\xe9rminos y condiciones de la comunidad"),t.k0s()()}if(2&e){const n=t.XpG(2);t.R7$(1),t.Y8G("ngModel",n.accepted)}}function en(e,i){if(1&e&&(t.j41(0,"p",17),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(1),t.SpI(" ",n.message," ")}}function on(e,i){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"h2"),t.EFF(2,"Solicitud para ser subastador"),t.k0s(),t.j41(3,"p",8),t.EFF(4," Antes de continuar, lee atentamente los siguientes requisitos. "),t.k0s(),t.j41(5,"ul",9)(6,"li"),t.EFF(7,"Todos tus datos deben ser reales y verificables."),t.k0s(),t.j41(8,"li"),t.EFF(9,"La solicitud ser\xe1 revisada manualmente por los administradores."),t.k0s(),t.j41(10,"li"),t.EFF(11,"Podr\xedan contactarte para una entrevista o validaci\xf3n adicional."),t.k0s(),t.j41(12,"li"),t.EFF(13,"Al enviar la solicitud aceptas los t\xe9rminos y normas de la comunidad."),t.k0s()(),t.DNE(14,tn,2,0,"div",10),t.DNE(15,nn,4,1,"label",11),t.j41(16,"button",12),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.solicitar())}),t.EFF(17),t.k0s(),t.DNE(18,en,2,1,"p",13),t.bVm()}if(2&e){const n=t.XpG();t.R7$(14),t.Y8G("ngIf",n.tieneSolicitudPendiente),t.R7$(1),t.Y8G("ngIf",!n.tieneSolicitudPendiente),t.R7$(1),t.Y8G("disabled",n.loading||!n.accepted||n.tieneSolicitudPendiente),t.R7$(1),t.SpI(" ",n.loading?"Enviando solicitud...":"Enviar solicitud"," "),t.R7$(1),t.Y8G("ngIf",n.message&&!n.tieneSolicitudPendiente)}}function rn(e,i){1&e&&(t.j41(0,"p",4),t.EFF(1,"Cargando..."),t.k0s())}function sn(e,i){1&e&&(t.j41(0,"p",5),t.EFF(1," No hay solicitudes pendientes "),t.k0s())}function cn(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",8)(1,"div",9)(2,"h3"),t.EFF(3),t.k0s()(),t.j41(4,"div",10)(5,"span")(6,"strong"),t.EFF(7,"Email:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"span")(10,"strong"),t.EFF(11,"Nombre:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"span")(14,"strong"),t.EFF(15,"Apellido:"),t.k0s(),t.EFF(16),t.k0s(),t.j41(17,"span")(18,"strong"),t.EFF(19,"Tel\xe9fono:"),t.k0s(),t.EFF(20),t.k0s(),t.j41(21,"span")(22,"strong"),t.EFF(23,"Ciudad:"),t.k0s(),t.EFF(24),t.k0s()(),t.j41(25,"div",11)(26,"button",12),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.aprobar(r.id))}),t.EFF(27,"Aprobar"),t.k0s(),t.j41(28,"button",13),t.bIt("click",function(){const r=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.rechazar(r.id))}),t.EFF(29,"Rechazar"),t.k0s()()()}if(2&e){const n=i.$implicit;t.R7$(3),t.Lme("",n.name," ",n.lastName,""),t.R7$(5),t.SpI(" ",n.username,""),t.R7$(4),t.SpI(" ",n.name,""),t.R7$(4),t.SpI(" ",n.lastName,""),t.R7$(4),t.SpI(" ",n.phone,""),t.R7$(4),t.SpI(" ",n.city,"")}}function dn(e,i){if(1&e&&(t.j41(0,"div",6),t.DNE(1,cn,30,7,"div",7),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("ngForOf",n.pendientes)}}const gn=[{path:"",component:z.B},{path:"no-autorizado",component:Qt},{path:"eventos",component:V,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"subastas",component:I,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"subastas/:id",component:I,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"ver-subastas",component:rt,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"detalles",component:lt,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"organizar-subastas/:idEvento",component:vt,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"subastas-aceptadas/:idEvento",component:yt,canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"perfil",component:At,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"dashboard",component:Zt,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}},{path:"solicitud-subastador",component:(()=>{class e{constructor(n,o,a){this.solicitudService=n,this.http=o,this.router=a,this.loading=!1,this.message="",this.accepted=!1,this.tieneSolicitudPendiente=!1,this.esSubastador=!1,this.closing=!1,this.baseUrl=x.c.base}ngOnInit(){this.cargarEstadoSolicitud()}getHeaders(){const n=sessionStorage.getItem("token");return(new l.Lr).set("Authorization",`Bearer ${n}`)}cargarEstadoSolicitud(){this.http.get(`${this.baseUrl}/users/details`,{headers:this.getHeaders()}).subscribe({next:n=>{const o=n.roles||[];this.tieneSolicitudPendiente=o.includes("SUBASTADOR_PENDIENTE"),this.esSubastador=o.includes("SUBASTADOR")}})}solicitar(){!this.accepted||this.tieneSolicitudPendiente||(this.loading=!0,this.message="",this.solicitudService.solicitarSubastador().subscribe({next:()=>{this.loading=!1,this.tieneSolicitudPendiente=!0,this.message="Tu solicitud fue enviada correctamente."},error:n=>{this.loading=!1,this.message=n.error?.message||"No se pudo enviar la solicitud"}}))}logout(){confirm("\xbfSeguro que deseas cerrar sesi\xf3n?")&&(this.closing=!0,sessionStorage.clear(),localStorage.clear(),setTimeout(()=>{this.router.navigate(["/login"])},600))}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(S),t.rXU(l.Qq),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-solicitud"]],decls:5,vars:2,consts:[[1,"solicitud-container"],[1,"card"],["class","success-box",4,"ngIf"],[4,"ngIf"],[1,"success-box"],[1,"icon"],[1,"hint"],[1,"btn-logout",3,"disabled","click"],[1,"subtitle"],[1,"rules"],["class","message info",4,"ngIf"],["class","check",4,"ngIf"],[3,"disabled","click"],["class","message",4,"ngIf"],[1,"message","info"],[1,"check"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"message"]],template:function(o,a){1&o&&(t.nrm(0,"app-volver"),t.j41(1,"div",0)(2,"div",1),t.DNE(3,Wt,11,2,"div",2),t.DNE(4,on,19,5,"ng-container",3),t.k0s()()),2&o&&(t.R7$(3),t.Y8G("ngIf",a.esSubastador),t.R7$(1),t.Y8G("ngIf",!a.esSubastador))},dependencies:[c.bT,p.Zm,p.BC,p.vS,m],styles:["h2[_ngcontent-%COMP%]{margin-bottom:8px;font-size:1.6rem;color:var(--color-title)}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-subtitle);margin-bottom:20px}.solicitud-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg-alt);padding:16px}.card[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:14px;padding:32px;max-width:520px;width:100%}h2[_ngcontent-%COMP%]{margin-bottom:8px;font-size:1.6rem;color:var(--color-title);text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-subtitle);margin-bottom:20px;text-align:center}.rules[_ngcontent-%COMP%]{padding-left:18px;margin-bottom:20px}.rules[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:10px;color:var(--color-text)}.check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:.9rem;margin-bottom:20px;color:var(--color-text)}.check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:16px;height:16px}button[_ngcontent-%COMP%]{width:100%;padding:14px;border-radius:10px;border:none;background:var(--color-btn-primary);color:var(--color-btn-text-light);font-size:1rem;font-weight:500;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background:var(--color-muted);cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{background:var(--color-btn-primary-light)}.message[_ngcontent-%COMP%]{margin-top:16px;font-size:.9rem;text-align:center;color:var(--color-primary)}.message.info[_ngcontent-%COMP%]{background:var(--color-bg-alt);border:1px solid var(--color-border);padding:12px;border-radius:8px}.success-box[_ngcontent-%COMP%]{text-align:center;padding:20px;border-radius:12px}.success-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:12px}.success-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--color-primary)}.success-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-text)}.success-box[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{margin-top:8px;font-size:.85rem;color:var(--color-text-muted)}.btn-logout[_ngcontent-%COMP%]{margin-top:24px;width:100%;padding:14px;border-radius:10px;border:none;background:var(--color-primary);color:var(--color-btn-text-light);font-size:1rem;cursor:pointer}.btn-logout[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.btn-logout[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}}return e})(),canActivate:[b.z],data:{roles:["USER"]}},{path:"revision-solicitudes",component:(()=>{class e{constructor(n){this.solicitudService=n,this.pendientes=[],this.loading=!1,this.message=""}ngOnInit(){this.cargarPendientes()}cargarPendientes(){this.loading=!0,this.solicitudService.listarPendientes().subscribe({next:n=>{this.pendientes=n,this.loading=!1},error:()=>{this.loading=!1,this.message="Error al cargar solicitudes"}})}aprobar(n){this.solicitudService.aprobar(n).subscribe(()=>{this.cargarPendientes()})}rechazar(n){this.solicitudService.rechazar(n).subscribe(()=>{this.cargarPendientes()})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(S))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-revision"]],decls:7,vars:3,consts:[[1,"revision-container"],["class","loading",4,"ngIf"],["class","no-data",4,"ngIf"],["class","users-list",4,"ngIf"],[1,"loading"],[1,"no-data"],[1,"users-list"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[1,"user-main"],[1,"user-info"],[1,"user-actions"],[1,"approve",3,"click"],[1,"reject",3,"click"]],template:function(o,a){1&o&&(t.nrm(0,"app-volver"),t.j41(1,"div",0)(2,"h2"),t.EFF(3,"Solicitudes de subastador"),t.k0s(),t.DNE(4,rn,2,0,"p",1),t.DNE(5,sn,2,0,"p",2),t.DNE(6,dn,2,1,"div",3),t.k0s()),2&o&&(t.R7$(4),t.Y8G("ngIf",a.loading),t.R7$(1),t.Y8G("ngIf",!a.loading&&0===a.pendientes.length),t.R7$(1),t.Y8G("ngIf",a.pendientes.length>0))},dependencies:[c.Sq,c.bT,m],styles:[".revision-container[_ngcontent-%COMP%]{max-width:1100px;margin:20px auto;padding:20px;font-family:Inter,Segoe UI,sans-serif;color:var(--color-text)}.revision-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:22px;font-weight:600;color:var(--color-title)}.loading[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{margin:30px 0;padding:24px;text-align:center;border-radius:16px;background:var(--color-bg);border:1px dashed var(--color-border);font-weight:600;color:var(--color-text-muted)}.users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.user-item[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:18px;padding:18px;display:grid;grid-template-columns:1fr 2fr auto;gap:16px;align-items:center;border:1px solid var(--color-border);box-shadow:0 6px 14px #0000000f}.user-main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:17px;font-weight:600;color:var(--color-title)}.user-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:6px 14px;font-size:13px;color:var(--color-text-muted)}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.user-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 16px;border-radius:12px;border:none;font-size:13px;font-weight:600;cursor:pointer;min-width:96px}.user-actions[_ngcontent-%COMP%]   .approve[_ngcontent-%COMP%]{background:var(--color-btn-primary);color:var(--color-btn-text-light)}.user-actions[_ngcontent-%COMP%]   .approve[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.user-actions[_ngcontent-%COMP%]   .reject[_ngcontent-%COMP%]{background:#fee2e2;color:var(--color-estado-rechazado)}.user-actions[_ngcontent-%COMP%]   .reject[_ngcontent-%COMP%]:hover{background:#fecaca}@media (max-width:900px){.user-item[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}.user-info[_ngcontent-%COMP%]{grid-template-columns:1fr}.user-actions[_ngcontent-%COMP%]{justify-content:center}}@media (max-width:520px){.revision-container[_ngcontent-%COMP%]{padding:14px}.revision-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;text-align:center}.user-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:center;gap:10px}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;width:auto}}"]})}}return e})(),canActivate:[b.z],data:{roles:["ADMIN"]}},{path:"inicio",component:(()=>{class e{constructor(n){this.router=n}solicitar(){this.router.navigate(["/components/solicitud-subastador"])}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-inicio"]],decls:15,vars:0,consts:[[1,"landing"],[1,"box"],[1,"subtitle"],[1,"info"],[1,"accent"],[3,"click"],[1,"footer-text"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Global Carn\xedvora Network"),t.k0s(),t.j41(4,"p",2),t.EFF(5," Plataforma comunitaria de subastas y gesti\xf3n "),t.k0s(),t.j41(6,"div",3)(7,"p"),t.EFF(8," Actualmente la plataforma est\xe1 en desarrollo y solo est\xe1 habilitada para subastadores y administradores. "),t.k0s(),t.j41(9,"p",4),t.EFF(10," Los usuarios pueden solicitar el rol de subastador. "),t.k0s()(),t.j41(11,"button",5),t.bIt("click",function(){return a.solicitar()}),t.EFF(12," Solicitar ser subastador "),t.k0s(),t.j41(13,"span",6),t.EFF(14," M\xe1s funciones estar\xe1n disponibles pr\xf3ximamente "),t.k0s()()())},styles:[".landing[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg-alt);padding:16px}.box[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:14px;padding:36px;max-width:520px;width:100%;text-align:center}h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:8px;color:var(--color-title)}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-subtitle);margin-bottom:24px}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:12px;color:var(--color-text)}.accent[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:500}button[_ngcontent-%COMP%]{margin-top:20px;width:100%;padding:14px;border-radius:10px;border:none;background:var(--color-btn-primary);color:var(--color-btn-text-light);font-size:1rem;font-weight:500;cursor:pointer}button[_ngcontent-%COMP%]:hover{background:var(--color-btn-primary-light)}.footer-text[_ngcontent-%COMP%]{display:block;margin-top:24px;font-size:.8rem;color:var(--color-text-muted)}@media (max-width: 768px){.box[_ngcontent-%COMP%]{padding:28px}h1[_ngcontent-%COMP%]{font-size:1.7rem}.subtitle[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.box[_ngcontent-%COMP%]{padding:22px;border-radius:12px}h1[_ngcontent-%COMP%]{font-size:1.5rem}button[_ngcontent-%COMP%]{padding:13px;font-size:.95rem}.footer-text[_ngcontent-%COMP%]{font-size:.75rem}}"]})}}return e})(),canActivate:[b.z],data:{roles:["USER","SUBASTADOR_PENDIENTE"]}},{path:"terminos-subastador",component:y,canActivate:[b.z],data:{roles:["ADMIN","SUBASTADOR"]}}];let un=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(gn),g.iI]})}}return e})(),bn=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,un,p.YN,p.X1,l.q1]})}}return e})()}}]);